/*!
* Firebrick UI
* Author: Steven Masala
* me@smasala.com
* FirebrickUI, component library for Firebrick JS
**/

(function(e,t){if(typeof define!="function"||!define.amd)return t(e.jQuery,e.Firebrick,e.ko,e.Handlebars);define(["jquery","firebrick","knockout","knockout-mapping","text","handlebars"],function(e,n,r,i,s,o){return r.mapping=i,t(e,n,r,o)})})(this,function(e,t,n,r){if(!t){console.error("Firebrick has not been loaded, Firebrick-UI requires Firebrick JS to function");return}if(t.ui){console.error("Firebrick.ui namespace has already been taken!");return}t.ui={version:"0.4.2",_searchCache:{},build:function(n){var r=this,i=t.views.getTarget(n.target),s,o;return n.view&&n.view.on("ready",function(){e.each(s.items,function(e,t){t.fireEvent("componentReady")})}),s=r._populate(n.items,n.view),o=s.html,n.view&&s.items.length&&(n.view.items=s.items),i&&i.append(o),o},_populate:function(n,r){var i=this,s=[],o="",u,a;return e.each(n,function(n,f){f.isView?(f._state=="initial"&&(u=f.init()),o+=u.tpl):f.viewName?(u=t.create(f.viewName,f),o+=u.tpl):(f.uiComponent?u=f:(a=i.getByShortName((e.isFunction(f.uiName)?f.uiName():f.uiName)||f),u=t.create(a._classname,f.uiName?Object.getPrototypeOf(Object.create(f)):null)),o+=u.build()),u._parent=r,s.push(u)}),{html:o,items:s}},getByShortName:function(n){var r=this,i=r._searchCache[n];return i||e.each(t.classes.classRegistry,function(e,t){if(t.uiComponent&&t.uiName==n)return i=t,r._searchCache[n]=t,!1}),i||console.error("ui component",n,"not found"),i},get:function(e){return t.get(e)},utils:{stringify:function(t){if(t){var n=function(t,r){var i=r?"":"{";return e.each(t,function(t,r){e.isPlainObject(r)?i+=t+":"+n(r):i+=t+": "+r+","}),i=i.substr(-1)==","?i.substring(0,i.length-1):i,i+=r?"":"},",i};return n(t,!0)}return""}}},n.bindingHandlers.withProperties={init:function(e,t,r,i,s){var o=s.extend(t);return n.applyBindingsToDescendants(o,e),{controlsDescendantBindings:!0}}}});