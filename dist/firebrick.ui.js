/*!
* Firebrick UI
* @author Steven Masala [me@smasala.com]
* 
* FirebrickUI, component library for Firebrick JS
**/

(function(e,t){if(typeof define!="function"||!define.amd)return t(e.jQuery,e.Firebrick,e.ko);define(["jquery","firebrick","knockout","devicejs","knockout-mapping","text"],function(e,n,r,i,s,o){return r.mapping=s,t(e,n,r,i)})})(this,function(e,t,n,r){if(!t){console.error("Firebrick has not been loaded, Firebrick-UI requires Firebrick JS to function");return}if(t.ui){console.error("Firebrick.ui namespace has already been taken!");return}t.ui={version:"0.14.0",build:function(e){var n=this,r=t.views.getTarget(e.target),i,s;return i=n._populate(e.items,e.view),s=i.html,e.view&&i.items.length&&(e.view.items=i.items),r&&r.append(s),s},_populate:function(t,n){var r=this,i=[],s="",o;e.isFunction(t)&&(t=t());for(var u=0,a=t.length;u<a;u++)o=r._buildComponent(t[u],n),s+=o._html,o.getId||console.error("something went wrong",t[u],"is it defined correctly? Check the item name and dependency include"),i.push(o);return{html:s,items:i}},_buildComponent:function(e,n){var r=this,i,s;return e.isView?(e._state!=="initial"&&(i=e.init()),i=e):e.viewName?i=t.create(e.viewName,e):(e=r._componentFilter(e),e.uiComponent?i=e:(s=t.get(e.sName||e),s||console.error("Has",e.sName||e,"been added as a dependency?"),i=t.create(s._classname,e.sName?Object.getPrototypeOf(Object.create(e)):null))),i._parent||(i._parent=n),i.build&&(i._html=i.build()),i},_componentFilter:function(e){if(typeof e=="string")switch(e){case"|":e="display.divider"}return e},getCmp:function(e){return t.getById(e)},get:function(e){return t.get(e)},utils:{_buildDotObj:function(e,t,n){var r=this,i=e.shift();return n=n||{},n[i]={},e.length?e[0]!==""?r._buildDotObj(e,t,n[i]):console.error("error building sName, found empty string",e,i,t):n[i]=t,n},getValue:function(t){return e.isFunction(t)?t():t},stringify:function(t){if(t){var n=function(t,r){var i=r?"":"{",s,o;for(s in t)t.hasOwnProperty(s)&&(o=t[s],e.isPlainObject(o)?i+=s+":"+n(o):i+=s+": "+o+",");return i=i.substr(-1)===","?i.substring(0,i.length-1):i,i+=r?"":"},",i};return n(t,!0)}return""}},helper:{tabBuilder:function(n){var r=t.getById(n),i=r.items;return e.isFunction(i)?"Firebrick.getById('"+n+"').items()":e.isArray(i)?"Firebrick.getById('"+n+"').items":i},optionString:function(t){var n=t.options;return e.isFunction(n)?"Firebrick.ui.getCmp('"+t.getId()+"').options()":e.isArray(n)?"Firebrick.ui.getCmp('"+t.getId()+"').options":n},linkBuilder:function(e){return e&&typeof e.link=="string"?e.link:"javascript:void(0)"},callFunction:function(e,n,r){var i=t.getById(e);i&&n&&i[n].apply(i,r)}},renderer:{_registry:{},add:function(e,t){var n=this;return n._registry[e]=t,n},get:function(t){var n=this;return e.isFunction(t)&&(t=t()),n._registry[t]}},_sNames:{"button.dropdown.list":{path:"Firebrick.ui/button/dropdown/List"},"button.button":{path:"Firebrick.ui/button/Button"},"button.buttongroup":{path:"Firebrick.ui/button/ButtonGroup"},"button.icon":{path:"Firebrick.ui/button/Icon"},"button.togglebutton":{path:"Firebrick.ui/button/ToggleButton"},"containers.border.pane":{path:"Firebrick.ui/containers/border/Pane"},"containers.tab.pane":{path:"Firebrick.ui/containers/tab/Pane"},"containers.accordion":{path:"Firebrick.ui/containers/Accordion"},"containers.borderlayout":{path:"Firebrick.ui/containers/BorderLayout"},"containers.box":{path:"Firebrick.ui/containers/Box"},"containers.form":{path:"Firebrick.ui/containers/Form"},"containers.formpanel":{path:"Firebrick.ui/containers/FormPanel"},"containers.gridcolumn":{path:"Firebrick.ui/containers/GridColumn"},"containers.gridrow":{path:"Firebrick.ui/containers/GridRow"},"containers.modal":{path:"Firebrick.ui/containers/Modal"},"containers.fieldset":{path:"Firebrick.ui/containers/Fieldset"},"containers.panel":{path:"Firebrick.ui/containers/Panel"},"containers.tabpanel":{path:"Firebrick.ui/containers/TabPanel"},"display.alert":{path:"Firebrick.ui/display/Alert"},"display.divider":{path:"Firebrick.ui/display/Divider"},"display.header":{path:"Firebrick.ui/display/Header"},"display.image":{path:"Firebrick.ui/display/Image"},"display.list":{path:"Firebrick.ui/display/List"},"display.progress":{path:"Firebrick.ui/display/Progress"},"display.span":{path:"Firebrick.ui/display/Span"},"display.text":{path:"Firebrick.ui/display/Text"},"fields.checkbox":{path:"Firebrick.ui/fields/Checkbox"},"fields.datepicker":{path:"Firebrick.ui/fields/DatePicker"},"fields.display":{path:"Firebrick.ui/fields/Display"},"fields.email":{path:"Firebrick.ui/fields/Email"},"fields.file":{path:"Firebrick.ui/fields/File"},"fields.input":{path:"Firebrick.ui/fields/Input"},"fields.password":{path:"Firebrick.ui/fields/Password"},"fields.radio":{path:"Firebrick.ui/fields/Radio"},"fields.selectbox":{path:"Firebrick.ui/fields/SelectBox"},"fields.textarea":{path:"Firebrick.ui/fields/TextArea"},"nav.breadcrumbs":{path:"Firebrick.ui/nav/Breadcrumbs"},"nav.list":{path:"Firebrick.ui/nav/List"},"nav.navbar":{path:"Firebrick.ui/nav/Navbar"},"nav.pagination":{path:"Firebrick.ui/nav/Pagination"},"nav.toolbar":{path:"Firebrick.ui/nav/Toolbar"},"table.table":{path:"Firebrick.ui/table/Table"},"table.treetable":{path:"Firebrick.ui/table/TreeTable"}}},t.classes.addSNames(t.ui._sNames),t.classes.overwrite("Firebrick.view.Base",{passDownEvents:{rendered:1,htmlRendered:1,unbound:1},passToProperties:{items:1,inputAddon:1},listeners:{preReady:function(){var e=this,n;if(e.passDownEvents){t.utils.merge("passDownEvents",e),t.utils.merge("passToProperties",e);for(n in e.passDownEvents)e.passDownEvents.hasOwnProperty(n)&&e.on(n,e._createPassEvent())}}},_createPassEvent:function(){return function(){var t=this,n,r=arguments,i,s,o=t.passToProperties;for(i in o){n=t[i];if(n&&e.isArray(n))for(var u=0,a=n.length;u<a;u++)s=n[u],s.passEvent&&s.passEvent(r)}}},items:null,tpl:function(){var e=this;if(e.items)return t.ui.build({items:e.items,view:e})}}),n.bindingHandlers.withProperties={init:function(e,t,r,i,s){var o=s.createChildContext(s.$rawData,null,function(e){n.utils.extend(e,t())});return n.applyBindingsToDescendants(o,e),{controlsDescendantBindings:!0}}},n.bindingHandlers.debug={init:function(e,t,n,r,i){console.warn("Debug:",e,t(),n(),r,i)}}});