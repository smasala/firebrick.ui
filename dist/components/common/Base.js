/*!
 * @author Steven Masala [me@smasala.com]
 */

define(["doT"],function(e){return Firebrick.define("Firebrick.ui.common.Base",{extend:"Firebrick.view.Base",_idPrefix:"fb-ui-",id:null,uiComponent:!0,glyphiconClass:"glyphicon",_build:null,_template:null,tpl:null,subTpl:null,uiName:null,constructor:function(){var e=this,t=e.uiName;if(t){var n=t.substr(t.lastIndexOf("-")+1);Firebrick.ui.cmp[n]=t}return e.precompile(),e.callParent(arguments)},precompile:function(){var e=this;return e._template={},e._build={},e.tpl&&e.template(),e.subTpl&&e.template("subTpl"),e},b:function(e){return $.isFunction(e)?e.bind(this)():e},init:function(){var e=this;return e.autoRender&&e.getTarget()&&(e.tpl=e.build()),this.callParent(arguments)},template:function(t,n){var r=this;t=t||"tpl";if(!r._template[t]||n)r._template[t]=e.template(r[t]);return r._template[t]},build:function(e){var t=this;return e=e||"tpl",t._build[e]=t._template[e](t),t._build[e]},dataBind:function(e){var t=e?this[e]:this.bindings;return $.isFunction(t)&&(t=t.call(this)),Firebrick.ui.utils.stringify(t)},getId:function(){var e=this,t=e.id;return t||(t=this.getClassId(),e.id=t),t},getSubTpl:function(){return this.build("subTpl")},_getParent:function(e){var t=e||this,n=Object.getPrototypeOf(t);if(t._classname!=n._classname)if(t.subTpl!=n.subTpl||t.tpl!=n.tpl)return n;return this._getParent(n)},getParentTpl:function(){var t=this;return e.template(t._getParent().tpl)(t)},getParentSubTpl:function(){var t=this;return e.template(t._getParent().subTpl)(t)},cleanString:function(e){return e.replace(/\'/g,"")},parseBind:function(e){return"'"+e+"'"}})});