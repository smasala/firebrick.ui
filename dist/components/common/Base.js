/*!
 * @author Steven Masala [me@smasala.com]
 */

define(["handlebars"],function(e){return e.registerHelper("data-bind",function(e,t){return typeof e=="string"?t.data.root["data-bind"](e):e.data.root["data-bind"]()}),Firebrick.define("Firebrick.ui.common.Base",{extend:"Firebrick.class.Base",_idPrefix:"fb-ui-",id:null,uiComponent:!0,glyphiconClass:"glyphicon",renderTo:!1,_build:"",tpl:null,uiName:null,appendComponent:!1,init:function(){var e=this;return $.isPlainObject(e.bindings)&&Firebrick.utils.mixinFor("bindings",e),e.renderTo&&e.on("ready",function(){Firebrick.views.renderTo(Firebrick.views.getTarget(e.renderTo),e.build(),e.appendComponent)}),this.callParent()},build:function(t){var n=this;return n._build||(n._build=e.compile(t?n[t]:n.tpl)(n)),n._build},"data-bind":function(e){var t=e?this[e]:this.bindings;return $.isFunction(t)&&(t=t.call(this)),Firebrick.ui.utils.stringify(t)},getId:function(){var e=this,t=e.id;return t||(t=this.getClassId(),e.id=t),t},getSubTpl:function(){return this.build("subTpl")},_getParent:function(e){var t=e||this,n=Object.getPrototypeOf(t);if(t._classname!=n._classname)if(t.subTpl!=n.subTpl||t.tpl!=n.tpl)return n;return this._getParent(n)},getParentTpl:function(){var t=this;return e.compile(t._getParent().tpl)(t)},getParentSubTpl:function(){var t=this;return e.compile(t._getParent().subTpl)(t)},cleanString:function(e){return e.replace(/\'/g,"")}})});