/*!
 * @author Steven Masala [me@smasala.com]
 */

define(["jquery","./Menu","../common/mixins/Items"],function(e){"use strict";return Firebrick.define("Firebrick.ui.menu.ContextMenu",{extend:"Firebrick.ui.menu.Menu",mixins:"Firebrick.ui.common.mixins.Items",sName:"menu.contextmenu",target:"body",enclosedBind:!0,appendTarget:!0,contextMenuEvent:null,init:function(){var e=this;return e.on("rendered",function(){e._initContext(),e.position()}),e.callParent(arguments)},position:function(){var t=this,n=e("> ul",t.getElement()),r=t.contextMenuEvent;n.css({position:"absolute","z-index":"10000",top:r.clientY,left:r.clientX,display:"block"})},_initContext:function(){var t=this,n=function(r){var i=e(r.target),s=t.getElement();if(!s.is(i)||s.has(i).length)t.destroy(),e(document).off("click",n)};e(document).on("click",n)},bindings:function(){var e=this,t=e.callParent(arguments);return t.css["'fb-ui-contextmenu'"]=!0,t}})});