/*!
 * @author Steven Masala [me@smasala.com]
 */

define(["text!./Panel.html","./Base","../nav/Toolbar","../common/mixins/Toolbars"],function(e){return Firebrick.define("Firebrick.ui.containers.Panel",{extend:"Firebrick.ui.containers.Base",mixins:"Firebrick.ui.common.mixins.Toolbars",uiName:"fb-ui-panel",tpl:e,title:"",headerSize:3,panelClass:!0,panelTypeClass:"default",panelHeaderClass:!0,panelBodyClass:!0,panelTitleClass:!0,content:"",contentHTML:!1,collapsible:!1,showCollapseIcon:!0,collapsed:!1,headerItems:!1,headerItemsPosition:"pull-right",_collapsedClass:"fb-ui-is-collapsed",init:function(){var e=this;return e.on("rendered",function(){var t=e.getElement();e.collapsed&&t.addClass(e._collapsedClass)}),e.callParent(arguments)},bindings:function(){var e=this,t=e.callParent(arguments);return t.css.panel=e.panelClass,e.panelTypeClass&&(t.css[e.parseBind("panel-"+e.panelTypeClass)]=!0),t},tabBindings:function(){var e=this,t={css:{},attr:{id:e.parseBind("fb-ui-collapse-"+e.getId())}};return e.collapsible&&(t.css["'panel-collapse'"]=e.collapsible,t.css.collapse=e.collapsible,e.collapsed||(t.css["in"]=!0)),t.css["'fb-ui-panel-body-container'"]=!0,t},panelHeaderBindings:function(){var e=this,t={css:{"'panel-heading'":e.panelHeaderClass}};return e.headerItems&&(t.css.clearfix=!0),t},headerItemsBindings:function(){var e=this,t={css:{"'btn-group'":!0}};return e.headerItemsPosition&&(t.css[e.parseBind(e.headerItemsPosition)]=!0),e.collapsible&&e.showCollapseIcon&&(t.css["'fb-ui-collapse-icon-present'"]=!0),t},collapsibleLinkBindings:function(){var e=this,t="fb-ui-collapse-"+e.getId();return{css:{"'fb-ui-title-link'":!0},attr:{"'data-toggle'":"'collapse'",href:e.parseBind("#"+t),"'aria-expanded'":typeof e.collapsed=="boolean"?e.collapsed:!0,"'aria-controls'":e.parseBind(t)},click:"function(){ return Firebrick.ui.helper.callFunction('"+e.getId()+"', '_collapseTitleClick', arguments); }"}},_collapseTitleClick:function(e,t){var n=this,r=$(t.target),i=r.closest(".panel");i.toggleClass(n._collapsedClass),i.trigger("fb-ui-panel-state-change")},collapsibleIconBindings:function(){var e=this,t={css:{},attr:{}};return t.css["'fb-ui-collapse-icon'"]=!0,e.headerItems&&(t.css["'fb-ui-header-items-present'"]=!0),t.click="function(){ return Firebrick.ui.helper.callFunction('"+e.getId()+"', '_collapseIconClick', arguments)}",t},_collapseIconClick:function(e,t){var n=$(t.target),r=n.siblings(".fb-ui-title-link");r[0].click()},panelHeaderTextBindings:function(){var e=this,t={text:e.textBind(e.title),css:{"'panel-title'":e.panelTitleClass}};return e.headerItems&&(t.css["'pull-left'"]=!0),t},panelBodyBindings:function(){var e=this,t={css:{"'panel-body'":e.panelBodyClass}};return!e.items&&e.content&&(t.html=e.contentHTML?e.content:e.textBind(e.content)),e.toolbarContainer(t),t}})});