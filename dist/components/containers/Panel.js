/*!
 * @author Steven Masala [me@smasala.com]
 */

define(["text!./Panel.html","jquery","./Base","../nav/Toolbar","../common/mixins/Toolbars","../common/mixins/Label"],function(e,t){return Firebrick.define("Firebrick.ui.containers.Panel",{extend:"Firebrick.ui.containers.Base",mixins:["Firebrick.ui.common.mixins.Toolbars","Firebrick.ui.common.mixins.Label"],sName:"containers.panel",tpl:e,role:"",collapseRole:"",title:"",headerSize:3,panelClass:!0,panelTypeClass:"default",panelHeaderClass:!0,panelBodyClass:!0,panelTitleClass:!0,storeProp:"",html:"",collapsible:!1,showCollapseIcon:!0,collapsed:!1,_collapsedState:!1,headerItems:!1,headerItemsPosition:"pull-right",_collapsedClass:"fb-ui-is-collapsed",dataParentId:"",active:!1,init:function(){var e=this;return e._collapsedState=e.collapsed,e.on("rendered",function(){var t=e.getElement(),n;e.collapsed&&t.addClass(e._collapsedClass),n=function(){t.toggleClass(e._collapsedClass),t.trigger("fb-ui-panel-state-change"),e._collapsedState=!e._collapsedState},t.on("show.bs.collapse hide.bs.collapse",n),e.on("unbound",function(){t.off("show.bs.collapse hide.bs.collapse",n)})}),e.callParent(arguments)},toggleCollapse:function(){var e=this;return e._collapsedState?e.expand():e.collapse(),e},collapse:function(){var e=this,n=e.getElement(),r=t("> .panel-collapse",n);return r.collapse("hide"),e},expand:function(){var e=this,n=e.getElement(),r=t("> .panel-collapse",n);return r.collapse("show"),e},bindings:function(){var e=this,t=e.callParent(arguments);return t.css.panel=e.panelClass,e.panelTypeClass&&(t.css[e.parseBind("panel-"+e.panelTypeClass)]=!0),t},tabBindings:function(){var e=this,t={css:{},attr:{id:e.parseBind("fb-ui-collapse-"+e.getId())}};return e.collapsible&&(t.css["'panel-collapse'"]=e.collapsible,t.css.collapse=e.collapsible,e.collapsed||(t.css["in"]=!0)),e.collapseRole&&(t.attr.role=e.parseBind(e.collapseRole)),t.css["'fb-ui-panel-body-container'"]=!0,t},panelHeaderBindings:function(){var e=this,t={css:{"'panel-heading'":e.panelHeaderClass},attr:{}};return e.headerItems&&(t.css.clearfix=!0),e.role&&(t.attr.role=e.parseBind(e.role)),t},headerItemsBindings:function(){var e=this,t={css:{"'btn-group'":!0}};return e.headerItemsPosition&&(t.css[e.parseBind(e.headerItemsPosition)]=!0),e.collapsible&&e.showCollapseIcon&&(t.css["'fb-ui-collapse-icon-present'"]=!0),t},collapsibleLinkBindings:function(){var e=this,t="fb-ui-collapse-"+e.getId(),n={css:{"'fb-ui-title-link'":!0},attr:{"'data-toggle'":"'collapse'",href:e.parseBind("#"+t),"'aria-expanded'":typeof e.collapsed=="boolean"?e.collapsed:!0,"'aria-controls'":e.parseBind(t)}};return e.dataParentId&&(n.attr["'data-parent'"]=e.dataParentId),n},collapsibleIconBindings:function(){var e=this,t={css:{},attr:{}};return t.css["'fb-ui-collapse-icon'"]=!0,e.headerItems&&(t.css["'fb-ui-header-items-present'"]=!0),t.click="function(){ return Firebrick.ui.helper.callFunction('"+e.getId()+"', '_collapseIconClick', arguments)}",t},_collapseIconClick:function(e,n){var r=t(n.target),i=r.siblings(".fb-ui-title-link");i[0].click()},panelHeaderTextBindings:function(){var e=this,t={text:e.textBind(e.title),css:{"'panel-title'":e.panelTitleClass}};return e.headerItems&&(t.css["'pull-left'"]=!0),e.labelText&&(t.css["'fb-ui-has-label'"]=!0),t},panelBodyBindings:function(){var e=this,t={css:{"'panel-body'":e.panelBodyClass}};return e.items||(e.storeProp?t.html=e.storeProp:t.html="Firebrick.getById('"+e.getId()+"').html"),e.toolbarContainer(t),t}})});