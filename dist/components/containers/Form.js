/*!
 * @author Steven Masala [me@smasala.com]
 */

define(["text!./Form.html","jquery","./Base"],function(e,t){return Firebrick.define("Firebrick.ui.containers.Form",{extend:"Firebrick.ui.containers.Base",uiName:"fb-ui-form",tpl:e,formRole:"form",horizontal:!0,inline:!1,enctype:"multipart/form-data",showProgress:!0,ajaxProcessData:!1,url:"/",submitType:"post",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;console.log(t)}},!1),e.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;console.log(t)}},!1),e},_form:null,success:function(){console.info("success")},failure:function(){console.info("failure")},complete:function(){},always:function(){},beforeSend:function(){},getFormData:function(){var e=this;return new window.FormData(e.getElement())},init:function(){var e=this;return e.on("rendered",function(){e._form=e.getElement()}),e.callParent(arguments)},submit:function(){var e=this;if(!e.url||typeof e.url!="string"){console.error("unable to submit form. No url is set or is set incorrectly",e.url,e);return}e._form||console.error("unable to submit form. Form not found for id",e.getId()),window.FormData?t.ajax({xhr:e.xhr,url:e.url,type:e.submitType,data:new window.FormData(e._form[0]),processData:e.ajaxProcessData,contentType:e.enctype,beforeSend:e.beforeSend.bind(e),complete:e.complete.bind(e),success:e.success.bind(e),failure:e.failure.bind(e)}).always(e.always.bind(e)):console.error("FormData is not supported by your browser")},bindings:function(){var e=this,t={css:{},attr:{}};return t.attr.role=e.parseBind(e.formRole),t.attr.enctype=e.parseBind(e.enctype),t.css["'form-horizontal'"]=e.horizontal,t.attr["'form-inline'"]=e.inline,t}})});