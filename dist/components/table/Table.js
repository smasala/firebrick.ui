/*!
 * @author Steven Masala [me@smasala.com]
 */

define(["jquery","text!./Table.html","../common/Base","datatables","responsive-tables-js"],function(e,t){return Firebrick.define("Firebrick.ui.table.Table",{extend:"Firebrick.ui.common.Base",uiName:"fb-ui-table",tpl:t,responsiveClass:!0,responsive:!0,data:!1,tableStriped:!0,tableHover:!1,tableCondensed:!1,tableBordered:!1,showHeadings:!0,showRows:!0,datatable:!1,treetable:!1,dataTableConfig:function(){return{}},expandable:!0,showCaption:!0,expandText:"Expand",collapseText:"Collapse",treeTableConfig:function(){var e=this;return{expandable:e.expandable}},init:function(){var t=this;t.on("componentReady",function(){var n=t.getId(),r=e("#"+n);t.datatable&&r.DataTable(t.dataTableConfig()),t.treetable&&r.treetable(t.treeTableConfig()),t.responsive&&window.responsiveTables&&window.responsiveTables.update(n)}),t.callParent()},containerBindings:function(){var e=this;return{css:{"'responsive'":e.responsiveClass}}},_getData:function(){var t=this;return e.isPlainObject(t.data)?JSON.stringify(t.data):t.data},bindings:function(){var e=this;return{"with":e._getData(),css:{"'table'":!0,"'table-striped'":e.tableStriped,"'table-hover'":e.tableHover,"'table-condensed'":e.tableCondensed,"'table-bordered'":e.tableBordered,"'responsive'":e.responsive}}},theadBindings:function(){return{"if":"cols"}},tbodyBindings:function(){return{"if":"rows"}},theadTRBindings:function(){return{foreach:"cols"}},theadTRTDBindings:function(){return{text:"$data"}},tbodyBindings:function(){return{foreach:"rows"}},tbodyTRBindings:function(){return{foreach:"$data.cols ? $data.cols : $data",attr:{"'data-tt-id'":"$data.id ? $data.id : false","'data-tt-parent-id'":"$data.parentId ? $data.parentId : false"}}},tbodyTRTDBindings:function(){return{text:"$data.text ? $data.text : $data"}},captionBindings:function(){var e=this;return{show:e.showCaption}},expandBindings:function(){var e=this;return{text:"fb.text('"+e.expandText+"')",attr:{onclick:"\"$('#"+e.getId()+"').treetable('expandAll'); return false;\"",href:"''"}}},collapseBindings:function(){var e=this;return{text:"fb.text('"+e.collapseText+"')",attr:{onclick:"\"$('#"+e.getId()+"').treetable('collapseAll'); return false;\"",href:"''"}}}})});