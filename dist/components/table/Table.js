/*!
 * @author Steven Masala [me@smasala.com]
 */

define(["jquery","text!./Table.html","../common/Base","datatables","responsive-tables-js"],function(e,t){return Firebrick.define("Firebrick.ui.table.Table",{extend:"Firebrick.ui.common.Base",uiName:"fb-ui-table",tpl:t,responsiveClass:!0,responsive:!0,data:!1,tableStriped:!0,tableHover:!1,tableCondensed:!1,tableBordered:!1,showHeadings:!0,showRows:!0,datatable:!1,treetable:!1,dataTableConfig:function(){return{language:{paginate:{first:"First",last:"Last",next:"Next",previous:"Previous"}}}},expandable:!0,showCaption:!0,expandText:"Expand",collapseText:"Collapse",showOptions:!0,treeTableConfig:function(){var e=this;return{expandable:e.expandable}},init:function(){var t=this;t.on("rendered",function(){var n=t.getId(),r=t.getElement();t.datatable&&r.DataTable(t.dataTableConfig()),t.treetable&&(t.showOptions&&(e("a#fb-expand-"+n).on("click",t.generateOnclick("expandAll")),e("a#fb-collapse-"+n).on("click",t.generateOnclick("collapseAll"))),r.treetable(t.treeTableConfig())),t.responsive&&window.responsiveTables&&window.responsiveTables.update(n)}),t.callParent(arguments)},containerBindings:function(){var e=this;return{css:{"'responsive'":e.responsiveClass}}},_getData:function(){var t=this;return e.isPlainObject(t.data)?"Firebrick.ui.getCmp('"+t.getId()+"').data":t.data},bindings:function(){var e=this,t=e.callParent(arguments);return t["with"]=e._getData(),t.css.table=!0,t.css["'table-striped'"]=e.tableStriped,t.css["'table-hover'"]=e.tableHover,t.css["'table-condensed'"]=e.tableCondensed,t.css["'table-bordered'"]=e.tableBordered,t.css["'responsive'"]=e.responsive,t},theadBindings:function(){return{"if":"cols"}},theadTRBindings:function(){return{foreach:"cols"}},theadTRTDBindings:function(){return{html:"$data.renderer ? fb.ui.renderer.get($data.renderer)($data, $context, $parent, $root) : ($data.text ? $data.text : $data)"}},tbodyBindings:function(){return{foreach:"rows"}},tbodyTRBindings:function(){return{foreach:"$data.cols ? $data.cols : $data",attr:{"'data-tt-id'":"$data.id ? $data.id : false","'data-tt-parent-id'":"$data.parentId ? $data.parentId : false"}}},tbodyTRTDBindings:function(){return{html:"$data.renderer ? fb.ui.renderer.get($data.renderer)($data, $context, $parent, $root) : ($data.text ? $data.text : $data)"}},captionBindings:function(){var e=this;return{show:e.showCaption}},generateOnclick:function(e){var t=this;return function(){return t.getElement().treetable(e),!1}},expandBindings:function(){var e=this;return{text:e.textBind(e.expandText),attr:{id:e.parseBind("fb-expand-"+e.getId()),href:"''"}}},collapseBindings:function(){var e=this;return{text:e.textBind(e.collapseText),attr:{id:e.parseBind("fb-collapse-"+e.getId()),href:"''"}}}})});