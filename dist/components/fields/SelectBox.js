/*!
 * @author Steven Masala [me@smasala.com]
 */

define(["text!./SelectBox.html","jquery","knockout","./Input"],function(e,t,n){"use strict";return Firebrick.define("Firebrick.ui.fields.SelectBox",{extend:"Firebrick.ui.fields.Input",sName:"fields.selectbox",multiSelect:!1,subTpl:e,options:!1,type:"select",optionsValue:"value",optionsText:"text",bindings:function(){var e=this,t=e.callParent(arguments);return e.inplaceEdit||(t.options=Firebrick.ui.helper.optionString(e),e.multiSelect?t.selectedOptions=e.value:t.value=e.value,t.optionsText=e.parseBind(e.optionsText),t.optionsValue=e.parseBind(e.optionsValue),t.attr.multiple=e.multiSelect),t},_getInplaceEditText:function(e){var r=this,i=r.getElement(),s=i?r.getValue():r.value,o=r.options,u=r.optionsValue,a=r.optionsText,f="",l,c;if(s){t.isFunction(o)?o=o():typeof o=="string"&&(o=n.unwrap(e.hasOwnProperty(o)?e[o]:e)),t.isArray(o)||(o=[o]);for(var h=0,p=o.length;h<p;h++){l=o[h];if(t.isPlainObject(l)){c=n.unwrap(l[u]);if(c===s.replace("'","")){f=n.unwrap(l[a]);break}}}}else f=Firebrick.text(r.inplaceEditEmptyText);return f}})});