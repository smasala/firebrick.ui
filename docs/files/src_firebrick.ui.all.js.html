<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\firebrick.ui.all.js - Firebrick UI API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..\fbui_small.png" title="Firebrick UI API"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.20.12</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/components.button.Button.html">components.button.Button</a></li>
            
                <li><a href="../classes/components.button.ButtonGroup.html">components.button.ButtonGroup</a></li>
            
                <li><a href="../classes/components.button.components.common.mixins.Items.html">components.button.components.common.mixins.Items</a></li>
            
                <li><a href="../classes/components.button.components.common.MultiplesBase.html">components.button.components.common.MultiplesBase</a></li>
            
                <li><a href="../classes/components.button.components.menu.Menu.html">components.button.components.menu.Menu</a></li>
            
                <li><a href="../classes/components.common.components.fields.Input.html">components.common.components.fields.Input</a></li>
            
                <li><a href="../classes/components.common.mixins.components.button.ButtonGroupBase.html">components.common.mixins.components.button.ButtonGroupBase</a></li>
            
                <li><a href="../classes/components.common.mixins.components.button.ToggleButton.html">components.common.mixins.components.button.ToggleButton</a></li>
            
                <li><a href="../classes/components.common.mixins.components.common.Base.html">components.common.mixins.components.common.Base</a></li>
            
                <li><a href="../classes/components.common.mixins.components.containers.Base.html">components.common.mixins.components.containers.Base</a></li>
            
                <li><a href="../classes/components.common.mixins.components.nav.Toolbar.html">components.common.mixins.components.nav.Toolbar</a></li>
            
                <li><a href="../classes/components.common.view.Base.html">components.common.view.Base</a></li>
            
                <li><a href="../classes/components.containers.border.Pane.html">components.containers.border.Pane</a></li>
            
                <li><a href="../classes/components.containers.border.plugins.Draggable.html">components.containers.border.plugins.Draggable</a></li>
            
                <li><a href="../classes/components.containers.BorderLayout.html">components.containers.BorderLayout</a></li>
            
                <li><a href="../classes/components.containers.components.common.mixins.Column.html">components.containers.components.common.mixins.Column</a></li>
            
                <li><a href="../classes/components.containers.components.common.mixins.Toolbars.html">components.containers.components.common.mixins.Toolbars</a></li>
            
                <li><a href="../classes/components.containers.components.fields.Base.html">components.containers.components.fields.Base</a></li>
            
                <li><a href="../classes/components.containers.Fieldset.html">components.containers.Fieldset</a></li>
            
                <li><a href="../classes/components.containers.Form.html">components.containers.Form</a></li>
            
                <li><a href="../classes/components.containers.FormPanel.html">components.containers.FormPanel</a></li>
            
                <li><a href="../classes/components.containers.GridColumn.html">components.containers.GridColumn</a></li>
            
                <li><a href="../classes/components.containers.GridRow.html">components.containers.GridRow</a></li>
            
                <li><a href="../classes/components.containers.Panel.html">components.containers.Panel</a></li>
            
                <li><a href="../classes/components.containers.tab.components.containers.Modal.html">components.containers.tab.components.containers.Modal</a></li>
            
                <li><a href="../classes/components.containers.tab.Pane.html">components.containers.tab.Pane</a></li>
            
                <li><a href="../classes/components.display.Alert.html">components.display.Alert</a></li>
            
                <li><a href="../classes/components.display.components.containers.TabPanel.html">components.display.components.containers.TabPanel</a></li>
            
                <li><a href="../classes/components.display.components.nav.Base.html">components.display.components.nav.Base</a></li>
            
                <li><a href="../classes/components.display.Divider.html">components.display.Divider</a></li>
            
                <li><a href="../classes/components.display.Header.html">components.display.Header</a></li>
            
                <li><a href="../classes/components.display.Image.html">components.display.Image</a></li>
            
                <li><a href="../classes/components.display.Loader.html">components.display.Loader</a></li>
            
                <li><a href="../classes/components.display.Progress.html">components.display.Progress</a></li>
            
                <li><a href="../classes/components.display.Span.html">components.display.Span</a></li>
            
                <li><a href="../classes/components.fields.Checkbox.html">components.fields.Checkbox</a></li>
            
                <li><a href="../classes/components.fields.ComboBox.html">components.fields.ComboBox</a></li>
            
                <li><a href="../classes/components.fields.components.button.Icon.html">components.fields.components.button.Icon</a></li>
            
                <li><a href="../classes/components.fields.components.display.Text.html">components.fields.components.display.Text</a></li>
            
                <li><a href="../classes/components.fields.Datepicker.html">components.fields.Datepicker</a></li>
            
                <li><a href="../classes/components.fields.Display.html">components.fields.Display</a></li>
            
                <li><a href="../classes/components.fields.Email.html">components.fields.Email</a></li>
            
                <li><a href="../classes/components.fields.File.html">components.fields.File</a></li>
            
                <li><a href="../classes/components.fields.Hidden.html">components.fields.Hidden</a></li>
            
                <li><a href="../classes/components.fields.HtmlEditor.html">components.fields.HtmlEditor</a></li>
            
                <li><a href="../classes/components.fields.Password.html">components.fields.Password</a></li>
            
                <li><a href="../classes/components.fields.plugins.InplaceEdit.html">components.fields.plugins.InplaceEdit</a></li>
            
                <li><a href="../classes/components.fields.Radio.html">components.fields.Radio</a></li>
            
                <li><a href="../classes/components.fields.Suggest.html">components.fields.Suggest</a></li>
            
                <li><a href="../classes/components.fields.TextArea.html">components.fields.TextArea</a></li>
            
                <li><a href="../classes/components.menu.components.common.mixins.Badges.html">components.menu.components.common.mixins.Badges</a></li>
            
                <li><a href="../classes/components.menu.components.fields.SelectBox.html">components.menu.components.fields.SelectBox</a></li>
            
                <li><a href="../classes/components.menu.Item.html">components.menu.Item</a></li>
            
                <li><a href="../classes/components.nav.Breadcrumbs.html">components.nav.Breadcrumbs</a></li>
            
                <li><a href="../classes/components.nav.components.common.mixins.Label.html">components.nav.components.common.mixins.Label</a></li>
            
                <li><a href="../classes/components.nav.components.display.List.html">components.nav.components.display.List</a></li>
            
                <li><a href="../classes/components.nav.components.menu.ContextMenu.html">components.nav.components.menu.ContextMenu</a></li>
            
                <li><a href="../classes/components.nav.List.html">components.nav.List</a></li>
            
                <li><a href="../classes/components.nav.Navbar.html">components.nav.Navbar</a></li>
            
                <li><a href="../classes/components.table.plugins.EditableTable.html">components.table.plugins.EditableTable</a></li>
            
                <li><a href="../classes/components.table.Table.html">components.table.Table</a></li>
            
                <li><a href="../classes/components.table.TreeTable.html">components.table.TreeTable</a></li>
            
                <li><a href="../classes/helper.html">helper</a></li>
            
                <li><a href="../classes/KeyEvents.html">KeyEvents</a></li>
            
                <li><a href="../classes/plugins.components.containers.Accordion.html">plugins.components.containers.Accordion</a></li>
            
                <li><a href="../classes/plugins.components.containers.Box.html">plugins.components.containers.Box</a></li>
            
                <li><a href="../classes/plugins.components.nav.Pagination.html">plugins.components.nav.Pagination</a></li>
            
                <li><a href="../classes/renderer.html">renderer</a></li>
            
                <li><a href="../classes/ui.html">ui</a></li>
            
                <li><a href="../classes/utils.html">utils</a></li>
            
                <li><a href="../classes/view.Base.html">view.Base</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Firebrick.engine.html">Firebrick.engine</a></li>
            
                <li><a href="../modules/Firebrick.ui.html">Firebrick.ui</a></li>
            
                <li><a href="../modules/Firebrick.ui.components.html">Firebrick.ui.components</a></li>
            
                <li><a href="../modules/plugins.html">plugins</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src\firebrick.ui.all.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*!
* Firebrick UI
* @author Steven Masala [me@smasala.com]
* @version 0.20.12
* 
* FirebrickUI, component library for Firebrick JS
**/
define(&#x27;firebrick-ui-all&#x27;,[&quot;jquery&quot;, &quot;firebrick&quot;, &quot;knockout&quot;,  &quot;devicejs&quot;, &quot;knockout-mapping&quot;, &quot;text&quot;, &quot;bootstrap&quot;], function($, Firebrick, ko, dev, kom){	
	&quot;use strict&quot;;

	//ko mapping
	ko.mapping = kom;
	
	if(!Firebrick){
		console.error(&quot;Firebrick has not been loaded, Firebrick-UI requires Firebrick JS to function&quot;);
		return;
	}else if(Firebrick.ui){
		console.error(&quot;Firebrick.ui namespace has already been taken!&quot;);
		return;
	}
	
	/**
	 * Firebrick component library for Firebrick JS MVC
	 * @module Firebrick.ui
	 * @class ui
	 */
	Firebrick.ui = {
			/**
			 * library version number
			 * @property version
			 * @private
			 * @type {String}
			 */
			version: &quot;0.20.12&quot;,
			
			/**
			 * populate a target with fields and data
			 * 
			 * @method build
			 * @param {Object} config
			 * @param {Object} config.target selector string, jquery object (optional) if none passed, html is returned
			 * @param {Object} config.items array of strings or objects [&quot;fb-ui-input&quot;, {sName:&quot;fb-ui-textarea&quot;}]
			 * @param {Object} config.view Firebrick view class (optional), must be defined for rendered event to be fired
			 * @return {String} html
			 */
			build: function(config){
				var me = this,
					target = Firebrick.views.getTarget(config.target),
					r, html;
				
				r = me._populate(config.items, config.view);
				html = r.html;
				
				if(config.view &amp;&amp; r.items.length){
					config.view.items = r.items;
				}
				
				if(target){
					target.append(html);
				}
				
				return html;
			},
			
			/**
			 * recursive function
			 * create components and html from an array of items
			 * @private
			 * @method _populate
			 * @return {Object} :: {html: string, items: array of objects}
			 */
			_populate: function(items, parent){
				var me = this,
					_items = [],
					html = &quot;&quot;,
					component;

				if($.isFunction(items)){
					items = items();
				}

				if(!$.isArray(items) &amp;&amp; items){
					items = [items];
				}
				
				if($.isArray(items) &amp;&amp; items.length){
					if(parent.defaults){
						//get all defaults down the prototype tree
						Firebrick.utils.merge(&quot;defaults&quot;, parent);
						//add the defaults to direct items
						//TODO: if items is a function?
						for(var i = 0, l = items.length; i&lt;l; i++){
							items[i] = Firebrick.utils.copyover(items[i], parent.defaults);
						}
					}
					
					for(var i = 0, l = items.length; i&lt;l; i++){
						component = me._buildComponent(items[i], parent);
						html += component._html;
						//cache component pointer so it can be found by id
						if(!component.getId){
							console.error(&quot;something went wrong&quot;, items[i], &quot;is it defined correctly? Check the item name and dependency include&quot;);
						}
						component.fireEvent(&quot;uiBuilt&quot;);
						_items.push(component);
					}
				}
				
				return {html: html, items: _items};
			},
			
			/**
			 * method used by _populate
			 * @private
			 * @method _buildComponent
			 * @param v {Object|String} component or name of component
			 * @param parent {Object} component parent object
			 * @return {Object} component
			 */
			_buildComponent: function(v, parent){
				var me = this,
					component, 
					tmp;
				
				if(v.isView){
					if(v._state !== &quot;initial&quot;){
						component = v.init();
					}
					component = v;
				}else if(v.viewName){
					//Creates a view from a JS file
					//Firebrick.create(&quot;MyApp.view.MyView&quot;, {})
					component = Firebrick.create(v.viewName, v);
				}else{
					
					v = me._componentFilter(v);
					
					if(!v.uiComponent){
						if(v.sName){
							v.sName = v.sName.toLowerCase();
						}
						//v can be string or object
						tmp = Firebrick.get(v.sName || v);
						if(!tmp){
							console.error(&quot;Has&quot;, (v.sName || v), &quot;been added as a dependency?&quot;);
						}
						//Object.getPrototypeOf(object.create) to make a new copy of the properties and not a pointer to v
						component = Firebrick.create(tmp._classname, (v.sName ? Object.getPrototypeOf(Object.create(v)) : null));
					}else{
						//v is already a field class
						component = v;
					}
				}
				
				if(!component._parent){
					//if not set yet
					component._parent = parent;
				}
				
				if(component.build){
					component._html = component.build();	
				}
				
				
				return component;
			},
			
			/**
			 * this method converts shorthand component definitions
			 * @example
			 * 		//component definition    &quot;|&quot;
			 * 		//converts to the component &lt;hr&gt; 
			 * @method _componentFilter
			 * @private
			 * @param v {String}
			 * @return {String}
			 */
			_componentFilter: function(name){
				//var me = this;
				
				if(typeof name === &quot;string&quot;){
					switch(name){
						case &quot;|&quot;:
							name = &quot;display.divider&quot;;
							break;
					}
				}
				
				return name;
			},
			
			/**
			 * @method getCmp
			 * @param id {String}
			 * @return {Object|null}
			 */
			getCmp: function(id){
				return Firebrick.getById(id);
			},
			
			/**
			 * alias for Firebrick.get
			 * 
			 * @method get
			 * @param {String} name
			 * @return {Object}
			 */
			get: function(name){
				return Firebrick.get(name);
			},
			
			/**
			 * util methods
			 * @for ui
			 * @class utils
			 */
			utils:{
				
				/**
				 * @private
				 * @method _buildDotObj
				 * @example 
				 * 		//example: a.b.c.d
				 *		//convert to:
				 *			a:{ 
				 *				b:{ 
				 *					c:{ 
				 *						d:sName 
				 *					} 
				 *				} 
				 *			}
				 * @param arr {Array of Strings}
				 * @param sName {String} the original sName
				 * @param prev {Object} optional, used by recursion
				 * @return {Object}
				 */
				_buildDotObj: function(arr, sName, prev){
					var me = this,
						prop = arr.shift(); //remove the first item use it as property name
					
					//check if prev has already been initialised
					prev = prev || {};
						
					prev[ prop ] = {};
					
					//more items in arr?
					if(arr.length){
						if(arr[0] !== &quot;&quot;){
							//call self recursively
							me._buildDotObj(arr, sName, prev[ prop ]);
						}else{
							console.error(&quot;error building sName, found empty string&quot;, arr, prop, sName);
						}
						
					}else{
						prev[ prop ] = sName;
					}
					
					return prev;
				},
				
				/**
				 * @method isVisible
				 * @param $element {jQuery Object}
				 * @param $container {jQuery Object}
				 * @return {Boolean} 
				 */
				isVisible: function($element, $container){
					var cont = {
							offset: $container.offset(),
							height: $container.height(),
							width: $container.width()
						},
						el = {
							offset: $element.offset(),
							height: $element.height(),
							width: $element.width()
						},
						check = function(coord){
							if(coord &gt; cont.offset.top &amp;&amp; coord &lt; cont.offset.left){
								if(coord &lt; cont.bottom){
									return true;
								}
							}
							return false;
						};
					
					cont.bottom = cont.offset.top + cont.height;
					el.bottom = el.offset.top + el.height;
					
					if( check(el.offset.top) || 
						check(el.offset.top + el.width) ||  
						check(el.bottom) ||
						check(el.bottom + el.width) ){
						return true; 
					}
					
					
					return false;
				},
				
				/**
				 * if you are unsure of the parameters type - use this function to get the raw value. I.e. if its a function it will be called and returned, otherwise it will just return it.
				 * useful when working with Knockout objects
				 * @method getValue
				 * @param {Function|Any} val
				 * @return {Any}
				 */
				getValue: function(val){
					if($.isFunction(val)){
						return val();
					}
					return val;
				},
				
				/**
				 * convert a JS Object into a simple &quot;json&quot; type string, this is mainly used for the data-bind attribute in Knockout
				 * 
				 * @method stringify
				 * @param {Object} objToConvert
				 * @return {String}
				 */
				stringify:function(objToConvert){
					if(objToConvert){
						
						var loop = function(obj, f){
							var p = f ? &quot;&quot; : &quot;{&quot;,
								k,v;
							for(k in obj){
								if(obj.hasOwnProperty(k)){
									v = obj[k];
									if($.isPlainObject(v)){
										p += k + &quot;:&quot; + loop(v);
									}else{
										p += k + &quot;: &quot; + v + &quot;,&quot;;
									}
								}
							}
							//remove last &quot;, &quot;
							p = p.substr(-1) === &quot;,&quot; ? p.substring(0, p.length-1) : p;
							p += f ? &quot;&quot; : &quot;},&quot;;
							return p;
						};
						
						return loop(objToConvert, true);
					}
					return &quot;&quot;;
				}
				
			},
			/**
			 * cross platform as chrome doesn&#x27;t support them natively
			 * @for ui
			 * @class KeyEvents
			 */
			KeyEvents: {
		            DOM_VK_CANCEL: 3,
		            DOM_VK_HELP: 6,
		            DOM_VK_BACK_SPACE: 8,
		            DOM_VK_TAB: 9,
		            DOM_VK_CLEAR: 12,
		            DOM_VK_RETURN: 13,
		            DOM_VK_ENTER: 14,
		            DOM_VK_SHIFT: 16,
		            DOM_VK_CONTROL: 17,
		            DOM_VK_ALT: 18,
		            DOM_VK_PAUSE: 19,
		            DOM_VK_CAPS_LOCK: 20,
		            DOM_VK_ESCAPE: 27,
		            DOM_VK_SPACE: 32,
		            DOM_VK_PAGE_UP: 33,
		            DOM_VK_PAGE_DOWN: 34,
		            DOM_VK_END: 35,
		            DOM_VK_HOME: 36,
		            DOM_VK_LEFT: 37,
		            DOM_VK_UP: 38,
		            DOM_VK_RIGHT: 39,
		            DOM_VK_DOWN: 40,
		            DOM_VK_PRINTSCREEN: 44,
		            DOM_VK_INSERT: 45,
		            DOM_VK_DELETE: 46,
		            DOM_VK_0: 48,
		            DOM_VK_1: 49,
		            DOM_VK_2: 50,
		            DOM_VK_3: 51,
		            DOM_VK_4: 52,
		            DOM_VK_5: 53,
		            DOM_VK_6: 54,
		            DOM_VK_7: 55,
		            DOM_VK_8: 56,
		            DOM_VK_9: 57,
		            DOM_VK_SEMICOLON: 59,
		            DOM_VK_EQUALS: 61,
		            DOM_VK_A: 65,
		            DOM_VK_B: 66,
		            DOM_VK_C: 67,
		            DOM_VK_D: 68,
		            DOM_VK_E: 69,
		            DOM_VK_F: 70,
		            DOM_VK_G: 71,
		            DOM_VK_H: 72,
		            DOM_VK_I: 73,
		            DOM_VK_J: 74,
		            DOM_VK_K: 75,
		            DOM_VK_L: 76,
		            DOM_VK_M: 77,
		            DOM_VK_N: 78,
		            DOM_VK_O: 79,
		            DOM_VK_P: 80,
		            DOM_VK_Q: 81,
		            DOM_VK_R: 82,
		            DOM_VK_S: 83,
		            DOM_VK_T: 84,
		            DOM_VK_U: 85,
		            DOM_VK_V: 86,
		            DOM_VK_W: 87,
		            DOM_VK_X: 88,
		            DOM_VK_Y: 89,
		            DOM_VK_Z: 90,
		            DOM_VK_CONTEXT_MENU: 93,
		            DOM_VK_NUMPAD0: 96,
		            DOM_VK_NUMPAD1: 97,
		            DOM_VK_NUMPAD2: 98,
		            DOM_VK_NUMPAD3: 99,
		            DOM_VK_NUMPAD4: 100,
		            DOM_VK_NUMPAD5: 101,
		            DOM_VK_NUMPAD6: 102,
		            DOM_VK_NUMPAD7: 103,
		            DOM_VK_NUMPAD8: 104,
		            DOM_VK_NUMPAD9: 105,
		            DOM_VK_MULTIPLY: 106,
		            DOM_VK_ADD: 107,
		            DOM_VK_SEPARATOR: 108,
		            DOM_VK_SUBTRACT: 109,
		            DOM_VK_DECIMAL: 110,
		            DOM_VK_DIVIDE: 111,
		            DOM_VK_F1: 112,
		            DOM_VK_F2: 113,
		            DOM_VK_F3: 114,
		            DOM_VK_F4: 115,
		            DOM_VK_F5: 116,
		            DOM_VK_F6: 117,
		            DOM_VK_F7: 118,
		            DOM_VK_F8: 119,
		            DOM_VK_F9: 120,
		            DOM_VK_F10: 121,
		            DOM_VK_F11: 122,
		            DOM_VK_F12: 123,
		            DOM_VK_F13: 124,
		            DOM_VK_F14: 125,
		            DOM_VK_F15: 126,
		            DOM_VK_F16: 127,
		            DOM_VK_F17: 128,
		            DOM_VK_F18: 129,
		            DOM_VK_F19: 130,
		            DOM_VK_F20: 131,
		            DOM_VK_F21: 132,
		            DOM_VK_F22: 133,
		            DOM_VK_F23: 134,
		            DOM_VK_F24: 135,
		            DOM_VK_NUM_LOCK: 144,
		            DOM_VK_SCROLL_LOCK: 145,
		            DOM_VK_COMMA: 188,
		            DOM_VK_PERIOD: 190,
		            DOM_VK_SLASH: 191,
		            DOM_VK_BACK_QUOTE: 192,
		            DOM_VK_OPEN_BRACKET: 219,
		            DOM_VK_BACK_SLASH: 220,
		            DOM_VK_CLOSE_BRACKET: 221,
		            DOM_VK_QUOTE: 222,
		            DOM_VK_META: 224
			},
			/**
			 * similar to utils, but are component related
			 * @for ui
			 * @class helper
			 */
			helper: {
				
				/**
				 * @method getHTML
				 * @param componentId {String}
				 * @param $data {KO Object}
				 * @param $$context {KO Object}
				 * @return {String} html
				 */
				getHtml: function( componentId, $data, $context ){
					var component = Firebrick.getById(componentId),
						html = component.html;
					
					if( $.isFunction(html) ){
						html = html( $data, $context );
					}
					
					if(typeof html === &quot;string&quot;){
						if( $data.hasOwnProperty( html ) ){
							return $data[html];
						}
					}
					return html;
				},
				
				/**
				 * builds the items string used for functions such as &quot;foreach&quot;
				 * @method tabBuilder
				 * @param componentId {Objects} 
				 * @return {String} 
				 */
				tabBuilder: function(componentId){
					var component = Firebrick.getById(componentId),
						data = component.items;
					
					if($.isFunction(data)){
						return &quot;Firebrick.getById(&#x27;&quot; + componentId + &quot;&#x27;).items()&quot;;
					}else if($.isArray(data)){
						return &quot;Firebrick.getById(&#x27;&quot; + componentId + &quot;&#x27;).items&quot;;
					}
					
					return data;
				},
				
				/**
				 * builds the options string used for functions such as &quot;foreach&quot;
				 * @method optionString
				 * @param component {Objects} 
				 * @return {String} 
				 */
				optionString: function(component){
					var data = component.options;
					
					if($.isFunction(data)){
						return &quot;Firebrick.ui.getCmp(&#x27;&quot; + component.getId() + &quot;&#x27;).options()&quot;;
					}else if($.isArray(data)){
						return &quot;Firebrick.ui.getCmp(&#x27;&quot; + component.getId() + &quot;&#x27;).options&quot;;
					}
					
					return data;
				},
				
				/**
				 * builds links, if value then return the value overwise return false and remove the href attribute
				 * @method linkBuilder
				 * @param {Object} value - optional
				 * @param {Object} value.link
				 * @return {String | false}
				 */
				linkBuilder: function(value){

					if(value){
						if( typeof value.link === &quot;string&quot; ){
							return value.link;
						}else if( typeof value.href === &quot;string&quot;){
							return value.href;
						}
					}
					
					return false;
				},
				
				
				callFunction: function(classId, functionName, args){
					var clazz = Firebrick.getById(classId);
					if(clazz &amp;&amp; functionName){
						clazz[functionName].apply(clazz, args);
					}
				}
				
			},

			/**
			 * renderer methods
			 * @for ui
			 * @class renderer
			 */
			renderer: {
				/**
				 * @property _registry
				 * @type {Object}
				 * @private
				 */
				_registry:{},
				
				/**
				 * @method add
				 * @param name {String} name of the renderer
				 * @param func {Function} function to call when the renderer is used - parameters given to the function when called: $data, $context, $parent, $root
				 * @return self
				 */
				add: function(name, func){
					var me = this;
					
					me._registry[name] = func;
					
					return me;
				},
				
				/**
				 * @method get
				 * @param name {String} name of the renderer
				 * @return {Function || null}
				 */
				get: function(name){
					var me = this;
					if($.isFunction(name)){
						//catch KO function variation
						name = name();
					}
					return me._registry[name];
				}
			},
			
			/**
			 * @property _sNames
			 * @private
			 * @type {Object}
			 */
			_sNames: {
					&quot;button.dropdown.list&quot;:{
						path:&quot;Firebrick.ui/button/dropdown/List&quot;
					},
					&quot;button.button&quot;:{
						path:&quot;Firebrick.ui/button/Button&quot;
					},
					&quot;button.buttongroup&quot;:{
						path:&quot;Firebrick.ui/button/ButtonGroup&quot;
					},
					&quot;button.icon&quot;:{
						path:&quot;Firebrick.ui/button/Icon&quot;
					},
					&quot;button.togglebutton&quot;:{
						path:&quot;Firebrick.ui/button/ToggleButton&quot;
					},
					&quot;containers.border.pane&quot;:{
						path:&quot;Firebrick.ui/containers/border/Pane&quot;
					},
					&quot;containers.tab.pane&quot;:{
						path:&quot;Firebrick.ui/containers/tab/Pane&quot;
					},
					&quot;containers.accordion&quot;:{
						path:&quot;Firebrick.ui/containers/Accordion&quot;
					},
					&quot;containers.borderlayout&quot;:{
						path:&quot;Firebrick.ui/containers/BorderLayout&quot;
					},
					&quot;containers.box&quot;:{
						path:&quot;Firebrick.ui/containers/Box&quot;
					},
					&quot;containers.form&quot;:{
						path:&quot;Firebrick.ui/containers/Form&quot;
					},
					&quot;containers.formpanel&quot;:{
						path:&quot;Firebrick.ui/containers/FormPanel&quot;
					},
					&quot;containers.gridcolumn&quot;:{
						path:&quot;Firebrick.ui/containers/GridColumn&quot;
					},
					&quot;containers.gridrow&quot;:{
						path:&quot;Firebrick.ui/containers/GridRow&quot;
					},
					&quot;containers.modal&quot;:{
						path:&quot;Firebrick.ui/containers/Modal&quot;
					},
					&quot;containers.fieldset&quot;: {
						path:&quot;Firebrick.ui/containers/Fieldset&quot;
					},
					&quot;containers.panel&quot;:{
						path:&quot;Firebrick.ui/containers/Panel&quot;
					},
					&quot;containers.tabpanel&quot;:{
						path:&quot;Firebrick.ui/containers/TabPanel&quot;
					},
					&quot;display.alert&quot;:{
						path:&quot;Firebrick.ui/display/Alert&quot;
					},
					&quot;display.divider&quot;:{
						path:&quot;Firebrick.ui/display/Divider&quot;
					},
					&quot;display.header&quot;:{
						path:&quot;Firebrick.ui/display/Header&quot;
					},
					&quot;display.image&quot;:{
						path:&quot;Firebrick.ui/display/Image&quot;
					},
					&quot;display.list&quot;:{
						path:&quot;Firebrick.ui/display/List&quot;
					},
					&quot;display.progress&quot;:{
						path:&quot;Firebrick.ui/display/Progress&quot;
					},
					&quot;display.span&quot;:{
						path:&quot;Firebrick.ui/display/Span&quot;
					},
					&quot;display.text&quot;:{
						path:&quot;Firebrick.ui/display/Text&quot;
					},
					&quot;display.loader&quot;: {
						path:&quot;Firebrick.ui/display/Loader&quot;
					},
					&quot;fields.checkbox&quot;:{
						path:&quot;Firebrick.ui/fields/Checkbox&quot;
					},
					&quot;fields.datepicker&quot;:{
						path:&quot;Firebrick.ui/fields/DatePicker&quot;
					},
					&quot;fields.display&quot;:{
						path:&quot;Firebrick.ui/fields/Display&quot;
					},
					&quot;fields.combobox&quot;:{
						path:&quot;Firebrick.ui/fields/ComboBox&quot;
					},
					&quot;fields.email&quot;:{
						path:&quot;Firebrick.ui/fields/Email&quot;
					},
					&quot;fields.file&quot;:{
						path:&quot;Firebrick.ui/fields/File&quot;
					},
					&quot;fields.input&quot;:{
						path:&quot;Firebrick.ui/fields/Input&quot;
					},
					&quot;fields.password&quot;:{
						path:&quot;Firebrick.ui/fields/Password&quot;
					},
					&quot;fields.radio&quot;:{
						path:&quot;Firebrick.ui/fields/Radio&quot;
					},
					&quot;fields.selectbox&quot;:{
						path:&quot;Firebrick.ui/fields/SelectBox&quot;
					},
					&quot;fields.textarea&quot;:{
						path:&quot;Firebrick.ui/fields/TextArea&quot;
					},
					&quot;nav.breadcrumbs&quot;:{
						path:&quot;Firebrick.ui/nav/Breadcrumbs&quot;	
					},
					&quot;nav.list&quot;:{
						path:&quot;Firebrick.ui/nav/List&quot;
					},
					&quot;nav.navbar&quot;:{
						path:&quot;Firebrick.ui/nav/Navbar&quot;
					},
					&quot;nav.pagination&quot;:{
						path:&quot;Firebrick.ui/nav/Pagination&quot;
					},
					&quot;nav.toolbar&quot;:{
						path:&quot;Firebrick.ui/nav/Toolbar&quot;	
					},
					&quot;table.table&quot;:{
						path:&quot;Firebrick.ui/table/Table&quot;
					},
					&quot;table.treetable&quot;:{
						path:&quot;Firebrick.ui/table/TreeTable&quot;
					}
			}
			
	};
	
	Firebrick.classes.addSNames(Firebrick.ui._sNames);
	
	
	/**
	 * Overwrites &quot;Firebrick.view.Base&quot; 
	 * @extends class.Base
	 * @class view.Base
	 */
	Firebrick.classes.overwrite(&quot;Firebrick.view.Base&quot;, {
		_ko:null,
		/**
		 * @property passDownEvents
		 * @type {Object}
		 * @default {
				rendered: 1,
				htmlRendered: 1,
				unbound: 1
			}
		 */
		passDownEvents:{
			rendered: 1,
			htmlRendered: 1,
			unbound: 1,
			destroy: 1
		},
		
		listeners: {
			uiBuilt: function(){
				var me = this,
					k;
				if(me.passDownEvents){
					
					Firebrick.utils.merge(&quot;passDownEvents&quot;, me);
					
					for(k in me.passDownEvents){
						if(me.passDownEvents.hasOwnProperty(k)){
							if(me._parent){
								me._initPassDownEvent(k);
							}
						}
					}
					
				}
			}
		},
		/**
		 * @method _initPassDownEvent
		 */
		_initPassDownEvent: function(eventName){
			var me = this,
				f = me._createPassEvent(me);
			
			me._parent.on(eventName, f);
			me.on(&quot;destroy&quot;, function(){
				f.__isDestroyed = true;
				//TODO: fixed this
				//me._parent.off(eventName, f);
			});
		},
		/**
		 * @method _createPassEvent
		 * @private
		 * @return {Function}
		 */
		_createPassEvent: function(scope){
			return function(){
				var me = this,
					args = Array.prototype.slice.call(arguments);
				args = [me.event.eventName].concat(args);
				scope.fireEvent.apply(scope, args);	
			};
		},
		
		/**
	 	 * @property items
		 * @type {Array|Function}
		 * @default null
		 */
		items: null,
		/**
		 * @property tpl
		 * @type {Function}
		 * @return {String}
		 */
		tpl: function(){
			var me = this;
			if(me.items){
				return Firebrick.ui.build({
					items: me.items,
					view: me
				});
			}
		}
	});
	
	
	/*
	 * Knockout bindingHandler extensions
	 */
	(function(ko){
		/*
		 * use withProperties to pass extra properties down to the descendants
		 * http://knockoutjs.com/documentation/custom-bindings-controlling-descendant-bindings.html
		 */
		ko.bindingHandlers.withProperties = {
		    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
		        // Make a modified binding context, with a extra properties, and apply it to descendant elements
		        var childBindingContext = bindingContext.createChildContext(
		            bindingContext.$rawData,
		            null, // Optionally, pass a string here as an alias for the data item in descendant contexts
		            function(context) {
		                ko.utils.extend(context, valueAccessor());
		            });
		        ko.applyBindingsToDescendants(childBindingContext, element);
		 
		        // Also tell KO *not* to bind the descendants itself, otherwise they will be bound twice
		        return { controlsDescendantBindings: true };
		    }
		};
		
		//activate binding on any element injected with &quot;html&quot; property
		//modified from http://stackoverflow.com/a/29605553/425226
		ko.bindingHandlers.htmlWithBinding = {
			  &#x27;init&#x27;: function() {
				  return { &#x27;controlsDescendantBindings&#x27;: true };
			  },
			  &#x27;update&#x27;: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
				  element.innerHTML = valueAccessor();
				  ko.applyBindingsToDescendants(bindingContext, element);
			  }
		};
		
		/*
		 * use debug to simply console out any given arguments
		 * http://www.knockmeout.net/2013/06/knockout-debugging-strategies-plugin.html
		 */
		ko.virtualElements.allowedBindings.debug = true;
		ko.bindingHandlers.debug = {
		    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
		       console.warn(&quot;Debug:&quot;, element, valueAccessor(), allBindings(), viewModel, bindingContext);
		    }
		};
		
	})(ko);
	
	return Firebrick;	
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * Super class for all components.
 * 
 * Extends from &lt;a href=&quot;http://smasala.github.io/firebrick/docs/classes/view.Base.html&quot;&gt;Firebrick.view.Base&lt;/a&gt;
 * @module Firebrick.ui.components
 * @extends class.Base
 * @namespace components.common
 * @class Base
 */
define(&#x27;Firebrick.ui/common/Base&#x27;,[&quot;doT&quot;, &quot;firebrick&quot;, &quot;jquery&quot;, &quot;bootstrap.plugins/tooltip&quot;, &quot;bootstrap.plugins/popover&quot;], function(tplEngine, fb, $){

	&quot;use strict&quot;;
	
	return Firebrick.define(&quot;Firebrick.ui.common.Base&quot;, {
		extend:&quot;Firebrick.view.Base&quot;,
		/**
		 * Override class id
		 * @property _idPrefix
		 * @private
		 * @type {String}
		 */
		_idPrefix: &quot;fb-ui-&quot;,
		/**
		 * used when filtering component classes when searching
		 * @property uiComponent
		 * @type {Boolean}
		 * @default true
		 */
		uiComponent: true,
		/**
		 * if handler property is set, it is automatically attached to this event
		 * @property handlerEvent
		 * @type {String}
		 * @default &quot;click&quot;
		 */
		handlerEvent: &quot;click&quot;,
		/**
		 * @property handler
		 * @type {Function}
		 * @default null
		 */
		handler: null,
		/**
		 * set to true to set the focus on the element after render
		 * @property autoFocus
		 * @type {Boolean}
		 * @default false
		 */
		autoFocus: false,
		/**
		 * @property glyphiconClass
		 * @type {String}
		 * @default &quot;glyphicon&quot;
		 */
		glyphiconClass: &quot;glyphicon&quot;,
		/**
		 * cache
		 * @property _build
		 * @private
		 * @type {Object} map of all builds
		 * @default null
		 */
		_build: null,
		/**
		 * compiled template map
		 * @property _template
		 * @private
		 * @type {Object} map of all templates
		 * @default null
		 */
		_template: null,
		/**
		 * template
		 * @property tpl
		 * @type {String} html
		 * @default null
		 */
		tpl: null,
		/**
		 * sub template
		 * @property subTpl
		 * @type {String} html
		 * @default null
		 */
		subTpl: null,
		/**
		 * all css classes (space separated) are added to the standard bindings function
		 * @property css
		 * @type {String}
		 * @default null
		 */
		css: null,
		/**
		 * add inline css styles
		 * http://knockoutjs.com/documentation/style-binding.html
		 * @property style
		 * @type {Object}
		 * @default null
		 */
		style:null,
		/**
		 * variable shortcuts are created using the sName. by default the string after the last &quot;-&quot; is used
		 * @example
		 * 		sName:&quot;fb-ui-input&quot;
		 * 		//becomes accessible via: {Firebrick|fb}.ui.cmp.input
		 * 		//defining another component e.g &quot;myapp-field-input&quot; would overwrite the default input as &quot;input&quot; is found after the last &quot;-&quot;
		 * @property sName
		 * @type {String}
		 * @default null
		 */
		sName:null,
		/**
		 * @property _element
		 * @type {Null|jQuery Object}
		 * @default null
		 */
		_element: null,
		/**
		 * @property tooltip
		 * @type {Boolean|String} set to false to deactivate, string to set the text
		 * @default false
		 */
		tooltip:false,
		/**
		 * where the tooltip should appear: &quot;top&quot;, &quot;left&quot;, &quot;right&quot;, &quot;bottom&quot;
		 * @property tooltipLocation
		 * @type {String}
		 * @default &quot;top&quot;
		 */
		tooltipLocation:&quot;top&quot;,
		/**
		 * options defined by bootstrap
		 * @property tooltipOptions
		 * @type {Object}
		 * @default null
		 */
		tooltipOptions: null,
		/**
		 * @property popover
		 * @type {Boolean|String} set to false to deactivate, string to set the text
		 * @default false
		 */
		popover:false,
		/**
		 * @property popoverTitle
		 * @type {Boolean|String} optional - set to false to deactivate, string to set the title
		 * @default false
		 */
		popoverTitle:false,
		/**
		 * where the popover should appear: &quot;top&quot;, &quot;left&quot;, &quot;right&quot;, &quot;bottom&quot;
		 * @property popoverLocation
		 * @type {String}
		 * @default &quot;top&quot;
		 */
		popoverLocation:&quot;top&quot;,
		/**
		 * options defined by bootstrap
		 * @property popoverOptions
		 * @type {Object}
		 * @default null
		 */
		popoverOptions: null,
		/**
		 * @property popoverDismissible
		 * @type {Boolean}
		 * @default true
		 */
		popoverDismissible: true,
		/**
		 * @property align
		 * @type {String|null} right, left
		 * @default null
		 */
		align:null,
		/**
		 * @property contextMenu
		 * @type {Array of Objects}
		 * @default null
		 */
		contextMenu: null,
		/**
		 * @property beforeSubTpl
		 * @type {String | HTML}
		 * @default null
		 */
		beforeSubTpl: null,
		/**
		 * @property afterSubTpl
		 * @type {String | HTML}
		 * @default null
		 */
		afterSubTpl: null,
		/**
		 * pass a binding Object and this method will add the tooltip/popover relevant properties
		 * @method addTooltipPopoverBind
		 * @param bindObj {Object}
		 * @return {Object} new Object
		 */
		addTooltipPopoverBind: function(bindObj){
			var me = this;
			if(me.tooltip || me.popover){
				if(bindObj &amp;&amp; $.isPlainObject(bindObj)){
					if(!bindObj.attr){
						bindObj.attr = {};
					}
					bindObj.attr[&quot;&#x27;data-toggle&#x27;&quot;] = me.parseBind( me.tooltip ? &quot;tooltip&quot; : &quot;popover&quot; );
					if(me.tooltip || me.popoverTitle){
						bindObj.attr.title = me.textBind(me.tooltip || me.popoverTitle);
					}
					if(me.popover){
						bindObj.attr[&quot;&#x27;data-content&#x27;&quot;] = me.textBind(me.popover);
						bindObj.attr[&quot;&#x27;data-container&#x27;&quot;] = &quot;&#x27;body&#x27;&quot;;
						if(me.popoverDismissible){
							bindObj.attr[&quot;&#x27;data-trigger&#x27;&quot;] = &quot;&#x27;focus&#x27;&quot;;
						}
					}
					bindObj.attr[&quot;&#x27;data-placement&#x27;&quot;] = me.parseBind(me.tooltipLocation || me.popoverLocation);
				}
			}
			return bindObj;
		},
		/**
		 * @method _getElementSelector
		 * @private
		 * @return {String} jquery element selector string
		 */
		_getElementSelector: function(){
			var me = this,
				id = me.enclosedBind ? me.getEnclosedBindId() : me.getId();
			return &quot;#&quot; + id;
		},
		/**
		 * @method getElement
		 * @return {Object} jquery element object
		 */
		getElement: function(){
			var me = this;
			if(!me._element){
				me._element = $( me._getElementSelector() );
				if(!me._element.length){
					//set to null if jquery object returned empty []
					me._element = null;
				}
			}
			return me._element;
		},
		/**
		 * called when defining the class
		 * @method constructor
		 * @return {Any} this.callParent(arguments)
		 */
		constructor: function(){
			var me = this;
			
			me._precompile();
			
			return me.callParent(arguments);
		},
		/**
		 * compile and cache template
		 * 
		 * @method _precompile
		 * @private
		 * @return {Object} self
		 */
		_precompile: function(){
			var me = this,
				it,
				tpls = [&quot;tpl&quot;, &quot;beforeSubTpl&quot;, &quot;subTpl&quot;, &quot;afterSubTpl&quot;];
			
			//init objects so each class is unqiue
			me._template = {};
			me._build = {};
			
			//precompile the template as soon as possible - performance
			//http://jsperf.com/dot-vs-handlebars/2
			for(var i = 0, l = tpls.length; i&lt;l; i++){
				it = tpls[i];
				if( me[it] ){
					me.template( it );
				}
			}
			return me;
		},
		/**
		 * use this as a wrapper in a template if the property you wish to call COULD be either a primitive or a function
		 * @method b
		 * @param value {String|Function}
		 * @return {String}
		 */
		b: function(value){
			return $.isFunction(value) ? value.bind(this)() : value;
		},
		/**
		 * when overriding this or any other method, this.callParent(arguments) calls the method in the super class
		 * @method init
		 */
		init: function(){
			var me = this;
			
			if(me.autoRender &amp;&amp; me.getTarget()){
				me.tpl = me.build();
			}
			
			me._registerHandler();
					
			
			me.on(&quot;rendered&quot;, function(){
				var $el = me.getElement();
				
				me._prepTooltipPopover();
				
				if(me.contextMenu &amp;&amp; !me.contextMenu._classname){
					require([&quot;Firebrick.ui/menu/ContextMenu&quot;], function(){
						$el.on(&quot;contextmenu&quot;, function(event){
							var conf = {
								_parent: me,
								contextMenuEvent: event
							};
							event.preventDefault();

							me._contextMenu = Firebrick.create(&quot;Firebrick.ui.menu.ContextMenu&quot;, Firebrick.utils.overwrite(conf, me.contextMenu));
						});
					});
				}
				
				if(me.autoFocus){
					me.focus();
				}
			});
				
			return me.callParent(arguments);
		},
		/**
		 * @method _prepTooltipPopover
		 * @return self
		 */
		_prepTooltipPopover: function(){
			var me = this,
				$el,
				offset;
			
			if(me.tooltip || me.popover){
				$el = me.getElement();
				offset = $el.offset();
				
				if(me.tooltip){
					$el.tooltip( me.tooltipOptions );
				}
				
				if(me.popover){
					$el.popover( me.popoverOptions );
				}
			}
			
			return me;
		},
		/**
		 * set focus on element
		 * @method focus
		 */
		focus: function(){
			this.getElement().focus();
		},
		/**
		 * register handlers for element,  handlerEvent elementSelector
		 * @method _registerHandler
		 * @param elementSelector {String} optional jquery selector
		 * @param handler {Function} optional
		 * @param handlerEvent {String} optional
		 */
		_registerHandler: function(elementSelector, handler, handlerEvent){
			var me = this;
			handler = handler || me.handler;
			handlerEvent = handlerEvent || me.handlerEvent;
			elementSelector = elementSelector || me._getElementSelector();
			if(handler &amp;&amp; handlerEvent){
				$(document).on(handlerEvent, elementSelector, function(){
					var args = Array.prototype.slice.call(arguments);
					args.push(this);
					handler.apply(me, args);
				});
			}
		},
		/**
		 * mother of all basic bindings
		 * @method bindings
		 * @return {Object} {attr:{}, css:{}}
		 */
		bindings: function(){
			var me = this,
				obj = {
					attr:{},
					css: {}
				};
			
			if( me.css ){
				obj.css[ me.parseBind( me.css ) ] = true;	
			}
			
			if(me.style){
				obj.style = me.style;
			}
			
			return me.addTooltipPopoverBind(obj);
		},
		/**
		 * compile the template
		 * @method template
		 * @param prop {String} [prop=tpl] optional - name of property to template
		 * @param force {Boolean} [force=false] optional - set to true to force a retemplate
		 * @return {Function} template function
		 */
		template: function(prop, force){
			var me = this;
			prop = prop || &quot;tpl&quot;;
			if(!me._template[prop] || force){
				me._template[prop] = tplEngine.template(me[prop]);
			}
			return me._template[prop];
		},
		/**
		 * build the compiled template
		 * @method build
		 * @param prop {String} [prop=&quot;tpl&quot;] optional - name of property to build
		 * @return {String} html 
		 */
		build: function(prop){
			var me = this;
			prop = prop || &quot;tpl&quot;;
			me._build[prop] = me._template[prop](me);
			return me._build[prop];
		},
		/**
		 * @method dataBind
		 * @param property {String} [property=this.bindings]
		 * @param ...
		 * @private
		 * @return {String}
		 */
		dataBind: function(){
			var me = this,
				args = Firebrick.utils.argsToArray( arguments ),
				prop,
				obj;
			
			if(args &amp;&amp; args.length){
				prop = args.splice(0, 1);
			}else{
				prop = &quot;bindings&quot;;
			}
			
			obj = me[prop];
				
			if($.isFunction(obj)){
				obj = obj.apply(me, args);
			}
			
			return Firebrick.ui.utils.stringify( obj );
		},
		/**
		 * called when calling {{{getSubTpl}}} in component template
		 * @method getSubTpl
		 * @return {String}
		 */
		getSubTpl: function(){
			var me = this,
				tpl = me.build(&quot;subTpl&quot;);
			
			if(me.beforeSubTpl){
				tpl = me.build(&quot;beforeSubTpl&quot;) + tpl;
			}
			if(me.afterSubTpl){
				tpl = tpl + me.build(&quot;afterSubTpl&quot;);
			}
			
			return tpl;
		},
		/**
		 * find the parent of this class
		 * iterate up the inheritance tree looking for a classname that differs from the current and that &quot;subTpl&quot; or &quot;tpl&quot; don&#x27;t match either
		 * @private
		 * @method _getParent
		 * @return {Object}
		 */
		_getParent: function(clazz){
			var me = clazz || this,
				p = Object.getPrototypeOf(me);

			if(me._classname !== p._classname){
				if((me.subTpl !== p.subTpl) || (me.tpl !== p.tpl)){
					return p;
				}
			}
			return this._getParent(p);
		},
		/**
		 * called when calling {{{getParentTpl}}} in component template
		 * @method getParentTpl
		 * @return {String}
		 */
		getParentTpl: function(){
			var me = this;
			return tplEngine.template(me._getParent().tpl)(me);
		},
		/**
		 * called when calling {{{getParentSubTpl}}} in component template
		 * @method getParentSubTpl
		 * @return {String}
		 */
		getParentSubTpl: function(){
			var me = this;
			return tplEngine.template(me._getParent().subTpl)(me);
		},
		/**
		 * clean string - i.e. remove all &#x27; from string
		 * @method cleanString
		 * @return {String}
		 */
		cleanString: function(string){
			return string.replace(/\&#x27;/g, &quot;&quot;);
		},
		/**
		 * attach &#x27; to the start and end of the string for KO binds
		 * @method parseBind
		 * @param  {String} str
		 * @return {String} &quot;&#x27;&quot; + str + &quot;&#x27;&quot;
		 */
		parseBind: function(str){
			return &quot;&#x27;&quot; + str + &quot;&#x27;&quot;;
		},
		/**
		 * takes a string and prepares it for Firebrick text call
		 * @example
		 * 	textBind(&quot;mystring.abc.key&quot;)
		 * 	// returns = Firebrick.text(&#x27;mystring.abc.key&#x27;)
		 * @method textBind
		 * @param key {String}
		 * @return {String}
		 */
		textBind: function(key){
			return &quot;Firebrick.text(&#x27;&quot; + key + &quot;&#x27;)&quot;;
		}
	});
});
	
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @namespace components.common.mixins
 * @class Items
 * @static
 */
define(&#x27;Firebrick.ui/common/mixins/Items&#x27;,[&quot;jquery&quot;], function($){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.common.mixins.Items&quot;, {
		/**
		 * default configuration for direct children - i.e. direct items
		 * @property defaults
		 * @type {Object}
		 * @default null 
		 */
		defaults: 1,
		/**
		 * alignment of its children components
		 * @property itemsAlign
		 * @type {String|null} &quot;center&quot;
		 * @default
		 */
		itemsAlign:null,
		/**
		 * @property items
		 * @type {String|Object|Array of Object}
		 * @default null
		 */
		items:null,
		/**
		 * inject sub items
		 * @method getItems
		 * @return {String} html
		 */
		getItems: function(){
			var me = this,
				r = me._getItems(me.items);
				me.items = r.items;
			return r.html;
		},
		/**
		 * if you are calling _getItems from a nested scope or you want items from a different property other than .items - then use this function
		 * @method _getItemsScoped
		 * @param me {Object} me component class (this)
		 * @param [itemsName] {String}  name of property to get items from
		 * @return {String} html
		 */
		getItemsProp: function(itemsName){
			var me = this, 
				r,
				html = &quot;&quot;;
			if(itemsName){
				r = me._getItems(me[itemsName]);
				me[itemsName] = r.items;
				html = r.html;
			}else{
				console.error(&quot;invalid function call getItemsProp():&quot;, itemsName);
			}
			
			return html;
		},
		/**
		 * use getItems
		 * @private
		 * @method _getItems
		 * @param {Object|Array of Objects} items
		 * @return {Object, Null} object - {html:&quot;&quot;, items:[]}
		 */
		_getItems: function(items){
			return Firebrick.ui._populate(items, this);
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * 
 * do not extend from this but from Firebrick.ui.button.ButtonGroup
 * 
 * @private
 * 
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.button
 * @class ButtonGroupBase
 */
define(&#x27;Firebrick.ui/button/Base&#x27;,[&quot;../common/Base&quot;, &quot;../common/mixins/Items&quot;], function(){
	&quot;use strict&quot;;
	
	return Firebrick.define(&quot;Firebrick.ui.button.Base&quot;, {
		extend:&quot;Firebrick.ui.common.Base&quot;,
		mixins:&quot;Firebrick.ui.common.mixins.Items&quot;
	});
	
});


define(&#x27;text!Firebrick.ui/button/Button.html&#x27;,[],function () { return &#x27;{{?it.items}}\r\n\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;dropdownContainerBindings\&#x27;)}}&quot;&gt;\r\n{{?}}\r\n\t\t&lt;button id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t\t\t\r\n\t\t\t{{=it.b(it.beforeText)}}\r\n\t\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;buttonTextBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t{{=it.b(it.afterText)}}\r\n\t\t\t\r\n\t\t\t{{?it.badge}}\r\n\t\t\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;badgeBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t{{?}}\r\n\t\t\t\r\n\t\t\t{{?it.items &amp;&amp; !it.splitButton}}\r\n\t\t\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;caretBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t{{?}}\r\n\t\t&lt;/button&gt;\r\n\t\t \r\n\t\t {{?it.items &amp;&amp; it.splitButton}}\r\n\r\n\t\t\t&lt;button data-bind=&quot;{{=it.dataBind(\&#x27;splitButtonBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t    &lt;span data-bind=&quot;{{=it.dataBind(\&#x27;caretBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t    &lt;span data-bind=&quot;{{=it.dataBind(\&#x27;splitButtonSrOnlyBinding\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t  &lt;/button&gt;\r\n\t\t \r\n\t\t {{?}}\r\n\t\t \r\n{{?it.items}}\r\n\t\t{{=it.getDropdown()}}\r\n\t&lt;/div&gt;\r\n{{?}}&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @namespace components.common.mixins
 * @class Badges
 * @static
 */
define(&#x27;Firebrick.ui/common/mixins/Badges&#x27;,[], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.common.mixins.Badges&quot;, {
		/**
		 * false to hide badge, string to show text
		 * @property badge
		 * @type {String|False}
		 * @default false
		 */
		badge: false,
		/**
		 * @method badgeBindings
		 * @return {Object}
		 */
		badgeBindings: function(){
			var me = this,
				obj = {
					attr:{},
					css:{
						badge: true
					},
					text: me.textBind( me.badge )
				};
			return obj;
		}
	});
});

define(&#x27;text!Firebrick.ui/menu/Menu.html&#x27;,[],function () { return &#x27;&lt;ul id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{=it.getItems()}}\r\n&lt;/ul&gt;&#x27;;});


define(&#x27;text!Firebrick.ui/menu/Item.html&#x27;,[],function () { return &#x27;&lt;li id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{?it.items}}\r\n\t\t{{=it.getItems()}}\r\n\t{{?? true}}\r\n\t\t&lt;a data-bind=&quot;{{=it.dataBind(\&#x27;linkBindings\&#x27;)}}&quot;&gt;&lt;/a&gt;\r\n\t{{?}}\r\n&lt;/li&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @private
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.menu
 * @class Item
 */
define(&#x27;Firebrick.ui/menu/Item&#x27;,[&quot;text!./Item.html&quot;, &quot;../common/Base&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.menu.Item&quot;, {
		extend: &quot;Firebrick.ui.common.Base&quot;,
		mixins:&quot;Firebrick.ui.common.mixins.Items&quot;,
		sName: &quot;menu.item&quot;,
		text: null,
		value: null,
		href: null,
		divider:false,
		tpl: tpl,
		/**
		 * @property defaults
		 * @type {object}
		 * @default {
		 * 		sName: &quot;menu.item&quot;
		 * }
		 */
		defaults: {
			sName: &quot;menu.item&quot;
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent( arguments );
			
			if(me.divider){
				obj.css.divider = true;
			}
			
			obj.attr.role = &quot;&#x27;presentation&#x27;&quot;;
			
			return obj;
		},
		/**
		 * @method linkBindings
		 * @return {Object}
		 */
		linkBindings: function(){
			var me = this,
				obj = {
					attr:{}
				};
			
			if(me.href){
				obj.href = me.href;
			}
			if(me.text){
				obj.text = me.textBind( me.text );
			}
			
			obj.attr.role = &quot;&#x27;menuitem&#x27;&quot;;
			obj.attr.tabindex = &quot;-1&quot;;
			
			return obj;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @private
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.menu
 * @class Menu
 */
define(&#x27;Firebrick.ui/menu/Menu&#x27;,[&quot;text!./Menu.html&quot;, &quot;jquery&quot;, &quot;../common/Base&quot;, &quot;../common/mixins/Items&quot;, &quot;./Item&quot;], function(tpl, $){
	&quot;use strict&quot;;
	
	return Firebrick.define(&quot;Firebrick.ui.menu.Menu&quot;, {
		extend: &quot;Firebrick.ui.common.Base&quot;,
		mixins:&quot;Firebrick.ui.common.mixins.Items&quot;,
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;menu.list&quot;,
		 */
		sName:&quot;menu.menu&quot;,
		/**
		 * @property tpl
		 */
		tpl: tpl,
		/**
		 * @property defaults
		 * @type {object}
		 * @default {
		 * 		sName: &quot;menu.item&quot;
		 * }
		 */
		defaults: {
			sName: &quot;menu.item&quot;
		},
		/**
		 * @property ariaLabelledBy
		 * @type {String}
		 * @default &quot;&quot;
		 */
		ariaLabelledBy: &quot;&quot;,
		/**
		 * @method init
		 */
		init: function(){
			var me = this;
			
			me._prepItems();
			
			return me.callParent( arguments );
		},
		/**
		 * @method _prepItems
		 * @private
		 */
		_prepItems: function(){
			var me = this,
				it,
				items = me.items;
			
			for(var i = 0, l = items.length; i&lt;l; i++){
				it = items[i];
				if(it === &quot;|&quot;){
					it = {
						divider: true
					}
				}else if( it.sName &amp;&amp; it.sName !== &quot;menu.item&quot;){
					it = {
							items: [ items[i] ]
					}
				}
				
				items[i] = it;
			}
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */ 
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			obj.css = {
					&quot;&#x27;dropdown-menu&#x27;&quot;: true
			};
			if(!obj.attr){
				obj.attr = {};
			}
			obj.attr.role = &quot;&#x27;menu&#x27;&quot;;
			obj.attr[&quot;&#x27;aria-labelledby&#x27;&quot;] = me.parseBind(me.ariaLabelledBy);

			return obj;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.button.Base
 * @namespace components.button
 * @class Button
 */
define(&#x27;Firebrick.ui/button/Button&#x27;,[&quot;text!./Button.html&quot;, &quot;./Base&quot;, &quot;../common/mixins/Badges&quot;, &quot;../menu/Menu&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.button.Button&quot;, {
		extend:&quot;Firebrick.ui.button.Base&quot;,
		mixins:[&quot;Firebrick.ui.common.mixins.Badges&quot;],
		sName: &quot;button.button&quot;,
		tpl:tpl,
		/**
		 * @property text
		 * @type {String}
		 * @default &quot;&quot;
		 */
		text:&quot;&quot;,
		/**
		 * type: button, submit
		 * @property type
		 * @type {String}
		 * @default &quot;button&quot;
		 */
		type: &quot;button&quot;,
		/**
		 * @property dropdownContainerClass
		 * @type {String|false}
		 * @default &quot;dropdown&quot;
		 */
		dropdownContainerClass: &quot;dropdown&quot;,
		/**
		 * if true - att &quot;navbar-btn&quot; class to the button
		 * @property navbarItem
		 * @type {Boolean}
		 * @default false
		 */
		navbarItem: false,
		/**
		 * @property splitButton
		 * @type {Boolean}
		 * @default false
		 */
		splitButton: false,
		/**
		 * @property btnSize
		 * @type {Boolean|String} false |  (&quot;sm&quot;, &quot;lg&quot;, &quot;xs&quot;)
		 * @default false
		 */
		btnSize:false,
		/**
		 * @property disabled
		 * @type {Boolean}
		 * @default false
		 */
		disabled: false,
		/**
		 * @property btnStyle
		 * @type {Boolean|String} false | (default, primary, success, info, warning, danger, link)
		 * @default &quot;default&quot;
		 */
		btnStyle:&quot;default&quot;,
		/**
		 * used to inject something before the text &lt;span&gt;
		 * @property beforeText
		 * @type {Any}
		 * @default &quot;&quot;
		 */
		beforeText: &quot;&quot;,
		/**
		 * bootstrap glyphicon class
		 * @property glyIcon
		 * @type {String}
		 * @default null
		 */
		glyIcon: null,
		/**
		 * used to inject something after the text &lt;span&gt;
		 * @property afterText
		 * @type {Any}
		 * @default &quot;&quot;
		 */
		afterText: &quot;&quot;,
		/**
		 * set as string to give the button stateful capabilities.
		 * @property loadingText
		 * @type {Boolean|String} when set as string, the value is assigned to the button &quot;button-loading-text&quot; attribute
		 * @default false
		 */
		loadingText: false,
		/**
		 * @property dropdownConfig
		 * @type {Object}
		 * @default null
		 */
		dropdownConfig: null,
		/**
		 * @property srOnlyText
		 * @type {String}
		 * @default &quot;Toggle Dropdown&quot;
		 */
		srOnlyText: &quot;Toggle Dropdown&quot;,
		/**
		 * only works if this button is used in a modal
		 * @property closeModal
		 * @type {Boolean}
		 * @default false
		 */
		closeModal: false,
		/**
		 * use getDropdownParentEl()
		 * @property _dropdown
		 * @private
		 * @type {jQuery Object}
		 * @default null
		 */
		_dropdownParent: null,
		/**
		 * @method getDropdownParentEl
		 * @return {jQuery Object}
		 */
		getDropdownParentEl: function(){
			var me = this,
				el;
			
			if(!me._dropdownParent){
				el = me.getElement();
				me._dropdownParent = el.parent();
			}
			
			return me._dropdownParent;
		},
		/**
		 * use getDropdownEl()
		 * @property _dropdown
		 * @private
		 * @type {jQuery Object}
		 * @default null
		 */
		_dropdown: null,
		/**
		 * @method getDropdownEl
		 * @return {jQuery Object}
		 */
		getDropdownEl: function(){
			var me = this,
				el;
			if(!me._dropdown){
				el = me.getElement();
				me._dropdown = el.siblings(&quot;ul.dropdown-menu&quot;);
			}
			
			return me._dropdown;
		},
		/**
		 * @method init
		 */
		init: function(){
			var me = this;
			
			me._initDropdown();
			
			return me.callParent( arguments );
		},
		/**
		 * @method _initDropdown
		 * @private
		 */
		_initDropdown: function(){
			var me = this;
			if( me.items &amp;&amp; me.items.length ){
				me.on(&quot;rendered&quot;, function(){
					var el = me.getDropdownParentEl();
					if(el.length){
						el.on(&quot;shown.bs.dropdown&quot;, function(){
							me.positionDropdown();
						});
					}
				});
			}
		},
		/**
		 * @method positionDropdown
		 */
		positionDropdown: function(){
			var me = this,
				el = me.getElement(),
				drop = me.getDropdownEl(),
				docWidth = $(document).width(),
				elOffset = el.offset(),
				startLeft = elOffset.left,
				dropWidth = drop.outerWidth(),
				elWidth = el.outerWidth(),
				diff = dropWidth - elWidth;
			
			if(dropWidth &gt; elWidth){
				if( (elOffset.left + dropWidth) &gt; docWidth){
					startLeft = elOffset.left - diff;
				}
			}
			
			drop.css({
				top: elOffset.top + el.outerHeight(),
				left: startLeft
			});
			
		},
		/**
		 * default bindings called by data-bind={{data-bind}}
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.attr.type = me.parseBind(me.type);
			obj.css.btn = true;
			
			//firefox bug fix
			obj.attr.autocomplete = &quot;&#x27;off&#x27;&quot;;
			//--//
						
			if(me.btnStyle){
				obj.css[ me.parseBind(&quot;btn-&quot;+me.btnStyle)] = true;
			}
			if(me.btnSize){
				obj.css[ me.parseBind(&quot;btn-&quot; + me.btnSize)] = true;
			}
			
			if(me.items &amp;&amp; !me.splitButton){
				obj.css[&quot;&#x27;dropdown-toggle&#x27;&quot;] = true;
				obj.attr[&quot;&#x27;data-toggle&#x27;&quot;] = &quot;&#x27;dropdown&#x27;&quot;;
			}
			
			if(me.navbarItem){
				obj.css[&quot;&#x27;navbar-btn&#x27;&quot;] = true;
			}
			
			if(me.loadingText){
				obj.attr[&quot;&#x27;data-loading-text&#x27;&quot;] = me.textBind( me.loadingText );
			}
			
			if(me.closeModal){
				obj.attr[&quot;&#x27;data-dismiss&#x27;&quot;] = &quot;&#x27;modal&#x27;&quot;;
			}
			
			if(me.disabled){
				obj.attr.disabled = &quot;&#x27;disabled&#x27;&quot;;
			}
			
			return obj;
		},
		/**
		 * @property buttonTextBindings
		 * @return {Object}
		 */
		buttonTextBindings: function(){
			var me = this,
				obj = {
						css: {},
						text: me.textBind(me.text),
				};
			
			if(me.glyIcon){
				obj.css.glyphicon = true;
				obj.css[me.parseBind(&quot;glyphicon-&quot; + me.glyIcon)] = true;
			}
			
			return obj;
		},
		/**
		 * @method caretBindings
		 * @return {Object}
		 */
		caretBindings: function(){
			return {
				css: {
					caret: true
				}
			};
		},
		/**
		 * @method dropdownContainerBindings
		 * @return {Object}
		 */
		dropdownContainerBindings: function(){
			var me = this,
				obj = {
					css:{}
				};
			
			if(me.splitButton){
				obj.css[&quot;&#x27;btn-group&#x27;&quot;] = true;
			}else{
				//standard dropdown
				if(me.dropdownContainerClass &amp;&amp; !me.splitButton){
					obj.css[me.parseBind( me.dropdownContainerClass )] = true;
				}
			}

			obj.css[&quot;&#x27;fb-ui-dropdown&#x27;&quot;] = true;
			
			return obj;
		},
		/**
		 * @method getDropdown
		 * @return {Object}
		 */
		getDropdown: function(){
			var me = this,
				obj = {
					sName: &quot;menu.menu&quot;,
					items: me.items
				};
			
			obj = Firebrick.utils.copyover(obj, me.dropdownConfig || {});

			obj = me._getItems(obj);
			
			me.items = obj.items;
			
			return obj.html;
		},
		
		/**
		 * @method splitButtonBindings
		 * @return {Object}
		 */
		splitButtonBindings: function(){
			var me = this,
				obj = {css:{}, attr:{}};
			
			obj.attr.type = me.parseBind(me.type);
			obj.css.btn = true;
			if(me.btnStyle){
				obj.css[ me.parseBind(&quot;btn-&quot;+me.btnStyle)] = true;
			}
			if(me.btnSize){
				obj.css[ me.parseBind(&quot;btn-&quot; + me.btnSize)] = true;
			}
			if(me.items){
				obj.css[&quot;&#x27;dropdown-toggle&#x27;&quot;] = true;
				obj.attr[&quot;&#x27;data-toggle&#x27;&quot;] = &quot;&#x27;dropdown&#x27;&quot;;
			}
			obj.attr[&quot;&#x27;aria-expanded&#x27;&quot;] = false;
			
			return obj;
		},
		
		/**
		 * @method splitButtonSrOnlyBinding
		 * @return {Object}
		 */
		splitButtonSrOnlyBinding: function(){
			var me = this,
				obj = {css:{}};
			
			obj.css[&quot;&#x27;sr-only&#x27;&quot;] = true;
			obj.text = me.textBind(me.srOnlyText);
			
			return obj;
		},
		/**
		 * @method setEnabled
		 * @event enabled
		 * @event disabled
		 * @param enable {Boolean}
		 */
		setEnabled: function( enable ){
			var me = this,
				$el = me.getElement();
			if(enable){
				$el.removeAttr(&quot;disabled&quot;);
				me.fireEvent(&quot;enabled&quot;);
			}else{
				$el.attr(&quot;disabled&quot;, &quot;disabled&quot;);
				me.fireEvent(&quot;disabled&quot;);
			}
		}
	});
});

define(&#x27;text!Firebrick.ui/button/ButtonGroup.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\r\n\t{{=it.getItems()}}\r\n\r\n&lt;/div&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * 
 * the items property does not need to have each object defined with its sName, that is down automatically
 * 
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.button
 * @class ButtonGroup
 */
define(&#x27;Firebrick.ui/button/ButtonGroup&#x27;,[&quot;text!./ButtonGroup.html&quot;, &quot;./Base&quot;, &quot;./Button&quot;], function(tpl){
	&quot;use strict&quot;;

	return Firebrick.define(&quot;Firebrick.ui.button.ButtonGroup&quot;, {
		extend:&quot;Firebrick.ui.button.Base&quot;,
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;fb-ui-buttongroup&quot;
		 */
		sName: &quot;button.buttongroup&quot;,
		tpl:tpl,
		defaults:{
			sName:&quot;button.button&quot;,
			dropdownContainerClass:&quot;btn-group&quot; //needed for dropdown
		},
		/**
		 * @property vertical
		 * @type {Boolean} if false then the button group is horizontal
		 * @default true
		 */
		vertical: true,
		/**
		 * @property role
		 * @type {String}
		 * @default &quot;group&quot;
		 */
		role: &quot;group&quot;,
		/**
		 * @property groupSize
		 * @type {String} xs, sm, md, lg
		 * @default &quot;md&quot;
		 */
		groupSize: &quot;md&quot;,
		/**
		 * @property arialLabel
		 * @type {String}
		 * @default &quot;&quot;
		 */
		arialLabel: &quot;&quot;,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			if(me.vertical){
				obj.css[&quot;&#x27;btn-group-vertical&#x27;&quot;] = true;				
			}else{
				obj.css[&quot;&#x27;btn-group&#x27;&quot;] = true;
			}
			
			obj.css[me.parseBind( &quot;btn-group-&quot; + me.groupSize )] = true;
			obj.attr.role = me.parseBind( me.role );
			obj.attr[&quot;&#x27;aria-label&#x27;&quot;] = me.textBind( me.arialLabel );
			
			return obj;
		}
	});
});
		
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.button.Button
 * @namespace components.button
 * @class Icon
 */
define(&#x27;Firebrick.ui/button/Icon&#x27;,[&quot;./Button&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.button.Icon&quot;, {
		extend: &quot;Firebrick.ui.button.Button&quot;,
		sName:&quot;button.icon&quot;,
		/**
		 * @property buttonSize
		 * @type {Boolean|String} boolean = false
		 * @default &quot;xs&quot;
		 */
		btnSize: &quot;xs&quot;,
		/**
		 * @property text
		 * @type {String}
		 * @default false
		 */
		text: false,
		/**
		 * @property glyIcon
		 * @type {String}
		 * @default &quot;remove&quot;
		 */
		glyIcon: &quot;remove&quot;,
		/**
		 * @property btnStyle
		 * @type {String}
		 * @default &quot;danger&quot;
		 */
		btnStyle: &quot;danger&quot;,
		/**
		 * @property afterText
		 * @private
		 * @type {Function}
		 */
		afterText: function(){
			var me = this;
			return me.text ? me.text : &quot;&quot;;
		},
		/**
		 * @method buttonTextBindings
		 * @return {Object}
		 */
		buttonTextBindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			if(obj.hasOwnProperty(&quot;text&quot;)){
				delete obj.text;
			}
			
			if(!obj.css){
				obj.css = {};
			}
			obj.css[me.glyphiconClass] = true;
			obj.css[me.parseBind(&quot;glyphicon-&quot; + me.glyIcon)] = true;
			
			return obj;
		}
		
	});
});

define(&#x27;text!Firebrick.ui/button/ToggleButton.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind(\&#x27;btnGroupBindings\&#x27;)}}&quot;&gt;\r\n\t{{?it.showLabel}}\r\n\t\t&lt;label data-bind=&quot;{{=it.dataBind(\&#x27;toggleLabelBindings\&#x27;)}}&quot;&gt;\r\n\t{{?}}\r\n\t\t\t&lt;input type=&quot;radio&quot; data-bind=&quot;{{=it.dataBind(\&#x27;toggleInputBindings\&#x27;)}}&quot;&gt;&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;toggleLabelTextBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t{{?it.showLabel}}\r\n\t\t&lt;/label&gt;\r\n\t{{?}}\r\n&lt;/div&gt;&#x27;;});


define(&#x27;text!Firebrick.ui/fields/Base.html&#x27;,[],function () { return &#x27;&lt;div data-cmp-id=&quot;{{=it.getId()}}&quot; class=&quot;{{=it.formGroupClass}}&quot; data-bind=&quot;{{=it.dataBind(\&#x27;containerBindings\&#x27;)}}&quot;&gt;\r\n\t{{?it.label !== false }}\r\n\t\t&lt;label for=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind(\&#x27;labelBindings\&#x27;)}}&quot;&gt;&lt;/label&gt; \r\n\t{{?}}\r\n\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;inputContainerBindings\&#x27;)}}&quot;&gt;\r\n\t\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;fieldBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t\t\r\n\t\t\t\t{{?it.inputAddon}}\r\n\t\t\t\t\t{{?it.inputAddonPosition === &quot;left&quot;}}\r\n\t\t\t\t\t\t&lt;!-- ko {{=it.dataBind(\&#x27;inputAddonTemplateBindings\&#x27;)}} --&gt;&lt;!-- /ko --&gt;\r\n\t\t\t\t\t{{?}}\r\n\t\t\t\t{{?}}\r\n\t\t\t\t\r\n\t\t\t\t{{=it.getSubTpl()}}\r\n\t\t\t\t\r\n\t\t\t\t{{?it.showStateIcon}}\r\n\t\t\t\t\t&lt;span class=&quot;{{=it.glyphiconClass}} {{=it.formControlFeedbackClass}}&quot; data-bind=&quot;{{=it.dataBind(\&#x27;feedbackBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t\t{{?}}\r\n\t\t\t\t{{?it.helpText}}\r\n\t\t\t\t\t&lt;span class=&quot;{{=it.helpBlockClass}}&quot; data-bind=&quot;{{=it.dataBind(\&#x27;helpBlockBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t \t{{?}}\r\n\t\t\t \t\r\n\t\t\t \t{{?it.inputAddon}}\r\n\t\t\t\t \t{{?it.inputAddonPosition === &quot;right&quot;}}\r\n\t\t\t\t\t\t&lt;!-- ko {{=it.dataBind(\&#x27;inputAddonTemplateBindings\&#x27;)}} --&gt;&lt;!-- /ko --&gt;\r\n\t\t\t\t\t{{?}}\r\n\t\t\t\t{{?}}\r\n\t\t\t \t\r\n\t\t&lt;/div&gt;\r\n\t\t\r\n\t\t{{?it.inputAddon}}\r\n\t\t \t&lt;script type=&quot;text/html&quot; id=&quot;{{=it.getAddonId()}}&quot;&gt;\r\n\t\t\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;inputAddonBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t\t\t{{?typeof it.inputAddon === &quot;object&quot;}}\r\n\t\t\t\t\t\t{{=it.getItemsProp(\&#x27;inputAddon\&#x27;)}}\r\n\t\t\t\t\t{{?? true}}\r\n\t\t\t\t\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;inputAddonSpanBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t\t\t{{?}}\r\n\t\t\t\t&lt;/span&gt;\r\n\t\t\t &lt;/script&gt;\r\n\t \t{{?}}\r\n\t\t\r\n\t&lt;/div&gt;\r\n&lt;/div&gt;&#x27;;});


define(&#x27;text!Firebrick.ui/fields/Input.html&#x27;,[],function () { return &#x27;{{?it.inplaceEdit}}\r\n\t&lt;a id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;&lt;/a&gt;\r\n{{?? true }}\r\n\t&lt;input id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n{{?}}\r\n&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.fields
 * @class Base
 */
define(&#x27;Firebrick.ui/fields/Base&#x27;,[&quot;../common/Base&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.Base&quot;, {
		extend:&quot;Firebrick.ui.common.Base&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;fields.base&quot;,
		/**
		 * override method to fire events on actual element - append fb.ui. to event name
		 * @method fireEvent
		 */
		fireEvent: function(){
			var me = this,
				$el = me.getElement(),
				args = Firebrick.utils.argsToArray( arguments ),
				eventName = args[0];
			
			if($el){
				//remove eventName from args
				args.splice(0, 1);
				//trigger event on the element - getElement()
				$el.trigger(&quot;fb.ui.&quot; + eventName, args);
			}
			
			return me.callParent( arguments );
		}
	});
});

define(&#x27;text!Firebrick.ui/containers/GridRow.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\r\n\t{{~ it.items :value:index}}\r\n\t\t{{=it.getGridItem(index, value)}}\r\n\t{{~}}\r\n\r\n&lt;/div&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.containers
 * @uses components.common.mixins.Items
 * @class Base
 */
define(&#x27;Firebrick.ui/containers/Base&#x27;,[&quot;../common/Base&quot;, &quot;../common/mixins/Items&quot;], function(){
	
	&quot;use strict&quot;;
	
	return Firebrick.define(&quot;Firebrick.ui.containers.Base&quot;, {
		extend:&quot;Firebrick.ui.common.Base&quot;,
		mixins:&quot;Firebrick.ui.common.mixins.Items&quot;,
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);

			//property mixed in by mixins.Items
			if(me.itemsAlign){
				obj.css[me.parseBind(&quot;fb-ui-items-align-&quot; + me.itemsAlign)] = true;
			}
			
			return obj;
		}
	});
});

define(&#x27;text!Firebrick.ui/containers/GridColumn.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{=it.getItems()}}\r\n&lt;/div&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @namespace components.common.mixins
 * @class Column
 * @static
 */
define(&#x27;Firebrick.ui/common/mixins/Column&#x27;,[], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.common.mixins.Column&quot;, {

		/**
		 * @property deviceSize
		 * @type {String}
		 * @default &quot;md&quot;
		 */
		deviceSize:&quot;md&quot;,
		/**
		 * auto will attempt to provide the column width by dividing the number of items in the parent Grid by 12 - decimals will be rounded down
		 * @property columnWidth
		 * @type {Integer|String} number 1 to 12 or &quot;auto&quot;
		 * @default &quot;auto&quot;
		 */
		columnWidth:&quot;auto&quot;,
		/**
		 * use this to offset the column by x columns
		 * http://getbootstrap.com/css/#grid-offsetting
		 * @property columnOffset
		 * @type {Integer|null} 1 to 12
		 * @default null
		 */
		columnOffset:null,
		/**
		 * use this to offset the column by x columns
		 * http://getbootstrap.com/css/#grid-column-ordering
		 * @example
		 * 		pull-3
		 * @example
		 * 		push-4
		 * @property columnOrder
		 * @type {String|null} &quot;push-{x}&quot; or &quot;pull-{x}&quot; - x = 1 to 12
		 * @default null
		 */
		columnOrder:null,
		/**
		 * when property columnWidth is set to &quot;auto&quot;, this function will attempt to calculate the correct size for each column.
		 * Note: this function will round down to the nearest whole number - 5 columns will result in size 2 for each column
		 * the number of columns are divided by 12 (BS3 grid)
		 * @method _getColumnWidth
		 * @private
		 * @return {Int}
		 */
		_getColumnWidth:function(){
			var me = this,
				colWidth = me.columnWidth;
			if(colWidth === &quot;auto&quot;){
				return Math.floor(12/me._parent.items.length);
			}
			return colWidth;
		},
		
		/**
		 * call this in bindings function
		 * @method calColumn
		 * @param {Object} obj
		 * @param {Object} obj.css: {}
		 * @param {Object} obj.attr: {}
		 * @return {Object}
		 */
		calColumn: function(obj){
			var me = this;
			
			obj.css.col = true;
			obj.css[ me.parseBind(&quot;col-&quot;+me.deviceSize+&quot;-&quot;+me._getColumnWidth()) ] = true;
			
			if(me.columnOffset){
				obj.css[ me.parseBind(&quot;col-&quot; + me.deviceSize + &quot;-offset-&quot; + me.columnOffset) ] = true;
			}
			
			if(me.columnOrder){
				obj.css[ me.parseBind(&quot;col-&quot; + me.deviceSize + &quot;-&quot; + me.columnOrder) ] = true;
			}
			
			return obj;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers
 * @class GridColumn
 */
define(&#x27;Firebrick.ui/containers/GridColumn&#x27;,[&quot;text!./GridColumn.html&quot;, &quot;./Base&quot;, &quot;../common/mixins/Column&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.GridColumn&quot;, {
		extend:&quot;Firebrick.ui.containers.Base&quot;,
		mixins:&quot;Firebrick.ui.common.mixins.Column&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;containers.gridcolumn&quot;,
		/**
		 * @property tpl
		 * @type {String} html
		 */
		tpl:tpl,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this;
			return me.calColumn(me.callParent(arguments));
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers
 * @class GridRow
 */
define(&#x27;Firebrick.ui/containers/GridRow&#x27;,[&quot;text!./GridRow.html&quot;, &quot;jquery&quot;, &quot;./Base&quot;, &quot;./GridColumn&quot;], function(tpl, $){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.GridRow&quot;, {
		extend:&quot;Firebrick.ui.containers.Base&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;containers.gridrow&quot;,
		/**
		 * @property tpl
		 * @type {String} html
		 */
		tpl: tpl,
		/**
		 * @property rowClass
		 * @type {Boolean|String}
		 * @default true
		 */
		rowClass:true,
		/**
		 * @property defaults
		 * @type {Object}
		 * @default {sName: &quot;containers.gridcolum&quot;}
		 */
		defaults:{
			sName: &quot;containers.gridcolumn&quot;
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.css.row = me.rowClass;
			
			return obj;
		},
		/**
		 * @method getBasicBindings
		 * @return {Object}
		 */
		getBasicBindings:function(){
			var me = this,
				obj = {
						css:{}
				};
			obj.css[ me.parseBind( &quot;col-md-&quot; + (Math.floor(12/me.items.length)) )] = true;
			return obj;
		},
		/**
		 * used when calling {{{getGridItem}}} in template
		 * @method getGridItem
		 * @param {Int} iteration index
		 * @param {Object} iteration object
		 * @param {Context} iteration context
		 * @return {String}
		 */
		getGridItem: function(index, item){
			var me = this,
				newItem = me._getItems(item);
			
			if(newItem){
				//replace items with the new object - _getItems returns an object {html:&quot;&quot;, items:[]}
				me.items[index] = newItem.items[0];
				
				return newItem.html;
			}
			return &quot;&quot;;
		}
	});
});

define(&#x27;text!Firebrick.ui/containers/Box.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{? it.html }}\r\n\t\t{{=it.html}}\r\n\t{{?? true}}\r\n\t\t{{=it.getItems()}}\r\n\t{{?}}\r\n&lt;/div&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers
 * @class Box
 */
define(&#x27;Firebrick.ui/containers/Box&#x27;,[&quot;text!./Box.html&quot;, &quot;./Base&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.Box&quot;, {
		extend:&quot;Firebrick.ui.containers.Base&quot;,
		tpl: tpl,
		sName:&quot;containers.box&quot;,
		/**
		 * set as string to fill the div/box with text content
		 * @property html
		 * @type {String|false}
		 * @default false
		 */
		html: false
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module plugins
 * @namespace plugins
 * @class InplaceEdit
 */
define(&#x27;Firebrick.ui/fields/plugins/InplaceEdit&#x27;,[&quot;jquery&quot;, &quot;knockout&quot;, &quot;Firebrick.ui/containers/GridRow&quot;, &quot;Firebrick.ui/containers/Box&quot;, &quot;Firebrick.ui/button/Icon&quot;], function($, ko){
	&quot;use strict&quot;;
	
	return Firebrick.define(&quot;Firebrick.ui.fields.plugins.InplaceEdit&quot;, {
		/**
		 * @property fieldItem
		 * @type {Firebrick UI Object}
		 */
		fieldItem: null,
		/**
		 * optional
		 * @property items
		 * @type {Array of Objects}
		 */
		items: null,
		/**
		 * @property showInplaceTitle
		 * @type {Boolean}
		 */
		showInplaceTitle: true,
		/**
		 * @property inplaceTitle
		 * @type {String}
		 * @default null
		 */
		title: null,
		/**
		 * @property container
		 * @type {String}
		 * @default &quot;body&quot;
		 */
		container: &quot;body&quot;,
		/**
		 * css width of the popover
		 * @property width
		 * @type {String}
		 * @default &quot;250px&quot;
		 */
		width: &quot;250px&quot;,
		/**
		 * popover placement
		 * @property placement
		 * @type {String|Function}
		 * @default &quot;auto&quot;
		 */
		placement: &quot;auto bottom&quot;,
		/**
		 * set to true to place at the bottom of the popover rather than the top
		 * @property actionButtonsFooter
		 * @type {Boolean}
		 * @default false
		 */
		actionButtonsFooter: false,
		/**
		 * @method _getPopoverEl
		 * @private
		 * @return {jQuery Object}
		 */
		_getPopoverEl: function(){
			var me = this;
			return me.fieldItem.getElement().data(&#x27;bs.popover&#x27;).$tip;
		},
		/**
		 * @method init
		 */
		init: function(){
			var me = this,
				$el = me.fieldItem.getElement();
			if($el){
				$el.on(&quot;click&quot;, function(){
					return me.onEditClick.apply(me, arguments);
				});
				me.fieldItem.on(&quot;changed&quot;, function(){
					$el.addClass(&quot;fb-ui-inplaceedit-changed&quot;);
				});
			}else{
				console.info(&quot;no el&quot;, me);
			}
		},
		/**
		 * @method buildItems
		 * @return {Array of Objects}
		 */
		buildItems: function(){
			var me = this,
				items = [],
				type = me.fieldItem.type,
				field,
				valStr = &quot;Firebrick.getById(&#x27;&quot; + me.fieldItem.getId() + &quot;&#x27;).getValue()&quot;,
				tmp;
			if(me.items){
				items = me.items;
			}else{
				field = {
					css: &quot;fb-ui-inplaceedit-field&quot;,
	    			inputSize: &quot;sm&quot;,
	    			label: false,
	    			inputWidth:12,
				};
				if(type === &quot;text&quot;){
					tmp = {
		    			sName:	&quot;fields.input&quot;,
						value: valStr
		    		};
				}else if(type === &quot;select&quot;){
					tmp = {
						sName: &quot;fields.selectbox&quot;,
						options: me.fieldItem.options
					}
					if(me.fieldItem.multiSelect){
						tmp.selectedOptions = valStr;
					}else{
						tmp.value = valStr;
					}
				}
				items.push( Firebrick.utils.overwrite(field, tmp) );
			}
			return items;
		},
		/**
		 * @method showPopover
		 */
		showPopover: function(){
			var me = this;
			me._initBSPopover();
			me._showBSPopover();
			me._initPopoverContent();
		},
		/**
		 * @method _initPopoverContent
		 */
		_initPopoverContent: function(){
			var me = this;
			Firebrick.create(&quot;Firebrick.ui.containers.GridRow&quot;, {
	    		target: $(&quot;.popover-content&quot;, me._getPopoverEl()),
	    		store: ko.dataFor( me.fieldItem.getElement()[0] ),
	    		items:[{
	    			columnWidth: me.actionButtonsFooter ? 12 : 7,
	    			items: me.buildItems()
	    		},{
	    			columnWidth: me.actionButtonsFooter ? 12 : 5,
	    			items: me.actionButtons()
	    		}]
			});
		},
		/**
		 * initialises the bootstrap popover - doesn&#x27;t show it though
		 * @method _initBSPopover
		 */
		_initBSPopover: function(){
			var me = this,
				title = Firebrick.text( me.showInplaceTitle ? ( me.fieldItem.popoverTitle || me.fieldItem.label || &quot;&quot; ) : &quot;&quot; );	//don&#x27;t use title directly here, because it is also used for popup

			me.fieldItem.getElement().popover({ 
			    html : true,
			    title: title || &quot; &quot;,
			    container: me.container,			//so it has the right z-index
			    placement: me.placement,
			 	trigger: &quot;manual&quot;,
			});
			
		},
		
		/**
		 * shows the actually bootstrap popover
		 * @method _showBSPopover
		 */
		_showBSPopover: function(){
			var me = this,
				$popover,
				$fieldItem = me.fieldItem.getElement();
			
			$fieldItem.popover(&quot;toggle&quot;);
			
			$popover = me._getPopoverEl();
			if(me.width){
				
				$popover.css(&quot;width&quot;, me.width);
				$popover.css(&quot;max-width&quot;, me.width);
			}

			me._initDismissEvent();
		},
		/**
		 * dismisses the popover when clicked out side it
		 * @method _initDismissEvent
		 */
		_initDismissEvent: function(){
			var me = this;
			//delay because otherwise it catches the &lt;a&gt; click on opening the popover
			Firebrick.delay(function(){
				var func = function(event){
					var $el = $(event.target);
					if(!$el.closest(&quot;.popover&quot;).length){
						me.fieldItem.getElement().popover(&quot;destroy&quot;);
						$(&quot;html&quot;).off(&quot;click&quot;, func);	
					}
				};
				$(&quot;html&quot;).on(&quot;click&quot;, func);
				me.fieldItem.getElement().on(&quot;hide.bs.popover hidden.bs.popover&quot;, function(){
					$(&quot;html&quot;).off(&quot;click&quot;, func);
				});
			}, 1);
		},
		/**
		 * @method okAction
		 */
		okAction: function(){
			var me = this;
			me.setValue( me.getValue() );
			me.fieldItem.getElement().popover(&quot;toggle&quot;);
		},

		/**
		 * @method cancelAction
		 */
		cancelAction: function(){
			var me = this;
			me.fieldItem.getElement().popover(&quot;destroy&quot;);
		},
		
		/**
		 * @method actionButtons
		 * @return {Array of Objects}
		 */
		actionButtons: function(){
			var me = this;
			return [{
				sName: &quot;containers.box&quot;,
				css: me.actionButtonsFooter ? &quot;pull-right&quot; : &quot;&quot;,
				items:[{
					sName: &quot;button.button&quot;,
					glyIcon:&quot;ok&quot;,
					btnStyle: &quot;primary&quot;,
					btnSize: &quot;sm&quot;,
					handler: function(){
						return me.okAction.apply(me, arguments);
					}
				},{
					sName: &quot;button.button&quot;,
					glyIcon:&quot;remove&quot;,
					btnStyle: &quot;default&quot;,
					btnSize: &quot;sm&quot;,
					handler: function(){
						return me.cancelAction.apply(me, arguments);
					}
				}]
			}];
		},
		
		onEditClick: function(){
			var me = this;
			me.showPopover();
		},
		
		getValue: function(){
			var me = this,
				$popover = me._getPopoverEl(),
				$el = $(&quot;.fb-ui-inplaceedit-field&quot;, $popover);
			
			return $el.val();
		},
		
		setValue: function( value ){
			var me = this;
			me.fieldItem.setValue( value );
		}
	});
	
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.fields.Base
 * @namespace components.fields
 * @class Input
 */
define(&#x27;Firebrick.ui/fields/Input&#x27;,[&quot;knockout&quot;, &quot;text!./Base.html&quot;, &quot;text!./Input.html&quot;, &quot;./Base&quot;, &quot;../common/mixins/Items&quot;, &quot;./plugins/InplaceEdit&quot;], function(ko, tpl, subTpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.Input&quot;, {
		extend:&quot;Firebrick.ui.fields.Base&quot;,
		mixins:[&quot;Firebrick.ui.common.mixins.Items&quot;],
		/**
		 * @property sName
		 * @type {String}
		 */
		sName: &quot;fields.input&quot;,
		/**
		 * @property subTpl
		 * @type {String} html
		 */
		subTpl:subTpl,
		/**
		 * @property type
		 * @type {String}
		 * @default &quot;text&quot;
		 */
		type:&quot;text&quot;,
		/**
		 * @property label
		 * @type {String}
		 * @default &quot;&quot;
		 */
		label: &quot;&quot;,
		/**
		 * @property containerCSS
		 * @type {String}
		 * @default &quot;&quot;
		 */
		containerCSS: &quot;&quot;,
		/**
		 * @property value
		 * @type {String}
		 * @default null
		 */
		value: null,
		/**
		 * @property inplaceEditEmptyText
		 * @type {String}
		 * @default &quot;empty&quot;
		 */
		inplaceEditEmptyText: &quot;empty&quot;,
		/**
		 * @property tpl
		 * @type {String} html
		 */
		tpl:tpl,
		/**
		 * @property formGroupClass
		 * @type {String}
		 * @default &quot;form-group&quot;
		 */
		formGroupClass: &quot;form-group&quot;,
		/**
		 * show form-control class
		 * @property formControlClass
		 * @type {String}
		 * @default &quot;form-control&quot;
		 */
		formControlClass: &quot;form-control&quot;,
		/**
		 * @property labelWidth
		 * @type {Int}
		 * @default 3
		 */
		labelWidth: 3,
		/**
		 * use grid system value
		 * @property inputWidth
		 * @type {Int}
		 * @default 9
		 */
		inputWidth: 9,
		/**
		 * screen reader only
		 * @property srOnly
		 * @type {Boolean}
		 * @default false
		 */
		srOnly: false,
		/**
		 * @property readOnly
		 * @type {Boolean}
		 * @default false
		 */
		readOnly:false,
		/**
		 * @property disabled
		 * @type {Boolean}
		 * @default false
		 */
		disabled:false,
		/**
		 * type of column size -md, sm, lg etc
		 * @property columnSize
		 * @type {Boolean|String} string (sm || lg)
		 * @default &quot;sm&quot;
		 */
		columnSize: &quot;md&quot;,
		/**
		 * @property inputSize
		 * @type {Boolean|String} string (sm || lg)
		 * @default &quot;sm&quot;
		 */
		inputSize: &quot;md&quot;,
		/**
		 * @property controlLabel
		 * @type {Boolean}
		 * @default true
		 */
		controlLabel:true,
		/**
		 * help text
		 * @property helpText
		 * @type {Boolean|String}
		 * @default false
		 */
		helpText:false,
		/**
		 * help text
		 * @property helpBlockClass
		 * @type {String}
		 * @default &quot;help-block&quot;
		 */
		helpBlockClass:&quot;help-block&quot;,
		/**
		 * @property placeholder
		 * @type {String}
		 * @default &quot;&quot;
		 */
		placeholder:&quot;&quot;,
		/**
		 * @property showStateIcon
		 * @type {Boolean}
		 * @default false
		 */
		showStateIcon:false,
		/**
		 * @property formControlFeedbackClass
		 * @type {String}
		 * @default &quot;form-control-feedback&quot;
		 */
		formControlFeedbackClass: &quot;form-control-feedback&quot;,
		/**
		 * input addon
		 * @property inputAddon
		 * @type {Boolean|String} - string for inputAddon text - false to deactive, true to simply activate without text, true if you just want an icon (property: iconClass)
		 * @default false
		 */
		inputAddon:false,
		/**
		 * @property inputAddonClass
		 * @type {String}
		 * @default &quot;input-group-addon&quot;
		 */
		inputAddonClass:&quot;input-group-addon&quot;,
		/**
		 * @property inputAddonSpanClass
		 * @type {String}
		 * @default &quot;&quot;
		 */
		inputAddonSpanClass: &quot;&quot;,
		/**
		 * @property horizontal
		 * @type {Boolean}
		 * @default true
		 */
		horizontal:true,
		/**
		 * Feedback css bindings
		 * @property feedback_success
		 * @type {Boolean|String}
		 * @default false
		 */
		feedbackSuccess:false,
		/**
		 * Feedback css bindings
		 * @property feedback_warning
		 * @type {Boolean|String}
		 * @default false
		 */
		feedbackWarning:false,
		/**
		 * Feedback css bindings
		 * @property feedback_error
		 * @type {Boolean|String}
		 * @default false
		 */
		feedbackError: false,
		/**
		 * @property multiplesInline
		 * @type {Boolean|String}
		 * @default false
		 */
		multiplesInline:false,
		/**
		 * set as true to activate or object to activate and configure
		 * @property inplaceEdit
		 * @type {Boolean|Object}
		 * @default false
		 */
		inplaceEdit:false,
		/**
		 * @property showInplaceTitle
		 * @type {Boolean}
		 * @default true
		 */
		showInplaceTitle:true,
		/**
		 * adds html5 required attribute
		 * @property required
		 * @type {Boolean}
		 * @default false
		 */
		required:false,
		/**
		 * if none specified then the name is set to that of this.type
		 * @property name
		 * @type {String}
		 * @default &quot;&quot;
		 */
		name:&quot;&quot;,
		/**
		 * @property inputAddonPosition
		 * @type {String}
		 * @default &quot;left&quot;
		 */
		inputAddonPosition: &quot;left&quot;,
		/**
		 * @property _inputAddonTplId
		 * @private
		 * @type {String}
		 * @default null
		 */
		_inputAddonTplId: null,
		/**
		 * glyphicon to so in the inputAddon box
		 * @property iconClass
		 * @type {String|false}
		 * @default false
		 */
		iconClass: false,
		/**
		 * @property _lastValue
		 * @private
		 * @type {String}
		 * @default null
		 */
		_lastValue: null,
		/**
		 * if true - att &quot;navbar-item&quot; class to the button
		 * @property navbarItem
		 * @type {Boolean}
		 * @default false
		 */
		navbarItem: false,
		/**
		 * @method init
		 * @return .callParent(arguments)
		 */
		init: function(){
			var me = this;

				me.on(&quot;rendered&quot;, function(){
					var inplaceConf;
					
					if(me.inplaceEdit){
						inplaceConf = {
								fieldItem: me,
								showInplaceTitle: true
						};
						
						if( $.isPlainObject( me.inplaceEdit ) ){
							inplaceConf = Firebrick.utils.overwrite(inplaceConf, me.inplaceEdit);
						}
						
						Firebrick.create(&quot;Firebrick.ui.fields.plugins.InplaceEdit&quot;, inplaceConf);	
					}
					
					if(me.required){
						me.onChange();
					}
				});				
			
			
			return me.callParent(arguments);
		},
		
		/**
		 * this functions is called when the component is rendered and determines what to do when the component is changed
		 * @method onChange
		 */
		onChange: function(){
			var me = this,
				el = me.getElement(),
				container;

			if(me.required){
				if(el &amp;&amp; el.length){
					el.change(function(){
						container = el.closest(&quot;.form-group&quot;);
						if(container.length){
							
							if(el.is(&quot;:invalid&quot;)){
								me.setStatus(&quot;error&quot;, container);
							}else{
								me.setStatus(&quot;success&quot;, container);
							}
							
						}
						
					});
				}
			}
			
		},
		
		/**
		 * use this to set a particular BS3 has-* status - e.g &quot;has-error&quot;
		 * @method setStatus
		 * @param name {String} &quot;error&quot;, &quot;warning&quot;, &quot;success&quot;
		 * @param element {jQuery Object} [default=getElement()] - set if you wish to set the status to a different element - e.g. like the components parent 
		 * @return self {Object}
		 */
		setStatus: function(status, element){
			var me = this,
				el = element || me.getElement();
			
			if(el &amp;&amp; el.length){
				
				if(status){
					
					el.attr(&quot;class&quot;, function(i, str){
						str = str.replace(/(^|\s)has-\S+/g, &#x27;&#x27;);	//replace all classes that start with &quot;has-&quot;
						str += &quot; has-feedback&quot;;	//add the base class again (deleted by line above)
						return str;
					});
					
					el.addClass(&quot;has-&quot; + status);
					
				}
				
			}
			
			return me;
		},
		
		/**
		 * @method containerBindings
		 * @return {Object}
		 */
		containerBindings:function(){
			var me = this,
				obj = { 
					css: {
						&quot;&#x27;has-success&#x27;&quot;: me.feedbackSuccess,
						&quot;&#x27;has-warning&#x27;&quot;: me.feedbackWarning,
						&quot;&#x27;has-error&#x27;&quot;: me.feedbackError,
						&quot;&#x27;has-feedback&#x27;&quot;: me.feedbackSuccess || me.feedbackWarning || me.feedbackError,
						&quot;&#x27;sr-only&#x27;&quot;: me.srOnly
					}
				};
			
			if( me.containerCSS ){
				obj.css[ me.parseBind( me.containerCSS ) ] = true;
			}
			
			if(me.align){
				obj.css[me.parseBind(&quot;pull-&quot; + me.align)] = true;
			}
			
			if(me.inputSize){
				obj.css[me.parseBind(&quot;form-group-&quot; + me.inputSize)] = me.inputSize ? true : false;	
			}
			
			if(me.navbarItem){
				obj.css[&quot;&#x27;fb-ui-navbar-field&#x27;&quot;] = true; 
			}
			
			return obj;
		},
		/**
		 * @method helpBlockBindings
		 * @return {Object}
		 */
		helpBlockBindings: function(){
			var me = this;
			return {
				text: me.textBind(me.helpText)
			};
		},
		/**
		 * @method feedbackBindings
		 * @return {Object}
		 */
		feedbackBindings:function(){
			var me = this,
				binds = {css:{}},
				rootClass = &quot;&#x27;glyphicon-&quot;;
			if(me.containerBindings &amp;&amp; me.containerBindings.css){
				$.each(me.containerBindings.css, function(k,v){
					if(v){
						switch(k){
							case &quot;&#x27;has-success&#x27;&quot;:
								binds.css[rootClass + &quot;ok&#x27;&quot;] = v;
								break;
							case &quot;&#x27;has-warning&#x27;&quot;:
								binds.css[rootClass + &quot;warning&#x27;&quot;] = v;
								break;
							case &quot;&#x27;has-error&#x27;&quot;:
								binds.css[rootClass + &quot;remove&#x27;&quot;] = v;
								break;
						}
					}
				});
			}
			return binds;
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				type =  me.parseBind( me.type ),
				obj = me.callParent(arguments);
			
			obj.attr.disabled = me.disabled;
			obj.attr.readonly = me.readOnly; 
			if(!me.inplaceEdit){
				obj.attr.type = type;	
			}
			obj.attr.name = me.name ?  me.parseBind( me.name ) : type;
			
			obj.value = me.value;
			
			if(me.inplaceEdit){
				
				obj.text = &quot;Firebrick.getById(&#x27;&quot; + me.getId() + &quot;&#x27;)._getInplaceEditText( $data )&quot;;
				obj.css[&quot;&#x27;fb-ui-inplaceedit&#x27;&quot;] = true;

			}else{
				if(me.formControlClass){
					obj.css[me.parseBind(me.formControlClass)] = true;
				}
				obj.attr.placeholder = me.textBind( me.placeholder );
			}
			
			if(me.required){
				obj.attr.required = true;
			}
			
			if(me.inputSize){
				obj.css[ me.parseBind(&quot;input-&quot; + me.inputSize) ] = true;
			}
			
			return obj;
		},
		/**
		 * @method inputAddonBindings
		 * @return {Object}
		 */
		inputAddonBindings: function(){
			var me = this,
				obj = {
					css:{}
				};
			if(me.inputAddon){
				if($.isPlainObject(me.inputAddon)){
					
					//button has been loaded
					if(me.inputAddon.sName === &quot;button.button&quot;){
						//the addon is a button
						//remove if exists
						me.inputAddonClass = me.inputAddonClass.replace(&quot;input-group-addon&quot;, &quot;&quot;);
						//add the correct class
						me.inputAddonClass += &quot; input-group-btn&quot;;
					}
				}
				obj.css[me.parseBind(me.inputAddonClass)] = true;
			}
			return obj;
		},
		/**
		 * @method inputAddonSpanBindings
		 * @return {Object}
		 */
		inputAddonSpanBindings: function(){
			var me = this,
				obj = {css:{}};
			
			if(me.inputAddon &amp;&amp; typeof me.inputAddon === &quot;string&quot;){
				obj.text = me.textBind(me.inputAddon);
			}
			
			obj.css[me.parseBind(me.glyphiconClass)] = true;
			
			if(me.iconClass){
				obj.css[me.parseBind(me.iconClass)] = true;	
			}
			
			return obj;
		},
		/**
		 * @method inputAddonTemplateBindings
		 * @return {Object}
		 */
		inputAddonTemplateBindings: function(){
			var me = this,
				obj = {
					template:me.parseBind(me.getAddonId()),
					data: &quot;$data&quot;
				};
			return obj;
		},
		/**
		 * 
		 * @method getAddonId
		 * @return {String} unique id
		 */
		getAddonId: function(){
			var me = this;
			
			if(!me._inputAddonTplId){
				me._inputAddonTplId = &quot;fb-inputaddon-&quot; + Firebrick.utils.uniqId();
			}
			
			return me._inputAddonTplId;
		},
		/**
		 * @method labelBindings
		 * @return {Object}
		 */
		labelBindings: function(){
			var me = this,
				obj = {
					text: me.textBind( me.label ),
					css:{
						&quot;&#x27;control-label&#x27;&quot;: me.controlLabel
					}
				};
			if(me.horizontal){
				obj.css[ me.parseBind(&quot;col-&quot; + me.columnSize + &quot;-&quot; + me.labelWidth )] = me.horizontal;
			}
			return obj;
		},
		/**
		 * @method inputContainerBindings
		 * @return {Object}
		 */
		inputContainerBindings: function(){
			var me = this,
				obj = {
					css:{}
				};
			if(me.horizontal){
				obj.css[ me.parseBind( &quot;col-&quot; + me.columnSize + &quot;-&quot; + me.inputWidth ) ] = me.horizontal;
			}

			return obj;
		},
		/**
		 * @method fieldBindings
		 * @return {Object}
		 */
		fieldBindings: function(){
			var me = this, 
				obj = {
					css:{
						&quot;&#x27;input-group&#x27;&quot;: me.inputAddon ? true : false
					}
			}
			
			if(me.align){
				obj.css[me.parseBind(&quot;pull-&quot; + me.align)] = true;
			}
			
			return obj;
		},
		/**
		 * @method getValue
		 * @return {Any}
		 */
		getValue: function(){
			var me = this;
			return me.getElement().val();
		},
		/**
		 * @method setValue
		 * @event changed
		 * @return self
		 */
		setValue: function(value){
			var me = this,
				oldValue = me.getValue(),
				newValue;

			me._lastValue = oldValue;
			me._setValue(value);
			
			newValue = me.getValue();
			
			me._checkChange(newValue, oldValue);
			
			return me;
		},
		/**
		 * @event changed( newValue, oldValue )
		 * @method _checkChange
		 * @private
		 * @param newVal {Any}
		 * @param oldVal {Any}
		 * @param silent {Boolean} default=false
		 * @return {Boolean}
		 */
		_checkChange: function(newVal, oldVal, silent){
			var me = this;
			
			if( me._hasChange(newVal, oldVal) ){
				if(!silent){
					me.fireEvent(&quot;changed&quot;, newVal, oldVal);
				}
				return true;
			}
			
			return false;
		},
		/**
		 * @method _hasChange
		 * @private
		 * @param newVal {Any}
		 * @param oldVal {Any}
		 */
		_hasChange: function(newVal, oldVal){
			return newVal !== oldVal;
		},
		/**
		 * @method _setValue
		 * @param value
		 * @private
		 */
		_setValue: function(value){
			var me = this,
				$el = me.getElement();
			
			$el.val( value );
			
			if(me.inplaceEdit){
				me._setValueInplaceEdit( value );
			}
			
			return me;
		},
		/**
		 * @method _setValueInplaceEdit
		 * @param value
		 * @private
		 */
		_setValueInplaceEdit: function( value ){
			var me = this,
				$el = me.getElement();
			$el.text( me._getInplaceEditText( Firebrick.utils.dataFor( $el[0] ) ) );
			$el.trigger(&quot;change&quot;);
			return me;
		},
		/**
		 * @method _getInplaceEditText
		 * @private
		 * @param $data {KO Object}
		 * @return {String}
		 */
		_getInplaceEditText: function( $data ){
			var me = this,
				$el = me.getElement(),
				value = $el ? me.getValue() : me.value,
				text = &quot;&quot;;
				
			if( value ){
				if( $data.hasOwnProperty( value ) ){
					text = ko.unwrap( $data[ value ] );
				}else{
					text = value;
				}
			}else{
				text = Firebrick.text( me.inplaceEditEmptyText );
			}
				
			return text;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * Base for inputs where multiple options are possible: checkboxes, radio and togglesbuttons for example
 * @module Firebrick.ui.components
 * @extends components.fields.Input
 * @namespace components.common
 * @class MultiplesBase
 */
define(&#x27;Firebrick.ui/common/MultiplesBase&#x27;,[&quot;knockout-mapping&quot;, &quot;../fields/Input&quot;], function(kom){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.common.MultiplesBase&quot;, {
		extend:&quot;Firebrick.ui.fields.Input&quot;,
		/**
		 * @method fieldBindings
		 * @return {Object}
		 */
		fieldBindings:function(){
			var me = this,
				obj = me.callParent(arguments);
			if(!me.inplaceEdit){
				
				obj.withProperties = {
							itemId: &quot;&#x27;fb-ui-id-&#x27; + Firebrick.utils.uniqId()&quot;
						};

				if(me.multiplesInline){
					
					if(!obj.css){
						obj.css = {};
					}
					
					obj.css[ me.parseBind(me.cleanString(me.type)+&quot;-inline&quot;)] = me.multiplesInline;
				}
			}
			
			return obj;
		},
		
		/**
		 * used to check which item should be selected by default
		 * @method _valueChecker
		 * @private
		 * @param $default {Any} optional
		 * @param $data {Any} value of iteration item
		 * @default {Boolean}
		 */
		_valueChecker: function($default, $data){
			var me = this;
			
			if(kom.isMapped($data)){
				$data = kom.toJS($data);
			}
			
			if($.isPlainObject($data)){
				if($data.active){
					//active property wins
					return $.isFunction($data.active) ? $data.active() : $data.active;
				}else if($data.checked){
					return $.isFunction($data.checked) ? $data.checked() : $data.checked;
				}else if($data.value){
					//get the value prop
					$data = $data.value;
				}
			}

			//something to compare too
			if($default){
				//ko function?
				if($.isFunction($default)){
					$default = $default();
				}
				//compare
				return $default === $data;
			}
						
			//just return default
			return me.defaultActive;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.MultiplesBase
 * @namespace components.button
 * @class ToggleButton
 */
define(&#x27;Firebrick.ui/button/ToggleButton&#x27;,[&quot;text!./ToggleButton.html&quot;, &quot;knockout&quot;, &quot;jquery&quot;, &quot;../common/MultiplesBase&quot;], function(subTpl, ko, $){
	&quot;use strict&quot;;
	
	if(!ko.bindingHandlers.toggleRenderer){
		/*
		 * optionsRenderer for togglebuttons
		 * create dynamic css along with static
		 */
		ko.bindingHandlers.toggleRenderer = {
		    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
				var me = Firebrick.ui.getCmp(valueAccessor()),
					currentStyle = &quot;btn-&quot;+me.btnStyle,
					$el = $(element),
					inputId = allBindings().withProperties.inputItemId;

				//ko data bound observable
				inputId = Firebrick.ui.utils.getValue(inputId);
				
				if($el.length){
					if(viewModel){
						if(viewModel.btnStyle){
							//replace element className with the new one defined in the binding
							$el.attr(&quot;class&quot;, function(i, v){
								return v.replace(currentStyle, &quot;btn-&quot; + Firebrick.ui.utils.getValue(viewModel.btnStyle));
							});
						}
						if(viewModel.css){
							$el.addClass(Firebrick.ui.utils.getValue(viewModel.css));
						}
					}
					//add the correct &quot;for&quot; attribute id and the input id
					$el.attr(&quot;for&quot;, inputId);
					$(&quot;&gt; input&quot;, $el).attr(&quot;id&quot;, inputId);
				}
				
		    }
		};
	}
	
	return Firebrick.define(&quot;Firebrick.ui.button.ToggleButton&quot;, {
		extend:&quot;Firebrick.ui.common.MultiplesBase&quot;,
		/**
		 * component alias
		 * @property sName
		 * @type {String}
		 */
		sName: &quot;button.togglebutton&quot;,
		/**
		 * @property subTpl
		 * @type {String} html
		 */
		subTpl:subTpl,
		/**
		 * @property btnGroupClass
		 * @type {Boolean|String}
		 * @default true
		 */
		btnGroupClass:true,
		/**
		 * @property btnClass
		 * @type {Boolean|String}
		 * @default true
		 */
		btnClass: true,
		/**
		 * @property defaultActive
		 * @type {Boolean|String}
		 * @default false
		 */
		defaultActive: false,
		/**
		 * @property dataToggle
		 * @type {Boolean|String}
		 * @default &quot;buttons&quot;
		 */
		dataToggle: &quot;buttons&quot;,
		/**
		 * default, primary, success, danger, warning, info
		 * @property btnStyle
		 * @type {String|false}
		 * @default &quot;primary&quot;
		 */
		btnStyle: &quot;default&quot;,
		/**
		 * lg,md,xs,sm
		 * @property btnSize
		 * @type {String|false}
		 * @default &quot;md&quot;
		 */
		btnSize: &quot;md&quot;,
		/**
		 * options that are to be shown by the toggle button : [{text:&quot;abc&quot;, active:true, config:{btnStyle:&quot;success&quot;}, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]
		 * @property options
		 * @type {String|Array of Objects}
		 * @default &quot;&#x27;&#x27;&quot;
		 */
		options:&quot;&#x27;&#x27;&quot;,
		/**
		 * @property showLabel
		 * @type {Boolean}
		 * @default true
		 */
		showLabel: true,
		/**
		 * @property optionsRenderer
		 * @type {String}
		 * @default &quot;optionsRenderer&quot;
		 */
		optionsRenderer: &quot;optionsRenderer&quot;,
		/**
		 * @method btnGroupBindings
		 * @return {Object}
		 */
		btnGroupBindings: function(){
			var me = this;
			return {
				css:{
					&quot;&#x27;btn-group&#x27;&quot;: me.btnGroupClass
				},
				attr:{
					&quot;&#x27;data-toggle&#x27;&quot;: me.parseBind(me.dataToggle)
				},
				foreach: Firebrick.ui.helper.optionString(me)
			};
		},
		/**
		 * @method toggleInputBindings
		 * @return {Object}
		 */
		toggleInputBindings: function(){
			var me = this;
			return {
				attr:{
					//id attribute is parsed by the toggleRenderer
					name: me.parseBind(me.name)
				},
				value:&quot;$data.value || $data.text ? $data.value || $data.text : $data&quot;
			};
		},
		
		/**
		 * @method toggleLabelBindings
		 * @return {Object}
		 */
		toggleLabelBindings: function(){
			var me = this,
				obj = {
					attr:{
						id: &quot;$data.labelId || &#x27;fb-ui-id-&#x27; + Firebrick.utils.uniqId()&quot;
					},
					withProperties:{
						inputItemId:&quot;$data.id || &#x27;fb-ui-id-&#x27; + Firebrick.utils.uniqId()&quot;
					},
					css:{
						active: &quot;Firebrick.ui.getCmp(&#x27;&quot;+me.getId()+&quot;&#x27;)._valueChecker(&quot;+me.value+&quot;, $data)&quot;
					},
					toggleRenderer: me.parseBind(me.getId()) 
				};

			if(me.btnClass){
				obj.css.btn = true;
			}
			
			if(me.btnStyle){
				obj.css[me.parseBind(&quot;btn-&quot; + me.btnStyle)] = true;
			}
			
			if(me.btnSize){
				obj.css[me.parseBind(&quot;btn-&quot; + me.btnSize)] = true;
			}
			
			return obj;
		},
		/**
		 * @method toggleLabelTextBindings
		 * @return {Object}
		 */
		toggleLabelTextBindings: function(){
			return {
				&quot;text&quot;: &quot;$data.text ? $data.text : $data&quot;
			};
		}
	});
});

define(&#x27;text!Firebrick.ui/common/mixins/tpl/Label.html&#x27;,[],function () { return &#x27;{{?it.labelText}}\r\n&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;labelBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n{{?}}&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @namespace components.common.mixins
 * @class Label
 * @static
 */
define(&#x27;Firebrick.ui/common/mixins/Label&#x27;,[&quot;text!./tpl/Label.html&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.common.mixins.Label&quot;, {
		/**
		 * @property labelTpl
		 * @type {String} html
		 * @default Label.html
		 */
		labelTpl: tpl,
		/**
		 * add Label css classes
		 * @property labelCSS
		 * @type {String}
		 * @default &quot;&quot;
		 */
		labelCSS: &quot;&quot;,
		/**
		 * @property labelText
		 * @type {String}
		 * @default &quot;&quot;
		 */
		labelText:&quot;&quot;,
		/**
		 * @method getLabelTpl
		 */
		getLabelTpl: function(){
			var me = this;
			me.template( &quot;labelTpl&quot; );
			return me.build( &quot;labelTpl&quot; );
		},
		/**
		 * string = &quot;default&quot;, &quot;primary&quot;, &quot;success&quot; &quot;info&quot;, &quot;warning&quot;, &quot;danger&quot;  
		 * @property labelStyle
		 * @type {Boolean|String}
		 * @default &quot;default&quot;
		 */
		labelStyle: &quot;default&quot;,
		/**
		 * @method labelBindings
		 * @return Object
		 */
		labelBindings: function(){
			var me = this, 
				obj = {
						text: me.textBind( me.labelText ),
						css:{
							label: true
						}
					};
			
				if(me.labelStyle){
					obj.css[ me.parseBind( &quot;label-&quot; + me.labelStyle ) ] = true;
				}
				
			if( me.labelCSS ){
				obj.css[ me.parseBind( me.labelCSS ) ] = true;
			}
				
			return obj;
		},
	});
});

define(&#x27;text!Firebrick.ui/nav/Navbar.html&#x27;,[],function () { return &#x27;&lt;nav id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;navbarWrapperBindings\&#x27;)}}&quot;&gt;\r\n\t\t{{?it.showNavbarHeader}}\r\n\t\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;navbarHeaderBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t{{?it.toggleButton}}\r\n\t\t\t\t&lt;button data-bind=&quot;{{=it.dataBind(\&#x27;toggleButtonBindings\&#x27;)}}&quot;&gt;\r\n\t\t         \t&lt;span class=&quot;sr-only&quot; data-bind=&quot;{{=it.dataBind(\&#x27;toggleTextBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t         \t&lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;\r\n\t\t         \t&lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;\r\n\t\t         \t&lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;\r\n\t       \t\t&lt;/button&gt;\r\n       \t\t{{?}}\r\n       \t\t{{?it.showBranding}}\r\n      \t\t\t&lt;a data-bind=&quot;{{=it.dataBind(\&#x27;brandBindings\&#x27;)}}&quot;&gt;{{=it.brandTpl}}&lt;/a&gt;\r\n      \t\t{{?}}\r\n\t\t&lt;/div&gt;\r\n\t\t{{?}}\r\n\t\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;navbarContainerBindings\&#x27;)}}&quot;&gt;\r\n     \t\t{{=it.getItems()}}\r\n     \t&lt;/div&gt;\r\n\t&lt;/div&gt;\r\n&lt;/nav&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.nav
 * @uses components.common.mixins.Items
 * @class Base
 */
define(&#x27;Firebrick.ui/nav/Base&#x27;,[&quot;../common/Base&quot;, &quot;../common/mixins/Items&quot;], function(){
	
	&quot;use strict&quot;;
	
	return Firebrick.define(&quot;Firebrick.ui.nav.Base&quot;, {
		extend:&quot;Firebrick.ui.common.Base&quot;,
		mixins:&quot;Firebrick.ui.common.mixins.Items&quot;
	});
	
});

define(&#x27;text!Firebrick.ui/display/List.html&#x27;,[],function () { return &#x27;&lt;!-- ko {{=it.dataBind(\&#x27;listTemplateBindings\&#x27;)}} --&gt;&lt;!-- /ko --&gt;\r\n\r\n&lt;script type=&quot;text/html&quot; id=&quot;{{=it._getTplId()}}&quot;&gt;\r\n\t&lt;!-- ko {{=it.dataBind(\&#x27;virtualContainerBindings\&#x27;)}} --&gt;\r\n\t\t&lt;{{=it.listType}} data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t\t\t&lt;li data-bind=&quot;{{=it.dataBind(\&#x27;listItemBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t\t{{?it._preNode}}\r\n\t\t\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;listItemNodeBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t\t{{?}}\r\n\t\t\t\t{{=it.b(it.preItemTpl)}}\r\n\t\t\t\t\t{{?it.linkedList}}\r\n\t\t\t\t\t\t&lt;a data-bind=&quot;{{=it.dataBind(\&#x27;listLinkBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t\t\t{{?}}\r\n\t\t\t\t\t\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;listItemTextBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\r\n\t\t\t\t\t\t\t{{?it.badge}}\r\n\t\t\t\t\t\t\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;badgeBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t\t\t\t\t{{?}}\r\n\r\n\t\t\t\t\t{{?it.linkedList}}\r\n\t\t\t\t\t\t&lt;/a&gt;\r\n\t\t\t\t\t{{?}}\r\n\t\t\t\t{{=it.b(it.postItemTpl)}}\r\n\t\t\t\t&lt;!-- ko {{=it.dataBind(\&#x27;childrenBindings\&#x27;)}} --&gt;&lt;!-- /ko --&gt;\r\n\t\t\t&lt;/li&gt;\r\n\t\t&lt;/{{=it.listType}}&gt;\r\n\t&lt;!-- /ko --&gt;\r\n&lt;/script&gt;\r\n&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.display
 * @class List
 */
define(&#x27;Firebrick.ui/display/List&#x27;,[&quot;text!./List.html&quot;, &quot;knockout&quot;, &quot;jquery&quot;, &quot;../common/Base&quot;,  &quot;../common/mixins/Items&quot;, &quot;../common/mixins/Badges&quot;], function(tpl, ko, $){
	&quot;use strict&quot;;
	
	if(!ko.bindingHandlers.listRenderer){
		/*
		 * optionsRenderer for list
		 * create dynamic css along with static
		 */
		ko.virtualElements.allowedBindings.listRenderer = true;
		ko.bindingHandlers.listRenderer = {
		    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
		    	var childNodes = ko.virtualElements.childNodes(element),
		    		node,
		    		ul;

		    	for(var i = 0, l = childNodes.length; i&lt;l; i++){
		    		node = childNodes[i];
		    		if(node instanceof HTMLUListElement){
		    			//list item
		    			$(node).attr(&quot;id&quot;, valueAccessor());
		    		}
		    	}
		    	
		    }
		};
	}
	
	if(!ko.bindingHandlers.listItemRenderer){
		ko.virtualElements.allowedBindings.listItemRenderer = true;
		ko.bindingHandlers.listItemRenderer = {
		    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
				var $el = $(element);
	
				if($el.length){
					if(viewModel){
						if(viewModel.css){
							$el.addClass(Firebrick.ui.utils.getValue(viewModel.css));
						}
					}
				}
		    }
		};
	}
	
	return Firebrick.define(&quot;Firebrick.ui.display.List&quot;, {
		extend:&quot;Firebrick.ui.common.Base&quot;,
		mixins:[&quot;Firebrick.ui.common.mixins.Items&quot;, &quot;Firebrick.ui.common.mixins.Badges&quot;],
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;fb-ui-list&quot;
		 */
		sName:&quot;display.list&quot;,
		/**
		 * @property tpl
		 * @type {String} html
		 * @default components/display/List.html
		 */
		tpl:tpl,
		/**
		 * type of list, ul or ol
		 * @property listType
		 * @type {String}
		 * @default &quot;ul&quot;
		 */
		listType:&quot;ul&quot;,
		/**
		 * is a list group?
		 * @property listGroup
		 * @type {Boolean|String}
		 * @default true
		 */
		listGroup:false,
		/**
		 * defaults to true but only comes into effect with property &quot;listGroup&quot;
		 * @property listItemGroupClass
		 * @type {Boolean|String}
		 * @default true
		 */
		listItemGroupClass:true,
		/**
		 * items to parse into the list
		 * @property data
		 * @type {String}
		 * @default null
		 */
		data:null,
		/**
		 * unstyled - applies list-unstyled css class to list container (ul/ol)
		 * @property unstyled
		 * @type {boolean}
		 * @default false
		 */
		unstyled:false,
		/**
		 * inject a template into the &lt;li&gt;{preItemTpl}&lt;span&gt;&lt;/span&gt;{postItemTpl}&lt;/li&gt; item
		 * @property preItemTpl
		 * @type {String|Function} html
		 * @default &quot;&quot;
		 */
		preItemTpl:&quot;&quot;,
		/**
		 * inject a template into the &lt;li&gt;{preItemTpl}&lt;span&gt;&lt;/span&gt;{postItemTpl}&lt;/li&gt; item
		 * @property postItemTpl
		 * @type {String|Function} html
		 * @default &quot;&quot;
		 */
		postItemTpl:&quot;&quot;,
		/**
		 * wrap the list element content in a &lt;a&gt;&lt;/a&gt; link
		 * @property linkedList
		 * @type {Boolean}
		 * @default false
		 */
		linkedList: false,
		/**
		 * @method virtualContainerBindings
		 * @return {Object}
		 */
		virtualContainerBindings: function(){
			return {&quot;if&quot;: &quot;$data &amp;&amp; $data.length&quot;};
		},
		/**
		 * set to true to add attribute [fb-ignore-router=true] to all links - these links are then ignored by the history api (Firebrick.router.history)
		 * @property ignoreRouter
		 * @type {Boolean}
		 * @default false
		 */
		ignoreRouter: false,
		/**
		 * @property collapsedCSS
		 * @type {String}
		 * @default &quot;fb-ui-listitem-collapsed&quot;
		 */
		collapsedCSS: &quot;fb-ui-listitem-collapsed&quot;,
		/**
		 * set to false to remove node span before text
		 * @property preNode
		 * @type {Boolean}
		 * @default true
		 */
		preNode: true,
		/**
		 * used by nodeRenderer()
		 * @method nodeCSSRenderer
		 * @param $data {ko bindings context}
		 * @return {Object} passed to $element.addClass()
		 */
		nodeCSSRenderer: function( $data ){
			var me = this,
				obj = {},
				children = $data.children;
			
			obj[&quot;fb-ui-node-action&quot;] = true;
			
			if(children){
				
				obj.glyphicon = true;
				
				if(children.expandable !== false){
					obj[&quot;fb-ui-list-expandable-node&quot;] = true;
				}
				
			}else{
				obj[&quot;fb-ui-hidden&quot;] = true;
			}
			
			return obj;
		},
		/**
		 * @method nodeRenderer 
		 * @param $element {jQuery Object}
		 * @param bindingContext {KO Context Object]
		 */
		nodeRenderer: function($element, bindingContext ){
			var me = this,
				$data = bindingContext.$data,
				children = $data.children;
			
		},
		/**
		 * @method init
		 */
		init: function(){
			var me = this;
			
			me.on(&quot;rendered&quot;, function(){
				me._initUIEvents();
			});
			
			return me.callParent( arguments );
		},
		/**
		 * @method _initUIEvents
		 * @private
		 */
		_initUIEvents: function(){
			var me = this,
				$el = me.getElement(),
				$collapsibles = $(&quot;.fb-ui-list-expandable-node&quot;, $el),
				func = function(){
					return me._nodeClick( this, arguments );
				}

			if( $collapsibles.length ){
				$collapsibles.on(&quot;click&quot;, func);
				me.on(&quot;destroy&quot;, function(){
					$collapsibles.off(&quot;click&quot;, func);
				});
			}
		},
		/**
		 * @method _nodeClick
		 * @private
		 * used by jQuery on click event
		 */
		_nodeClick: function(element, clickArgs){
			var me = this,
				$el = $(element),
				$node = $el.closest(&quot;li.fb-ui-listitem-parent&quot;),
				args = Firebrick.utils.argsToArray( clickArgs );
			
			args.unshift( &quot;nodeClicked&quot; );	//add to the begining
			args.push( $node ); //add to end
			
			me.toggleCollapse( $node );
			
			return me.fireEvent( &quot;nodeClicked&quot;, args);
		},
		/**
		 * @method toggleCollapse
		 * @param $node {jQuery Object} li node item
		 */
		toggleCollapse: function( $node ){
			var me = this,
				$ul = $(&quot;&gt; ul&quot;, $node);
			
			if($ul.length){
				if( $ul.is(&quot;:visible&quot;) ){
					me.collapseNode( $node );
				}else{
					me.expandNode( $node );
				}
			}
		},
		/**
		 * @method collapseNode
		 * @param $node {jQuery Object} li node item
		 */
		collapseNode: function( $node ){
			var me = this,
				$ul = $(&quot;&gt; ul&quot;, $node);
			
			if($ul.length){
				$ul.hide();
				me.fireEvent(&quot;nodeCollapsed&quot;, $node, $ul);
				$node.addClass( me.collapsedCSS );
			}
		},
		/**
		 * @method expandNode
		 * @param $node {jQuery Object} li node item
		 */
		expandNode: function( $node ){
			var me = this,
				$ul = $(&quot;&gt; ul&quot;, $node);
			
			if($ul.length){
				$ul.show();
				me.fireEvent(&quot;nodeExpanded&quot;, $node, $ul);
				$node.removeClass( me.collapsedCSS );
			}
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);

			if(me.listGroup){
				obj.css[&quot;&#x27;list-group&#x27;&quot;] = me.listGroup;
			}
			if(me.unstyled){
				obj.css[&quot;&#x27;fb-ui-list-unstyled&#x27;&quot;] = me.unstyled;
			}
			if(me.items){
				obj.foreach = &quot;$data&quot;;
			}
			
			obj.visible = &quot;$parent.expanded === false ? false : true&quot;;
			
			return obj;
		},
		/**
		 * @method listItemBindings
		 * @return {Object}
		 */
		listItemBindings: function(){
			var me  = this,
				obj = {
					css:{
						&quot;&#x27;fb-ui-listitem-parent&#x27;&quot;: &quot;$data.children ? true : false&quot;,
						&quot;&#x27;fb-ui-listitem-haschildren&#x27;&quot;: &quot;$data.children ? true : false&quot;
					}, 
					attr:{}
				};
			
			if(me.listGroup &amp;&amp; me.listItemGroupClass){
				obj.css[&quot;&#x27;list-group-item&#x27;&quot;] = me.listItemGroupClass;
			}
			
			obj.css[ me.parseBind( me.collapsedCSS ) ] = &quot;$data.children &amp;&amp; $data.expandable !== false &amp;&amp; $data.expanded === false ? true : false&quot;;
			
			obj.css.divider = &quot;$data === &#x27;|&#x27; || $data.divider ? true : false&quot;;
			obj.attr.id = &quot;$data.id || &#x27;fb-ui-listitem-&#x27; + Firebrick.utils.uniqId()&quot;;
			obj.listItemRenderer = true;
			
			
			return obj;
		},
		/**
		 * @method listItemTextBindings
		 * @return {Object}
		 */
		listItemTextBindings:function(){
			var me = this;
			return {
				value: &quot;$data.hasOwnProperty(&#x27;value&#x27;) ? $data.value : $data&quot;,
				htmlWithBinding: &quot;$data.renderer ? $data.renderer($data, $context) : ($data.text ? $data.text : $data)&quot;,
				css: {
					&quot;&#x27;fb-ui-listitem-text&#x27;&quot;: true
				} 
			};
		},
		/**
		 * @method listTemplateBindings
		 * @return {Object}
		 */
		listTemplateBindings: function(){
			var me = this;
			return {
				template: {
					name:  me.parseBind(me._getTplId()),
					data: $.isArray(me.items) ? &quot;Firebrick.ui.getCmp(&#x27;&quot; + me.getId() + &quot;&#x27;).items&quot; : me.items,
				},
				listRenderer: me.parseBind( me.getId() )
			};
		},
		/**
		 * @private
		 * @method _getTplId
		 * @return {String}
		 */
		_getTplId: function(){
			return &quot;fb-ui-tpl-&quot; + this.getId(); 
		},
		/**
		 * @method childrenBindings
		 * @return {Object}
		 */
		childrenBindings: function(){
			var me = this;
			return {
				template: {
					name:  me.parseBind( me._getTplId() ),
					data: &quot;$data.children&quot;
				}
			};
		},
		/**
		 * @method listLinkBindings
		 * @return {Object}
		 */
		listLinkBindings: function(){
			var me = this,
				obj = {
					attr:{
						href: &quot;Firebrick.ui.helper.linkBuilder( $data )&quot;,
						&quot;&#x27;data-value&#x27;&quot;: &quot;$data.hasOwnProperty(&#x27;value&#x27;) ? $data.value : $data&quot;
					},
					value: &quot;$data.hasOwnProperty(&#x27;value&#x27;) ? $data.value : $data&quot;,
			};
			obj.attr[&quot;&#x27;data-target&#x27;&quot;] = &quot;$data.dataTarget ? $data.dataTarget : false&quot;;
			obj.attr[&quot;&#x27;fb-ignore-router&#x27;&quot;] = &quot;$data.hasOwnProperty( &#x27;ignoreRouter&#x27; ) ? $data.ignoreRouter : &quot; + me.ignoreRouter;
			return obj;
		},
		/**
		 * @method listItemNodeBindings
		 * @return {Object}
		 */
		listItemNodeBindings: function(){
			var me = this,
				obj = {
					css: &quot;Firebrick.getById(&#x27;&quot; + me.getId() + &quot;&#x27;).nodeCSSRenderer( $data )&quot;
				};
			
			return obj;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.display.List
 * @namespace components.nav
 * @class List
 */
define(&#x27;Firebrick.ui/nav/List&#x27;,[&quot;../display/List&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.nav.List&quot;, {
		extend: &quot;Firebrick.ui.display.List&quot;, 
		sName:&quot;nav.list&quot;,
		unstyled:true,
		linkedList: true,
		/**
		 * whether navbar-nav class is applied to list
		 * @property navbarNavClass
		 * @type {Boolean}
		 * @default true
		 */
		navbarNavClass: true,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			if(me.navbarNavClass){
				obj.css[&quot;&#x27;navbar-nav&#x27;&quot;] = true;
			}

			obj.css.nav = true;
			
			return obj;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.nav.Base
 * @namespace components.nav
 * @class Navbar
 */
define(&#x27;Firebrick.ui/nav/Navbar&#x27;,[&quot;text!./Navbar.html&quot;, &quot;./Base&quot;, &quot;./List&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.nav.Navbar&quot;, {
		extend:&quot;Firebrick.ui.nav.Base&quot;,
		tpl:tpl,
		sName:&quot;nav.navbar&quot;,
		/**
		 * passed on to the toolbar items (direct children only)
		 * @property toolbarDefaults
		 * @type {Object}
		 * @default {Object} {
		 * 		navbarItem: true
		 * }
		 */
		defaults:{
			navbarItem: true
		},
		/**
		 * false to deactivate
		 * @property navTypeClass
		 * @type {Boolean|String} string: navbar-fixed-top, navbar-static-top, navbar-fixed-top, navbar-fixed-bottom, navbar-inverse (navbarDefaultClass=false)
		 * @default &quot;&#x27;navbar-static-top&#x27;&quot;
		 */
		navTypeClass: &quot;navbar-static-top&quot;,
		/**
		 * whether &quot;navbar-default&quot; is used
		 * @property navbarDefaultClass
		 * @type {Boolean}
		 * @default true
		 */
		navbarDefaultClass: true,
		/**
		 * whether &quot;navbar&quot; css class is used
		 * @property navbarClass
		 * @type {Boolean}
		 * @default true
		 */
		navbarClass:true,
		/**
		 * whether &quot;navbar-form&quot; css class is used
		 * @property navbarFormClass
		 * @type {Boolean}
		 * @default true
		 */
		navbarFormClass: true,
		/**
		 * css class: navbar-header
		 * @property navbarHeaderClass
		 * @type {Boolean}
		 * @default true
		 */
		navbarHeaderClass:true, 
		/**
		 * if false then the navigation won&#x27;t collapse to the small menu button
		 * @property toggleButton
		 * @type {Boolean}
		 * @default true
		 */
		toggleButton: true,
		/**
		 * @property toggleText
		 * @type {String}
		 * @default &quot;Toggle navigation&quot;
		 */
		toggleText: &quot;Toggle navigation&quot;,
		/**
		 * @property brandClass
		 * @type {Boolean|String}
		 * @default true
		 */
		brandClass: true,
		/**
		 * false to deactivate
		 * @property brandLink
		 * @type {Boolean|String}
		 * @default &quot;/&quot;
		 */
		brandLink: &quot;/&quot;,
		/**
		 * brand text - false to show none or if you wish to use brandTpl instead
		 * @property brandText
		 * @type {Boolean|String}
		 * @default &quot;Firebrick.ui&quot;
		 */
		brandText:&quot;Firebrick.ui&quot;,
		/**
		 * false to deactivate
		 * @property brandTpl
		 * @type {Boolean|String}
		 * @default false
		 */
		brandTpl:false,
		/**
		 * data to populate navigation with
		 * @property data
		 * @type {String}
		 * @default null
		 */
		data:null,
		/**
		 * overriding parent
		 * @property listGroupClass
		 * @default false
		 */
		listGroupClass:false,
		/**
		 * sets nav &amp;&amp; nav-bar css classes to the list container
		 * @property navClass
		 * @type {String|Boolean}
		 * @default true
		 */
		navClass: true,
		/**
		 * @property showNavbarHeader
		 * @type {Boolean}
		 * @default true
		 */
		showNavbarHeader: true,
		/**
		 * @property showBranding
		 * @type {Boolean}
		 * @default true
		 */
		showBranding: true,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
		
			obj.attr.role = &quot;&#x27;navigation&#x27;&quot;;
			obj.css[&quot;&#x27;navbar-default&#x27;&quot;] = me.navbarDefaultClass;
			obj.css.navbar = me.navbarClass;
			
			if(me.navTypeClass){
				obj.css[ me.parseBind(me.navTypeClass) ] = true;
			}
			
			return obj;
		},
		/**
		 * @method brandBindings
		 * @return {Object}
		 */
		brandBindings: function(){
			var me = this,
				obj = {
					css:{},
					attr:{}
				};
			
			if(me.brandLink !== false){
				obj.attr.href =  me.parseBind( me.brandLink );
			}
			
			if(me.brandClass){
				obj.css[&quot;&#x27;navbar-brand&#x27;&quot;] = me.brandClass;
			}
			if(me.brandText &amp;&amp; !me.brandTpl){
				obj.text = me.parseBind(me.brandText);
			}
			return obj;
		},
		/**
		 * overriding parent
		 * @method listItemBindings
		 * @return {Object}
		 */
		listItemBindings: function(){
			return {
					css: {
						active: &quot;$data.active ? $data.active : false&quot;
					}
				};
		},
		/**
		 * @method navbarHeaderBindings
		 * @return {Object}
		 */
		navbarHeaderBindings: function(){
			var me = this,
				obj = {css:{}};
			if(me.navbarHeaderClass){
				obj.css[&quot;&#x27;navbar-header&#x27;&quot;] = me.navbarHeaderClass;
			}
			return obj;
		},
		/**
		 * @method navbarContainerBindings
		 * @return {Object}
		 */
		navbarContainerBindings: function(){
			var me = this,
				obj = {
						attr:{
							id:  me.parseBind( &quot;fb-nav-&quot; + me.getId() )
						},
						css:{}
					};
			if(me.toggleButton){
				obj.css.collapse = true;
				obj.css[&quot;&#x27;navbar-collapse&#x27;&quot;] = true;
			}
			
			if(me.navbarFormClass){
				obj.css[&quot;&#x27;navbar-form&#x27;&quot;] = true;
			}
			
			return obj;
		},
		/**
		 * @method toggleTextBindings
		 * @return {Object}
		 */
		toggleTextBindings: function(){
			var me = this;
			return {
				text: me.textBind( me.toggleText )
			};
		},
		/**
		 * @method toggleButtonBindings
		 * @return {Object}
		 */
		toggleButtonBindings: function(){
			var me = this,
				id = &quot;fb-nav-&quot; + me.getId() + &quot;&#x27;&quot;,
				obj = {
					attr:{
						type: &quot;&#x27;button&#x27;&quot;,
						&quot;&#x27;data-toggle&#x27;&quot;: &quot;&#x27;collapse&#x27;&quot;,
						&quot;&#x27;data-target&#x27;&quot;: &quot;&#x27;#&quot; + id,
						&quot;&#x27;aria-expanded&#x27;&quot;: false,
						&quot;&#x27;aria-controls&#x27;&quot;: &quot;&#x27;&quot; + id
					},
					css:{
						collapsed: true,
						&quot;&#x27;navbar-toggle&#x27;&quot;: true
					}
				};
			
			return obj;
		},
		/**
		 * @method navbarWrapperBindings
		 * @return {Object}
		 */
		navbarWrapperBindings: function(){
			return {
				css:{
					&quot;container&quot;: true
				}
			};
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.nav.Navbar
 * @namespace components.nav
 * @class Toolbar
 */
define(&#x27;Firebrick.ui/nav/Toolbar&#x27;,[&quot;./Navbar&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.nav.Toolbar&quot;, {
		extend:&quot;Firebrick.ui.nav.Navbar&quot;,
		sName:&quot;nav.toolbar&quot;,
		showBranding:false,
		/**
		 * possible positions: top, bottom
		 * @property position
		 * @type {String}
		 * @default &quot;top&quot;
		 */
		position: &quot;top&quot;,
		init:function(){
			var me = this;
			
			me.navTypeClass = &quot;navbar-fixed-&quot; + me.position;
			
			return me.callParent(arguments);
		},
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.css[&quot;&#x27;fb-ui-toolbar&#x27;&quot;] = true;
			
			return obj;
		},
		navbarContainerBindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.css[&quot;&#x27;navbar-nav&#x27;&quot;] = false;
			obj.css[&quot;&#x27;fb-ui-navbar&#x27;&quot;] = true;
			obj.css[&quot;&#x27;form-horizontal&#x27;&quot;] = true;
			
			return obj;
		},
		/**
		 * @method navbarWrapperBindings
		 * @return {Object}
		 */
		navbarWrapperBindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			if(obj.css.container){
				delete obj.css.container;
			}
			
			obj.css[&quot;&#x27;container-fluid&#x27;&quot;] = true;
			
			return obj;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @namespace components.common.mixins
 * @class Toolbars
 * @static
 */
define(&#x27;Firebrick.ui/common/mixins/Toolbars&#x27;,[&quot;jquery&quot;, &quot;./Items&quot;, &quot;Firebrick.ui/nav/Toolbar&quot;], function($){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.common.mixins.Toolbars&quot;, {
		/**
		 * passed on to the toolbar items (direct children only)
		 * @property _toolbarDefaults
		 * @private
		 * @type {Object}
		 * @default {Object} {
		 * 		navbarItem: true
		 * }
		 */
		_toolbarDefaults:{
			navbarItem: true
		},
		/**
		 * use this to provide the given panel with toolbars
		 * @example
		 * 	toolbar:[{
		 * 		position: &quot;top&quot;,
		 * 		items: [{...}]
		 * 	}]
		 * @example
		 * 	toolbar:[{
		 * 		position: &quot;top&quot;,
		 * 		items: [{...}]
		 * 	},{
		 * 		position: &quot;bottom&quot;,
		 * 		items: [{...}]
		 * 	}]
		 * @property toolbars
		 * @type {Array of Objects}
		 * @default null
		 */
		toolbars:null,
		/**
		 * add css classes and other configuration to the container
		 * @method toolbarContainer
		 * @param obj {Object} obj that is later pass to the binder
		 * @return {Object}
		 */
		toolbarContainer: function(obj){
			var me = this,
				toolbarPosition;
			
			if(me.toolbars &amp;&amp; $.isArray(me.toolbars)){
				
				obj.css[&quot;&#x27;fb-ui-toolbar-container&#x27;&quot;] = true;
				
				for(var i = 0, l = me.toolbars.length; i&lt;l; i++){
					toolbarPosition = me.toolbars[i].position;
					if(toolbarPosition){
						obj.css[ me.parseBind(&quot;fb-ui-toolbar-&quot; + toolbarPosition) ] = true;
					}
				}
			}
			return obj;
		},
		
		/**
		 * @method getToolbars
		 * @return {html}
		 */
		getToolbars: function(){
			var me = this,
				toolbars = me.toolbars,
				tbItem,
				html = &quot;&quot;,
				items;
			
			if(toolbars){
				if($.isArray(toolbars)){
					for(var i = 0, l = toolbars.length; i&lt;l; i++){
						tbItem = toolbars[i];
						if(tbItem.items){
							//wrap the items inside a toolbar component
							tbItem.sName = &quot;nav.toolbar&quot;;
							tbItem.defaults = Firebrick.utils.overwrite(me._toolbarDefaults, (tbItem.defaults || {}));
							items = me._getItems(tbItem);
							//load the html for the template compiler
							html += items.html;
							me.toolbars[i] = items.items[0];
						}else{
							console.warn(&quot;a toolbar was found without the items property and didn&#x27;t render&quot;);
						}
					}
				}else{
					console.warn(&quot;unable to load toolbars for this panel&quot;, me, &quot;toolbars property must be an array of objects&quot;);
				}
			}
			
			return html;
		}
	});
});

define(&#x27;text!Firebrick.ui/containers/Accordion.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{=it.getItems()}}\r\n&lt;/div&gt;&#x27;;});


define(&#x27;text!Firebrick.ui/containers/Panel.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{?it.title !== false &amp;&amp; (it.collapsible || it.headerItems) }}\r\n\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;panelHeaderBindings\&#x27;)}}&quot;&gt;\r\n\t\t{{?it.title}}\r\n\t\t\t{{?it.collapsible}}\r\n\t\t\t\t&lt;a data-bind=&quot;{{=it.dataBind(\&#x27;collapsibleLinkBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t{{?}}\r\n\t\t\t\t&lt;h{{=it.headerSize}} data-bind=&quot;{{=it.dataBind(\&#x27;panelHeaderTextBindings\&#x27;)}}&quot;&gt;&lt;/h{{=it.headerSize}}&gt;\t\r\n\t\t\t\t{{=it.getLabelTpl()}}\r\n\t\t\t{{?it.collapsible}}\r\n\t\t\t\t&lt;/a&gt;\r\n\t\t\t{{?}}\r\n\t\t{{?}}\r\n\t\t{{=it.getDefaultIcons()}}\r\n\t\t{{?it.headerItems}}\r\n\t\t\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;headerItemsBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t\t{{=it.getItemsProp(\&#x27;headerItems\&#x27;)}}\r\n\t\t\t&lt;/div&gt;\r\n\t\t{{?}}\r\n\t&lt;/div&gt;\r\n\t{{?}}\r\n\t\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;tabBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;panelBodyBindings\&#x27;)}}&quot; &gt;\r\n\t\t\t\t{{=it.getToolbars()}}\r\n\t\t\t\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;panelItemBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t\t\t{{=it.getItems()}}\r\n\t\t\t\t&lt;/div&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t&lt;/div&gt;\r\n&lt;/div&gt;&#x27;;});


define(&#x27;text!Firebrick.ui/containers/panel/Icon.html&#x27;,[],function () { return &#x27;{{?it.scope[it.property] &amp;&amp; it.scope[it.showProperty] !== false}}\r\n\t&lt;a data-bind=&quot;{{=it.scope.dataBind(it.bindingMethod)}}&quot;&gt;&lt;/a&gt;\r\n{{?}}&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers
 * @class Panel
 */
define(&#x27;Firebrick.ui/containers/Panel&#x27;,[&quot;text!./Panel.html&quot;, &quot;text!./panel/Icon.html&quot;, &quot;jquery&quot;, &quot;doT&quot;, &quot;./Base&quot;, &quot;../nav/Toolbar&quot;, &quot;../common/mixins/Toolbars&quot;, &quot;../common/mixins/Label&quot;], function(tpl, iconTpl, $, doT){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.Panel&quot;, {
		extend:&quot;Firebrick.ui.containers.Base&quot;,
		mixins: [&quot;Firebrick.ui.common.mixins.Toolbars&quot;,
		         &quot;Firebrick.ui.common.mixins.Label&quot;],
		/**
		 * @property sName
		 * @type {String}
		 */
		sName: &quot;containers.panel&quot;,
		/**
		 * @property tpl
		 * @type {String} html
		 */
		tpl:tpl,
		/**
		 * used to the default header icons
		 * @property iconTpl
		 * @type {String} html
		 */
		iconTpl: iconTpl,
		/**
		 * @property role
		 * @type {String}
		 * @default &quot;&quot;
		 */
		role: &quot;&quot;,
		/**
		 * @property collapseRole
		 * @type {String}
		 * @default &quot;&quot;
		 */
		collapseRole: &quot;&quot;,
		/**
		 * @property title
		 * @type {String|false} set to false to hide the title
		 * @default &quot;&quot;
		 */
		title:&quot;&quot;,
		/**
		 * use to determine whether h1, h2, h3 etc - default = 3
		 * @property headerSize
		 * @type {Int}
		 * @default 3
		 */
		headerSize:3,
		/**
		 * @property panelClass
		 * @type {Boolean|String}
		 * @default true
		 */
		panelClass: true,
		/**
		 * string = (default, primary, success, info, warning, danger)
		 * @property panelTypeClass
		 * @type {Boolean|String} 
		 * @default &quot;default&quot;
		 */
		panelTypeClass: &quot;default&quot;,
		/**
		 * @property panelHeaderClass
		 * @type {Boolean|String}
		 * @default true
		 */
		panelHeaderClass: true,
		/**
		 * @property panelBodyClass
		 * @type {Boolean|String}
		 * @default true
		 */
		panelBodyClass: true,
		/**
		 * determines whether &quot;panel-title&quot; class is used
		 * @property
		 * @type {Boolean}
		 * @default true
		 */
		panelTitleClass: true,
		/**
		 * fill the panel body with html
		 * @property html
		 * @type {String|Function}
		 * @default &quot;&quot;
		 */
		html: &quot;&quot;,
		/**
		 * @property collapsible
		 * @type {Boolean|String}
		 * @default false
		 */
		collapsible:false,
		/**
		 * @property showCollapseIcon
		 * @type {Boolean}
		 * @default true
		 */
		showCollapseIcon: true,
		/**
		 * @property collapsed
		 * @type {Boolean|String}
		 * @default false
		 */
		collapsed:false,
		/**
		 * @private
		 * @property _collapsedState
		 * @type {Boolean}
		 * @default false
		 */
		_collapsedState: false,
		/**
		 * @property headerItems
		 * @type {Boolean|Array of Objects} boolean = false, if object use the same way as the &quot;items&quot; property
		 * @default false
		 */
		headerItems: false,
		/**
		 * @property headerIconsPosition
		 * @type {String|false} css class &quot;pull-right&quot;, &quot;pull-left&quot; etc
		 * @default &quot;pull-right&quot;
		 */
		headerItemsPosition: &quot;pull-right&quot;,
		/**
		 * @private
		 * @property _collapsedClass
		 * @type {String}
		 * @default &quot;fb-ui-is-collapsed&quot;
		 */
		_collapsedClass: &quot;fb-ui-is-collapsed&quot;,
		/**
		 * only needed when panel is inside accordion
		 * @property dataParentId
		 * @type {String}
		 * @default &quot;&quot;
		 */
		dataParentId: &quot;&quot;,
		/**
		 * only needed when panel is inside accordion
		 * @property active
		 * @type {Boolean}
		 * @default false
		 */
		active: false,
		/**
		 * @property maximizable
		 * @type {Boolean}
		 * @default false
		 */
		maximizable: false,
		/**
		 * array of icon posibilites after headerItems (custom), like collapse icon, maximize icon etc
		 * @property _defaultPanelIcons
		 * @private
		 * @type {Array of Strings}
		 * @default [&quot;maximizable&quot;, &quot;collapsible&quot;]
		 */
		_defaultPanelIcons: [&quot;collapsible&quot;, &quot;maximizable&quot;],
		/**
		 * @method init
		 * @return {Object}
		 */
		init: function(){
			var me = this;
			
			me._collapsedState = me.collapsed;
			
			me.on(&quot;rendered&quot;, function(){
				var panel = me.getElement(),
					eventFunction;

				if(me.collapsed){
					panel.addClass( me._collapsedClass );
				}
				
				eventFunction = function () {
					panel.toggleClass( me._collapsedClass );
					panel.trigger(&quot;fb-ui-panel-state-change&quot;);
					me._collapsedState = !me._collapsedState;	//toggle value
				};
				
				//this is important for the collapse icon
				panel.on(&quot;show.bs.collapse hide.bs.collapse&quot;, eventFunction);
				
				me.on(&quot;unbound&quot;, function(){
					panel.off(&quot;show.bs.collapse hide.bs.collapse&quot;, eventFunction);
				});
				
			});
			
			return me.callParent(arguments);
		},
		
		/**
		 * programmatically make toggleCollapse action - useful if the header isn&#x27;t available
		 * @method toggleCollapse
		 * @return self
		 */
		toggleCollapse: function(){
			var me = this;
				
			if(me._collapsedState){
				me.expand();
			}else{
				me.collapse();
			}
			
			return me;
		},
		/**
		 * used within the Panel.html template
		 * iterates through the _defaultPanelIcons array and builds for each value a 
		 * template from panel/Icon (this.iconTpl) together for each property
		 * @private
		 * @method defaultPanelIcons
		 * @return {String} html
		 */
		getDefaultIcons: function(){
			var me = this,
				it,
				icons = me._defaultPanelIcons,
				html = &quot;&quot;,
				conf;
			
			for(var i = 0, l = icons.length; i&lt;l; i++){
				it = icons[i];
				conf = {
					property: icons[i],
					showProperty: &quot;show&quot; + Firebrick.utils.firstToUpper( it ),
					bindingMethod: it + &quot;IconBindings&quot;,
					scope: me
				};
				html += doT.template( me.iconTpl )(conf);
			}
			
			return html;
		},
		/**
		 * programmatically make a collapse action - useful if the header isn&#x27;t available
		 * @method collapse
		 * @return self
		 */
		collapse: function(){
			var me = this,
				panel = me.getElement(),
				collapsiblePart = $(&quot;&gt; .panel-collapse&quot;, panel);
		
			collapsiblePart.collapse(&quot;hide&quot;);
			
			return me;
		},
		
		/**
		 * programmatically make an expand action - useful if the header isn&#x27;t available
		 * @method expand
		 * @return self
		 */
		expand: function(){
			var me = this,
				panel = me.getElement(),
				collapsiblePart = $(&quot;&gt; .panel-collapse&quot;, panel);
	
			collapsiblePart.collapse(&quot;show&quot;);
			
			return me;
		},
		
		
		/**
		 * Data bindings
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);

			obj.css.panel = me.panelClass;

			if(me.panelTypeClass){
				obj.css[ me.parseBind(&quot;panel-&quot; + me.panelTypeClass) ] = true;
			}
			
			return obj;
		},
		/**
		 * @method tabBindings
		 * @return {Object}
		 */
		tabBindings: function(){
			var me = this,
				obj = {
					css:{},
					attr:{
						id: me.parseBind( &quot;fb-ui-collapse-&quot; + me.getId() )
					}
			};
			
			if( me.collapsible ){
				obj.css[&quot;&#x27;panel-collapse&#x27;&quot;] = me.collapsible;
				obj.css.collapse = me.collapsible;
				if(!me.collapsed){
					obj.css[&quot;in&quot;] = true;
				}
			}else if( me.collapsed ){
				//just collapsed
				obj.css[&quot;&#x27;panel-collapse&#x27;&quot;] = true;
				obj.css.collapse = true;
			}
			
			if(me.collapseRole){
				obj.attr.role = me.parseBind(me.collapseRole);
			}
			
			obj.css[&quot;&#x27;fb-ui-panel-body-container&#x27;&quot;] = true;
			return obj;
		},
		/**
		 * @method panelHeaderBindings
		 * @return {Object}
		 */
		panelHeaderBindings: function(){
			var me = this,
				obj = {
					css:{
						&quot;&#x27;panel-heading&#x27;&quot;: me.panelHeaderClass
					},
					attr:{}
			};
			
			if(me.headerItems){
				obj.css.clearfix = true;
			}
			
			if(me.role){
				obj.attr.role = me.parseBind(me.role);
			}
			
			return obj;
		},
		/**
		 * @method headerItemsBindings
		 * @return {Object}
		 */
		headerItemsBindings: function(){
			var me = this,
				obj= {
					css: {
						&quot;&#x27;btn-group&#x27;&quot;: true
					}
				};
			
			if(me.headerItemsPosition){
				obj.css[me.parseBind(me.headerItemsPosition)] = true;
			}
			
			return obj;
			
		},
		/**
		 * @method collapsibleLinkBindings
		 * @return {Object}
		 */
		collapsibleLinkBindings: function(){
			var me = this,
				id = &quot;fb-ui-collapse-&quot; + me.getId(),
				obj = {
					css:{
						&quot;&#x27;fb-ui-title-link&#x27;&quot;: true
					},
					attr:{
						&quot;&#x27;data-toggle&#x27;&quot;:  &quot;&#x27;collapse&#x27;&quot;,
						&quot;&#x27;data-target&#x27;&quot;:  me.parseBind(&quot;#&quot; + id ),
						&quot;&#x27;aria-expanded&#x27;&quot;: typeof me.collapsed === &quot;boolean&quot; ? me.collapsed : true,
						&quot;&#x27;aria-controls&#x27;&quot;:  me.parseBind( id ),
					}
				};
			
			if(me.dataParentId){
				obj.attr[&quot;&#x27;data-parent&#x27;&quot;] = me.dataParentId;
			}
			
			return obj;
		},
		
		/**
		 * @method collapsibleIconBindings
		 * @return {Object}
		 */
		collapsibleIconBindings: function(){
			var me = this,
				obj = {
					css:{
						&quot;&#x27;fb-ui-panel-icon&#x27;&quot;: true,
						&quot;&#x27;fb-ui-collapse-icon&#x27;&quot;: true
					}, 
					attr:{}
				};
			
			obj.click = &quot;function(){ return Firebrick.ui.helper.callFunction(&#x27;&quot;+me.getId()+&quot;&#x27;, &#x27;_collapseIconClick&#x27;, arguments)}&quot;;
			
			return obj;
		},
		/**
		 * simulate a click on the icon and delegate it to the title
		 * @method _collapseIconClick
		 * @private
		 * @param obj
		 * @param event {Object} jquery event
		 */
		_collapseIconClick: function(obj, event){
			var me = this;
			me.toggleCollapse();
		},
		/**
		 * @method maximizableIconBindings
		 * @return {Object}
		 */
		maximizableIconBindings: function(){
			var me = this,
				obj = {
					css:{
						&quot;&#x27;fb-ui-panel-icon&#x27;&quot;: true,
						&quot;glyphicon&quot;: true,
						&quot;&#x27;glyphicon-fullscreen&#x27;&quot;: true
					}
				};
			
			return obj;
		},
		/**
		 * @method panelHeaderTextBindings
		 * @return {Object}
		 */
		panelHeaderTextBindings: function(){
			var me = this,
				obj = {
						css:{
							&quot;&#x27;panel-title&#x27;&quot;: me.panelTitleClass
						}
					};
			
			if(typeof me.title !== &quot;boolean&quot;){
				obj.text = me.textBind(me.title)
			}
			
			if(me.headerItems){
				obj.css[&quot;&#x27;pull-left&#x27;&quot;] = true;
			}
			
			if( me.labelText ){
				obj.css[&quot;&#x27;fb-ui-has-label&#x27;&quot;] = true;
			}
			
			return obj;
		},
		/**
		 * @method panelBodyBindings
		 * @return {Object}
		 */
		panelBodyBindings: function(){
			var me = this,
				obj = {
					css:{
						&quot;&#x27;panel-body&#x27;&quot;: me.panelBodyClass
					}
				};

			me.toolbarContainer(obj);
			
			return obj;
		},
		/**
		 * @method panelItemBindings
		 * @return {Object}
		 */
		panelItemBindings: function(){
			var me = this,
				obj = {};

			//no items are defined or it is an empty array
			if( !me.items || (me.items &amp;&amp; !me.items.length) ){
				obj.html = &quot;Firebrick.ui.helper.getHtml( &#x27;&quot; + me.getId() + &quot;&#x27;, $data, $context )&quot;;
			}
			
			return obj;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers
 * @class Accordion
 */
define(&#x27;Firebrick.ui/containers/Accordion&#x27;,[&quot;text!./Accordion.html&quot;, &quot;./Base&quot;, &quot;./Panel&quot;, &quot;bootstrap.plugins/collapse&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.Accordion&quot;, {
		extend:&quot;Firebrick.ui.containers.Base&quot;,
		/**
		 * @property tpl
		 * @type {String} html
		 * @default Accordion.html
		 */
		tpl: tpl,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;containers.accordion&quot;,
		
		/**
		 * @property defaults
		 * @type {Object}
		 * @default {
		 * 		sName: &quot;containers.panel&quot;
		 * }
		 */
		defaults: {
			sName: &quot;containers.panel&quot;,
			collapsible:true,
			role: &quot;tab&quot;,
			collapseRole: &quot;tabpanel&quot;
		},
		/**
		 * @property role
		 * @type {String}
		 * @default &quot;tablist&quot;
		 */
		role: &quot;tablist&quot;,
		/**
		 * @property ariaMultiselectable
		 * @type {Boolean}
		 * @default true
		 */
		ariaMultiselectable: true,
		/**
		 * @property panelGroupClass
		 * @type {String|false}
		 * @default &quot;panel-group&quot;
		 */
		panelGroupClass: &quot;panel-group&quot;,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			//&lt;div class=&quot;panel-group&quot; id=&quot;accordion&quot; role=&quot;tablist&quot; aria-multiselectable=&quot;true&quot;&gt;
			
			obj.attr.role = me.parseBind(me.role);
			obj.attr[&quot;&#x27;aria-multiselectable&#x27;&quot;] = me.ariaMultiselectable;
			if(me.panelGroupClass){
				obj.css[me.parseBind(me.panelGroupClass)] = true;
			}
			
			return obj;
		},
		
		getItems: function(){
			var me = this,
				item;
			
			for(var i = 0, l = me.items.length; i&lt;l; i++){
				item = me.items[i];
				item.dataParentId = me.parseBind(&quot;#&quot; + me.getId());
				item.collapsed = item.active ? false : true;
			}
			
			return me.callParent(arguments);
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * built on the back of: http://css-tricks.com/snippets/jquery/draggable-without-jquery-ui/
 * 
 * @module plugins
 * @namespace plugins
 * @class Draggable
 */
define(&#x27;Firebrick.ui/containers/border/Draggable&#x27;,[&quot;jquery&quot;], function($){
	&quot;use strict&quot;;
	
	/**
	 * @method drags
	 * @event dragged - fired on mouseup
	 * set property &quot;dragDisabled&quot; on element to disable dragging at anytime
	 * @example 
	 * 		jqueryEl.prop(&quot;dragDisabled&quot;, {true|false});
	 * @example
	 * 		jqueryEl.drags(&quot;vertical&quot;);
	 * 		jqueryEl.drags(&quot;horizontal&quot;);
	 */
    $.fn.drags = function(direction, opt) {
    	var $el,
    		origPageX,
    		origPageY,
    		top,
    		left,
    		correctPageCoord = function(event, axis){
	    		axis = axis.toUpperCase();
    		
	    		//get the correct page(X|Y) coord depending on whether it is a touch device
	    		if(event.type.indexOf(&quot;touch&quot;) &gt;= 0){
	    			return event.originalEvent.targetTouches[0][&quot;page&quot; + axis];
	    		}else{
	    			return event[&quot;page&quot; + axis];
	    		}
    		
    		};
    	
    	direction = direction.toLowerCase();
        opt = $.extend({handle:&quot;&quot;}, opt);

        if(opt.handle === &quot;&quot;) {
            $el = this;
        } else {
            $el = this.find(opt.handle);
        }
        
        
        if($el.prop(&quot;dragSet&quot;) === true){
        	return $el;
        }
        
        //set a prop on the element to ensure that the event aren&#x27;t registered more than once
        $el.prop(&quot;dragSet&quot;, true);
        
        return $el.on(&quot;mouseover&quot;, function(){
        		var $drag = $(this);
        		if($drag.prop(&quot;dragDisabled&quot;) === true){
        			$drag.css(&quot;cursor&quot;, &quot;auto&quot;);
        		}else{
        			$drag.css(&quot;cursor&quot;, &quot;&quot;);
        		}
	        }).on(&quot;mousedown touchstart&quot;, function(e) {
	        	var $drag = !opt.handle ? $(this).addClass(&#x27;draggable&#x27;) : $(this).addClass(&#x27;active-handle&#x27;).parent().addClass(&#x27;draggable&#x27;),
	        		zIdx = $drag.css(&#x27;z-index&#x27;),
	                drgH = $drag.outerHeight(),
	                drgW = $drag.outerWidth(),
	                posY = $drag.offset().top + drgH - correctPageCoord(e, &quot;y&quot;),
	                posX = $drag.offset().left + drgW - correctPageCoord(e, &quot;x&quot;),
	                mouseMove;
	        	
	                origPageY = correctPageCoord(e, &quot;y&quot;);
	                origPageX = correctPageCoord(e, &quot;x&quot;);
	                
	                mouseMove = function(e){
	            		top = (direction === &quot;horizontal&quot; ? origPageY : correctPageCoord(e, &quot;y&quot;)) + posY - drgH;
	        			left = (direction === &quot;vertical&quot; ? origPageX : correctPageCoord(e, &quot;x&quot;)) + posX - drgW;
	        			$drag.offset({
		                    top: top,
		                    left: left
		                });
	        		};
	        	
        		$drag.on(&quot;mouseup touchend&quot;, function() {
                	$drag.removeClass(&#x27;draggable&#x27;).css(&#x27;z-index&#x27;, zIdx);
                	//remove handler
                    $(&quot;html&quot;).off(&quot;mousemove touchmove&quot;, &quot;body&quot;, mouseMove);
                });
	        		
	    		if($drag.prop(&quot;dragDisabled&quot;) === true){
	    			$(&quot;html&quot;).off(&quot;mousemove touchmove&quot;, &quot;body&quot;, mouseMove);
	    		}else{
	    			$drag.css(&#x27;z-index&#x27;, 1000);
	            	//add handler
	            	$(&quot;html&quot;).on(&quot;mousemove touchmove&quot;, &quot;body&quot;, mouseMove);
	    		}
	        	
	            
	            e.preventDefault(); // disable selection
	            
	        }).on(&quot;mouseup touchend&quot;, function() {
	        	var $this = $(this);
	        	if($this.prop(&quot;dragDisabled&quot;) !== true){
	        		if(opt.handle === &quot;&quot;) {
	                	$this.removeClass(&#x27;draggable&#x27;);
	                } else {
	                	$this.removeClass(&#x27;active-handle&#x27;).parent().removeClass(&#x27;draggable&#x27;);
	                }
	                $this.trigger(&quot;dragged&quot;, [top - origPageY, left - origPageX]);
	                $this.css({
	            		top:0,
	            		left:0
	            	});
	        	}
	        });

    };
	
});

define(&#x27;text!Firebrick.ui/containers/border/SplitBar.html&#x27;,[],function () { return &#x27;{{?it.resizable || it.collapsible}}\r\n&lt;div id=&quot;{{=it.getSplitBarId()}}&quot; data-bind=&quot;{{=it.dataBind(\&#x27;splitBarBindings\&#x27;)}}&quot;&gt;\r\n\t{{?it.collapsible}}\r\n\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;splitBarCollapseBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t{{?}}\r\n&lt;/div&gt;\r\n{{?}}&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * 
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers.border
 * @class Pane
 */
define(&#x27;Firebrick.ui/containers/border/Pane&#x27;,[&quot;text!./SplitBar.html&quot;, &quot;jquery&quot;, &quot;../../common/mixins/Column&quot;, &quot;./Draggable&quot;, &quot;../Panel&quot;], function(splitBarTpl, $){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.border.Pane&quot;, {
		extend:&quot;Firebrick.ui.containers.Panel&quot;,
		mixins:&quot;Firebrick.ui.common.mixins.Column&quot;,
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;containers.border.pane&quot;
		 */
		sName:&quot;containers.border.pane&quot;,
		/**
		 * @property resizable
		 * @type {Boolean}
		 * @default false
		 */
		resizable: false,
		/**
		 * @property position
		 * @type {String} &quot;top&quot;, &quot;left&quot;, &quot;center&quot;, &quot;right&quot;, &quot;bottom&quot;
		 * @default &quot;&quot;
		 */
		position: &quot;&quot;,
		/**
		 * @property collapseDirection
		 * @type {String}
		 * @default &quot;left&quot;
		 */
		collapseDirection: &quot;left&quot;,
		/**
		 * @property splitBarIdPrefix
		 * @type {String}
		 * @default &quot;fb-ui-splitbar-r&quot;
		 */
		splitBarIdPrefix: &quot;fb-ui-splitbar-&quot;,
		/**
		 * @private
		 * @property splitBarTpl
		 * @type {HTML}
		 * @default SplitBar.html
		 */
		splitBarTpl: splitBarTpl,
		/**
		 * @private
		 * @property _rotatedHeadingClass
		 * @type {String}
		 * @default &quot;panel-rotated-heading&quot;
		 */
		_rotatedHeadingClass: &quot;panel-rotated-heading&quot;,
		/**
		 * @private
		 * @property _rotatedHeadingClass
		 * @type {String}
		 * @default &quot;panel-rotated-heading&quot;
		 */
		_rotatedTitleClass: &quot;panel-rotated-title&quot;,
		/**
		 * @private
		 * @property _positionPrefixClass
		 * @type {String}
		 * @default &quot;fb-ui-pane-position-&quot;
		 */
		_positionPrefixClass: &quot;fb-ui-pane-position-&quot;,
		/**
		 * @private
		 * @property _transitionClass
		 * @type {String}
		 * @default &quot;fb-ui-transition&quot;
		 */
		_transitionClass: &quot;fb-ui-transition&quot;,
		/**
		 * @property height
		 * @type {Integer|String}
		 * @default &quot;auto&quot;
		 */
		height: &quot;auto&quot;,
		/**
		 * only used for left and right panes
		 * @property width
		 * @type {Integer|String}
		 * @default &quot;33%&quot;
		 */
		width: &quot;33%&quot;,
		/**
		 * @property title
		 * @type {String}
		 * @default false
		 */
		title: false,
		/**
		 * @method init
		 * @return {Object}
		 */
		init: function(){
			var me = this;
			
			me.on(&quot;htmlRendered&quot;, function(){
				return me._htmlRendered.apply(me, arguments);
			});
			
			me.on(&quot;rendered&quot;, function(){
				return me._rendered.apply(me, arguments);
			});
			
			return me.callParent(arguments);
		},
		
		/**
		 * listener for the event htmlRendered
		 * in this function the splitbar is added to its correct position
		 * only if the pane is resizable
		 * @private
		 * @method _htmlRendered
		 */
		_htmlRendered: function(){
			var me = this,
				el, splitBarHtml,
				position = me.position;
			
			if(position !== &quot;center&quot;){
				el = me.getElement();
				if(el){
					me.template(&quot;splitBarTpl&quot;);
					splitBarHtml = me.build(&quot;splitBarTpl&quot;);
					if(position !== &quot;right&quot; &amp;&amp; position !== &quot;bottom&quot;){
						el.after(splitBarHtml);	
					}else{
						el.before(splitBarHtml);	
					}
					
				}
			}
			
			me._setDimensions();
			
		},
		
		/**
		 * accepts no parameters
		 * @private
		 * @method _setDimensions
		 */
		_setDimensions: function(){
			var me = this,
				el = me.getElement(),
				position = me.position,
				height = me.height,
				width = me.width;

			if(position === &quot;top&quot; || position === &quot;bottom&quot;){
				if(height !== &quot;auto&quot;){
					el.css(&quot;height&quot;, height);
					el.css(&quot;min-height&quot;, height);
				}
			}
			
			if(position === &quot;left&quot; || position === &quot;right&quot;){
				el.css(&quot;width&quot;, width);
				el.css(&quot;min-width&quot;, width);
			}
			
		},

		/**
		 * listener for the event rendered
		 * @private
		 * @method _rendered
		 */
		_rendered: function(){
			var me = this,
				pane = me.getElement(),
				position = me.position,
				direction = position === &quot;top&quot; || position === &quot;bottom&quot; ? &quot;vertical&quot; : &quot;horizontal&quot;,
				lookMethod = position === &quot;top&quot; || position === &quot;left&quot; ? &quot;next&quot; : &quot;prev&quot;,
				splitBar = pane[lookMethod](&quot;.fb-ui-splitbar&quot;);
			
			pane.prop(&quot;fb-direction&quot;, direction);
			pane.prop(&quot;fb-splitbar&quot;, splitBar);
			if (me.collapsible){
				splitBar.on(&quot;click touchstart&quot;, &quot;&gt; .fb-ui-collapse-icon&quot;, function(){
					me.toggleCollapse.call(me);
				});
				me.setCollapsibleActions();
			}
			
			if(me.resizable){
				me.setResizableActions();
			}	
			
			if(me.resizable || me.collapsible){
				pane.on(&quot;fb-ui-panel-state-change&quot;, function(){
					//disable resize if the pane is collapsed
					if(pane.hasClass( me._collapsedClass )){
						me.onCollapsed();
					}else{
						me.onExpanded();
					}
				});
			}
		},
		
		/**
		 * @method collapse
		 */
		
		
		/**
		 * @method setCollapsibleActions
		 */
		setCollapsibleActions: function(){
			var me = this,
				el = me.getElement(),
				position = me.position;
			
			if(position === &quot;left&quot; || position === &quot;right&quot;){
				$(&quot;&gt; .panel-collapse&quot;, el).on(&quot;hide.bs.collapse&quot;, function(){
					return me._onRLPaneCollapse.apply(me, arguments);
				});
				
				$(&quot;&gt; .panel-collapse&quot;, el).on(&quot;show.bs.collapse&quot;, function(){
					return me._onRLPaneExpand.apply(me, arguments);
				});
			}else{
				//bottom &amp; top panes
				$(&quot;&gt; .panel-collapse&quot;, el).on(&quot;hide.bs.collapse&quot;, function(){
					return me._onTBPaneCollapse.apply(me, arguments);
				});
				$(&quot;&gt; .panel-collapse&quot;, el).on(&quot;show.bs.collapse&quot;, function(){
					return me._onTBPaneExpand.apply(me, arguments);
				});
			}
		},
		
		/**
		 * @method setResizableActions
		 */
		setResizableActions: function(){
			var me = this,
				position = me.position,
				pane = me.getElement(),
				paneHeader = $(&quot;&gt; .panel-heading&quot;, pane),
				direction = pane.prop(&quot;fb-direction&quot;),
				splitbar = pane.prop(&quot;fb-splitbar&quot;);
				
			if(splitbar.length){
				if(direction === &quot;vertical&quot;){
					//top bottom panes

					//if the class if NOT collapsed from the start, then enable resizing
					if(!pane.hasClass( me._collapsedClass )){
						me.onExpanded();
					}
					
					//when the splitbar has been dragged, if the panel a new height
					splitbar.on(&quot;dragged&quot;, function(event, top/*, left*/){
						var val;
						if(position === &quot;top&quot;){
							val = pane.height() + top;
							if(val &gt; 0){
								//subtract the header height to position the splitbar in the right place
								val -= paneHeader.height();
							}
							pane.css(&quot;height&quot;, val);
							pane.css(&quot;min-height&quot;, val);
						}else{
							val = pane.height() - top;
							if(val &lt; 0){
								//add the header height to position the splitbar in the right place
								val += paneHeader.height();
							}
							pane.css(&quot;height&quot;, val);
							pane.css(&quot;min-height&quot;, val);
						}
						
					});
					
				}else{
					
					//if the pane is NOT collapsed from the start, enable resize functionality
					if(!pane.hasClass( me._collapsedClass )){
						me.onExpanded();
					}
					
					//when the splitbar has been moved, calculate the new width of the pane
					splitbar.on(&quot;dragged&quot;, function(event, top, left){
						var width = pane.width();
						if(position === &quot;right&quot;){
							pane.width(width-left);
							pane.css(&quot;min-width&quot;, width-left);
						}else{
							pane.width(width+left);
							pane.css(&quot;min-width&quot;, width+left);
						}
						
					});
				}

			}
		},
		
		/**
		 * event callback (jQuery)
		 * top and bottom pane
		 * @private
		 * @method _onTBPaneCollapse
		 * @param me {Object} this class
		 * @param el {jQuery Object} panel|pane
		 */
		_onTBPaneCollapse: function(){
			var me = this,
				pane = me.getElement(),
				paneHeader = $(&quot;&gt; .panel-heading&quot;, pane),
				paneHeaderHeight = paneHeader.outerHeight();

			if(!pane.prop(&quot;_fbResizeHeight&quot;)){
				//first time this is collapse - set the current height/min-height to the current values
				//if not set, css snaps a little and does not do the animation/transition properly
				pane.css(&quot;min-height&quot;, pane.css(&quot;min-height&quot;));
				pane.css(&quot;height&quot;, pane.css(&quot;height&quot;));
			}
			
			pane.addClass( me._transitionClass );

			pane.prop(&quot;_fbResizeHeight&quot;, pane.css(&quot;height&quot;));	//save the height in the property, this is needed for transitions when the pane is expaneded again
			pane.css(&quot;min-height&quot;, paneHeaderHeight);
			pane.css(&quot;height&quot;, paneHeaderHeight);
			
			pane.one(&quot;webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend&quot;, function() {
				pane.removeClass( me._transitionClass );
			});
		},
		
		/**
		 * event callback (jQuery)
		 * top and bottom pane
		 * @private
		 * @method _onTBPaneExpand
		 * @param me {Object} this class
		 * @param el {jQuery Object} panel|pane
		 */
		_onTBPaneExpand: function(){
			var me = this,
				pane = me.getElement();
			
			//start transition
			pane.addClass( me._transitionClass );
			pane.css(&quot;min-height&quot;, pane.prop(&quot;_fbResizeHeight&quot;));
			pane.css(&quot;height&quot;, pane.prop(&quot;_fbResizeHeight&quot;));
			
			//listener when the transition has ended
			pane.one(&quot;webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend&quot;, function() {
				pane.removeClass( me._transitionClass );
			});
		},
		
		/**
		 * right and left pane
		 * event callback (jQuery)
		 * @private
		 * @method _onRLPaneExpand
		 * @param event {jQuery event Object}
		 */
		_onRLPaneExpand: function(){
			var me = this,
				pane = me.getElement(), 
				paneHeader = $(&quot;&gt; .panel-heading&quot;, pane),
				paneTitle = $(&quot;.panel-title&quot;, paneHeader);
			
			//start transition
			pane.addClass( me._transitionClass );
			pane.trigger(&quot;pane-expanding&quot;);
			
			//remove the rotated effect on the panel title
			paneHeader.removeClass( me._rotatedHeadingClass );
			paneTitle.removeClass( me._rotatedTitleClass );
			
			pane.css(&quot;min-width&quot;, pane.prop(&quot;_fbResizeWidth&quot;));
			
			//listener for when the transition has ended
			pane.one(&quot;webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend&quot;, function() {
				pane.removeClass( me._transitionClass );
			});
			
		},
		
		/**
		 * right and left pane
		 * event callback (jQuery)
		 * @private
		 * @method _onRLPaneCollapse
		 * @param event {jQuery event Object}
		 */
		_onRLPaneCollapse: function(){
			var me = this,
				pane = me.getElement(), 
				paneHeader = $(&quot;&gt; .panel-heading&quot;, pane),
				paneTitle = $(&quot;.panel-title&quot;, paneHeader),
				paneHeaderHeight = paneHeader.outerHeight() || 0;
			
			//start transition
			pane.addClass( me._transitionClass );
			pane.trigger(&quot;pane-collapsing&quot;);
			
			pane.prop(&quot;_fbResizeWidth&quot;, pane.css(&quot;width&quot;));	//save the width in the property, this is needed for transitions when the pane is expaneded again
			
			pane.css(&quot;min-width&quot;, paneHeaderHeight);
			pane.css(&quot;width&quot;, paneHeaderHeight);
			
			//listener for when the transition has ended
			pane.one(&quot;webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend&quot;, function() {
				//rotate header &amp; title
				paneHeader.addClass( me._rotatedHeadingClass );
				paneTitle.addClass( me._rotatedTitleClass );
				
				pane.removeClass( me._transitionClass );
			});
			
		},
		
		/**
		 * enable drags function on element
		 * @method onExpanded
		 */
		onExpanded: function(){
			var me = this,
				pane = me.getElement(),
				direction = pane.prop(&quot;fb-direction&quot;),
				splitBar = pane.prop(&quot;fb-splitbar&quot;);
			
			if(splitBar.length &amp;&amp; me.resizable){
				splitBar.prop(&quot;dragDisabled&quot;, false);
				splitBar.drags(direction);	
			}
			
			splitBar.removeClass(&quot;fb-ui-is-collapsed&quot;);
		},
		/**
		 * disable drags function on element
		 * @method onCollapsed
		 */
		onCollapsed: function(){
			var me = this,
				pane = me.getElement(),
				splitBar = pane.prop(&quot;fb-splitbar&quot;);
			
			if(splitBar.length &amp;&amp; me.resizable){
				splitBar.prop(&quot;dragDisabled&quot;, true);
			}
			
			splitBar.addClass(&quot;fb-ui-is-collapsed&quot;);
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.css[&quot;&#x27;fb-ui-border-pane&#x27;&quot;] = true;
			
			//type of pane - top, right, left etc..
			obj.css[me.parseBind(me._positionPrefixClass + me.position)] = true;
			
			if(me.collapsible){
				obj.css[&quot;&#x27;fb-ui-pane-collapsible&#x27;&quot;] = true;
			}
			
			return obj;
		},
		
		/**
		 * @method splitBarBindings
		 * @return {Object}
		 */
		splitBarBindings: function(){
			var me = this,
				obj = {
					css:{
						&quot;&#x27;fb-ui-splitbar&#x27;&quot;: true
					},
					attr:{}
				};

			obj.css[me.parseBind(&quot;fb-ui-splitbar-&quot; + me.position)] = true;
			
			if(me.resizable){
				if(me.position === &quot;top&quot; || me.position === &quot;bottom&quot;){
//					obj.css.col = true;
//					obj.css[me.parseBind(&quot;col-&quot; + me.deviceSize + &quot;-12&quot;)] = true;
					obj.css[&quot;&#x27;fb-ui-splitbar-horizontal&#x27;&quot;] = true;
				}else{
					obj.css[&quot;&#x27;fb-ui-splitbar-vertical&#x27;&quot;] = true;
				}
			}
			
			if(me.collapsible){

				obj.css[&quot;&#x27;fb-ui-collapsebar&#x27;&quot;] = true;
				
			}
			
			return obj;
		},
		
		/**
		 * @method getSplitBarId
		 * @return {String}
		 */
		getSplitBarId: function(){
			var me = this;
			return me.splitBarIdPrefix + me.getId();
		},
		
		/**
		 * @method  splitBarCollapseBindings
		 * @return {Object}
		 */
		splitBarCollapseBindings: function(){
			var me = this,
				obj = {
					css:{}
			};
			
			obj.css.glyphicon = true;
			obj.css[&quot;&#x27;fb-ui-collapse-icon&#x27;&quot;] = true;
			
			if(me.position === &quot;left&quot;){
				obj.css[&quot;&#x27;glyphicon-chevron-left&#x27;&quot;] = true;	
			}else if(me.position === &quot;right&quot;){
				obj.css[&quot;&#x27;glyphicon-chevron-right&#x27;&quot;] = true;
			}else if(me.position === &quot;top&quot;){
				obj.css[&quot;&#x27;glyphicon-chevron-up&#x27;&quot;] = true;
			}else if(me.position === &quot;bottom&quot;){
				obj.css[&quot;&#x27;glyphicon-chevron-down&#x27;&quot;] = true;
			}
			
			return obj;
		},
		
		/**
		 * @method panelBodyBindings
		 * @return {Object}
		 */
		panelBodyBindings: function(){
			var me = this,
				obj = me.callParent( arguments );
			
			obj.css = obj.css || {};
			obj.css[&quot;&#x27;fb-ui-border-pane-body&#x27;&quot;] = true;
			
			return obj;
		}
		
	});
});

define(&#x27;text!Firebrick.ui/containers/BorderLayout.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\r\n\t{{=it.getItems()}}\r\n\r\n&lt;/div&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers
 * @class BorderLayout
 */
define(&#x27;Firebrick.ui/containers/BorderLayout&#x27;,[&quot;text!./BorderLayout.html&quot;, &quot;./Base&quot;, &quot;./Box&quot;, &quot;./border/Pane&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.BorderLayout&quot;, {
		extend:&quot;Firebrick.ui.containers.Base&quot;,
		/**
		 * @property tpl
		 * @type {String} html
		 * @default BorderLayout.html
		 */
		tpl: tpl,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;containers.borderlayout&quot;,
		
		/**
		 * @property defaults
		 * @type {Object}
		 * @default {
		 * 		sName: &quot;containers.border.pane&quot;
		 * }
		 */
		defaults: {
			sName: &quot;containers.border.pane&quot;
		},
		
		/**
		 * @example
		 * 		items:[{
		 * 			position: &quot;top&quot;,	//top, right, bottom, left, center
		 * 			//GridCol properties...
		 * 			items:[{
		 * 				...
		 * 			}];
		 * 		}]
		 * @property items
		 * @type {Array of Objects}
		 * @default null
		 */
		items:null,
		
		/**
		 * number of cols in Bootstraps grid system
		 * do no alter this unless BS changes it
		 * @private
		 * @property _maxGridCols
		 * @type {Integer}
		 * @default 12
		 */
		_maxGridCols: 12,
		/**
		 * @property defaultSizes
		 * @type {Object}
		 * @default {
		 * 		top: 12,
		 * 		right: 3,
		 * 		bottom: 12,
		 * 		left: 3,
		 * 		center: 6
		 * }
		 */
		defaultSizes:{
			top: &quot;100%&quot;,
			right: &quot;33%&quot;,
			bottom: &quot;100%&quot;,
			left: &quot;33%&quot;
		},
		/**
		 * 
		 * @property height
		 * @type {Integer|String} px value | auto | fit
		 * @default &quot;auto&quot;
		 */
		height: &quot;fit&quot;,
		/**
		 * @method init
		 * @return {Object}
		 */
		init: function(){
			var me = this,
				resize;
			
			me.on(&quot;rendered&quot;, function(){
				var el = me.getElement(),
					height = me.height;
				if(height === &quot;fit&quot;){
					//set a fixed height for the borderLayout so that the height
					//of the vertical panes grow in the correct direction
					el.css(&quot;height&quot;, el.parent().height());
					resize = function(){
						el.css(&quot;height&quot;, el.parent().height());
					};
					$(window).on(&quot;resize&quot;, resize);
					me.on(&quot;unbound&quot;, function(){
						$(window).off(&quot;resize&quot;, resize);
					});
				}else if(height !== &quot;auto&quot;){
					//not fixed and not auto
					el.css(&quot;height&quot;, height);
				}
			});
			
			return me.callParent(arguments);
		},
		/**
		 * overriding base method build
		 * @private
		 * @method build
		 */
		build: function(){
			var me = this,
				map = {},
				reorderedItems = [],
				item,
				position,
				length,
				centerGrid = {
					sName: &quot;containers.box&quot;,
					defaults: me.defaults,
					css:&#x27;row-eq-height fb-ui-center-row&#x27;,
					items:[]
				},
				entered = false;
			
			//if items is defined and has &gt;= 1 item
			if(me.items){
				
				length = me.items.length;
				
				if(length){
					for(var i = 0; i&lt;length; i++){
						item = me.items[i];	//get current item in iteration
						//get the correct position where this item should be: 0 - 4
						item.position = item.position.toLowerCase();
						position = me._itemArrayPosition(item.position);
						//store the position and item
						map[position] = item;
					}
					
					for(var ii = 0; ii&lt;5; ii++){
						//get each item from the map in the correct order
						item = map[ii];
						//check if the item was defined
						if(item){
							//get the correct dimensions
							if(ii&gt;0 &amp;&amp; ii&lt;4){
								//center pieces
								// 1|2|3
								centerGrid.items.push(item);
								if(centerGrid.items.length &amp;&amp; !entered){
									entered = true;
									reorderedItems.push(centerGrid);
								}
							}else{
								//place the item in the correct order
								reorderedItems.push(item);
							}
							
						}
					}
					//replace the items with the same ones but in the correct order
					me.items = reorderedItems;
				}
				
			}
			return me.callParent(arguments);
		},
		
		/**
		 * get item border position 
		 * 
		 * ---- 0 ----
		 * 1 | 2 | 3 |
		 * ---- 4 ----
		 * 
		 * @method _itemArrayPosition
		 * @param position {String} top, right, bottom, left, center
		 * @return {Integer}
		 */
		_itemArrayPosition: function(position){
			var pos;
			
			if(position === &quot;top&quot;){
				pos = 0;
			}else if(position === &quot;left&quot;){
				pos = 1;
			}else if(position === &quot;center&quot;){
				pos = 2;
			}else if(position === &quot;right&quot;){
				pos = 3;
			}else if(position === &quot;bottom&quot;){
				pos = 4;
			}
			
			return pos;
		},
		
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.css[&quot;&#x27;fb-ui-borderlayout&#x27;&quot;] = true;
			
			return obj;
		}
		
	});
});

define(&#x27;text!Firebrick.ui/containers/Fieldset.html&#x27;,[],function () { return &#x27;&lt;fieldset id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{?it.showLegend}}\r\n\t\t{{?it.collapsible}}\r\n\t\t\t&lt;a data-bind=&quot;{{=it.dataBind(\&#x27;collapsibleLinkBindings\&#x27;)}}&quot;&gt;\r\n\t\t{{?}}\r\n\t\t\t&lt;legend data-bind=&quot;{{=it.dataBind(\&#x27;legendBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t\t{{?it.collapsible}}\r\n\t\t\t\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;collapsibleBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t\t{{?}}\r\n\t\t\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;legendTextBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t\t{{=it.getLabelTpl()}}\r\n\t\t\t&lt;/legend&gt;\r\n\t\t{{?it.collapsible}}\r\n\t\t\t&lt;/a&gt;\r\n\t\t{{?}}\r\n\t{{?}}\r\n\r\n\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;contentBindings\&#x27;)}}&quot;&gt;\r\n\t\t{{=it.getItems()}}\r\n\t&lt;/div&gt;\r\n\r\n&lt;/fieldset&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers
 * @class Fieldset
 */
define(&#x27;Firebrick.ui/containers/Fieldset&#x27;,[&quot;text!./Fieldset.html&quot;, &quot;jquery&quot;, &quot;../common/mixins/Label&quot;], function(tpl, $){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.Fieldset&quot;, {
		extend:&quot;Firebrick.ui.containers.Base&quot;,
		mixins:&quot;Firebrick.ui.common.mixins.Label&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName: &quot;containers.fieldset&quot;,
		/**
		 * @property tpl
		 * @type {String} html
		 */
		tpl:tpl,
		/**
		 * @property title
		 * @type {String}
		 * @default &quot;&quot;
		 */
		title:&quot;&quot;,
		/**
		 * @property collapsible
		 * @type {Boolean}
		 * @default false
		 */
		collapsible: false,
		/**
		 * @property collapsed
		 * @type {Boolean}
		 * @default false
		 */
		collapsed: false,
		/**
		 * @property fieldsetBodyClass
		 * @type {String}
		 * @default &quot;fb-ui-fieldset-body&quot;
		 */
		fieldsetBodyClass: &quot;fb-ui-fieldset-body&quot;,
		/**
		 * @property showLegend
		 * @type {Boolean}
		 * @default true
		 */
		showLegend: true,
		/**
		 * on the entire fieldset. See: collapseIconClass/expandIconClass for legend icon
		 * @property collapsedClass
		 * @type {String}
		 * @default &quot;collapsed&quot;
		 */
		collapsedClass: &quot;collapsed&quot;,
		/**
		 * adds class form-horizontal to fieldset
		 * @property formHorizontalClass
		 * @type {Boolean}
		 * @default true
		 */
		formHorizontalClass: true,
		/**
		 * css is animated or not
		 * @property animated
		 * @type {Boolean}
		 * @default true
		 */
		animated: true,
		/**
		 * css class for icon to expand when collapsed
		 * @property expandIconClass
		 * @type {String|false}
		 * @default &quot;glyphicon-chevron-up&quot;
		 */
		expandIconClass: &quot;glyphicon-chevron-right&quot;,
		/**
		 * css class for icon to collapse when expanded
		 * @property collapseIconClass
		 * @type {String|false}
		 * @default &quot;glyphicon-chevron-down&quot;
		 */
		collapseIconClass: &quot;glyphicon-chevron-down&quot;,
		/**
		 * @method init
		 * @return {Object}
		 */
		init: function(){
			var me = this,
				obj = me.callParent();
			
			me.on(&quot;rendered&quot;, function(){
				var el = me.getElement(),
					linkEl = $(&quot;&gt; a[data-collapse=&#x27;&quot; + me.getId() + &quot;&#x27;]&quot;, el);
				
				linkEl.on(&quot;click&quot;, function(){
					me.collapseClick.apply(me, arguments);
				});
				
			});
			
			return obj;
		},
		/**
		 * @method bindings
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent( arguments );
			
			obj.css[&quot;&#x27;form-horizontal&#x27;&quot;] = me.formHorizontalClass;
			
			return obj;
		},
		/**
		 * called when the legend is clicked on 
		 * @method collapseClick
		 * @param jQuery &quot;click&quot; event arguments {Any}
		 */
		collapseClick: function(event){
			var me = this,
				el, body, title;
			
			event.preventDefault();
			
			//init after preventDefault
			el = me.getElement();
			body = $(&quot;&gt; div.&quot; + me.fieldsetBodyClass, el);
			title = $(&quot;&gt; a &gt; legend &gt; span.fb-ui-collapsed-icon&quot;, el);

			//TODO: animation
			if(body.is(&quot;:visible&quot;)){
				title.removeClass( me.collapseIconClass );
				title.addClass( me.expandIconClass );
				
				el.addClass( me.collapsedClass );
				body.hide();
			}else{
				title.removeClass( me.expandIconClass );
				title.addClass( me.collapseIconClass );
				
				el.removeClass( me.collapsedClass );
				body.show();
			}
			
		},
		/**
		 * @method legendBindings
		 * @return {Object}
		 */
		legendBindings: function(){
			return {};
		},
		/**
		 * @method legendTextBindings
		 * @return {Object}
		 */
		legendTextBindings: function(){
			var me = this,
				obj = {
					css:{},
					attr:{},
					text: me.textBind(me.title)
				};
			return obj;
		},
		/**
		 * @method collapsibleBindings
		 * @return {Object}
		 */
		collapsibleBindings: function(){
			var me = this,
				obj = {
					css:{
						&quot;&#x27;fb-ui-collapsed-icon&#x27;&quot;: true
					}
				};
			
			obj.css.glyphicon = true;
			if(me.collapsed){
				obj.css[ me.parseBind(me.expandIconClass) ] = true;
			}else{
				obj.css[ me.parseBind(me.collapseIconClass) ] = true;
			}
			
			return obj;
		},
		/**
		 * @method collapsibleLinkBindings
		 * @return {Object}
		 */
		collapsibleLinkBindings: function(){
			var me = this,
				obj = {
					attr:{
						&quot;&#x27;data-collapse&#x27;&quot;: me.parseBind( me.getId() )
					}
				};
			return obj;
		},
		/**
		 * @method contentBindings
		 * @return {Object}
		 */
		contentBindings: function(){
			var me = this,
				obj = {
					css:{
						collapsed: me.collapsed
					}
				};
			
			obj.css[me.parseBind(me.fieldsetBodyClass)] = true;
			
			return obj;
		}
	});
});

define(&#x27;text!Firebrick.ui/containers/Form.html&#x27;,[],function () { return &#x27;&lt;form id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{=it.getItems()}}\r\n&lt;/form&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers
 * @class Form
 */
define(&#x27;Firebrick.ui/containers/Form&#x27;,[&quot;text!./Form.html&quot;, &quot;jquery&quot;, &quot;./Base&quot;], function(tpl, $){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.Form&quot;, {
		extend:&quot;Firebrick.ui.containers.Base&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName: &quot;containers.form&quot;,
		/**
		 * @property tpl
		 * @type {String} html
		 */
		tpl:tpl,
		/**
		 * @property formRole
		 * @type {String}
		 * @default &quot;&#x27;form&#x27;&quot;
		 */
		formRole:&quot;form&quot;,
		/**
		 * controls the css class form-horizontal
		 * @property horizontal
		 * @type {Boolean|String}
		 * @default true
		 */
		horizontal:true,
		/**
		 * fill the panel body with html
		 * @property html
		 * @type {String|Function}
		 * @default &quot;&quot;
		 */
		html: &quot;&quot;,
		/**
		 * controls the css class form-inline
		 * @property inline
		 * @type {Boolean|String}
		 * @default false
		 */
		inline:false,
		/**
		 * multipart/form-data for files
		 * @property enctype
		 * @type {String}
		 * @default &quot;application/x-www-form-urlencoded&quot;
		 */
		enctype: &quot;application/x-www-form-urlencoded&quot;,
		/**
		 * whether the progress bar should be shown on form submission
		 * @property showProgress
		 * @type {Boolean}
		 * @default true
		 */
		showProgress: true,
		/**
		 * see &quot;ProcessData&quot; in http://api.jquery.com/jquery.ajax/
		 * @property ajaxProcessData
		 * @type {Boolean}
		 * @default true
		 */
		ajaxProcessData: false,
		/**
		 * used for submitting the form
		 * @property url
		 * @type {String}
		 * @default &quot;&quot;
		 */
		url: &quot;/&quot;,
		/**
		 * @property submitType
		 * @type {String}
		 * @default &quot;post&quot;
		 */
		submitType: &quot;post&quot;,
		/**
		 * set to true is you want the progress the upload/download progress to be caught
		 * when true, use myForm.addListener(&quot;progressChanged&quot;, function(percentComplete){}); to catch the value
		 * @property catchProgress
		 * @type {Boolean}
		 * @default false
		 */
		catchProgress: false,
		/**
		 * this is called before the form is submitted, use this
		 * return false to stop the submit function being called; 
		 * @method preSubmit
		 * @param jquery &quot;submit&quot; event arguments
		 */
		preSubmit: function(event){
			event.preventDefault();
		},
		/**
		 * set the target attribute on the form
		 * @property formTarget
		 * @type {String}
		 * @default null
		 */
		formTarget: null,
		/**
		 * upload and download progress
		 * @event progressChanged
		 * @property xhr
		 * @type {Function}
		 */
		xhr: function(){
			var me = this,
				xhr = new window.XMLHttpRequest();

			//Upload progress
		    xhr.upload.addEventListener(&quot;progress&quot;, function(evt){
		    	if (evt.lengthComputable) {
		    		var percentComplete = evt.loaded / evt.total;
		    		if(me.catchProgress){
		    			//fire the percentCompleted
		    			me.fireEvent(&quot;progressChanged&quot;, percentComplete);
		    		}
		    	}
		    }, false);
		    
		    //Download progress
		    xhr.addEventListener(&quot;progress&quot;, function(evt){
		    	if (evt.lengthComputable) {
		    		var percentComplete = evt.loaded / evt.total;
		    		if(me.catchProgress){
		    			//fire the percentCompleted
		    			me.fireEvent(&quot;progressChanged&quot;, percentComplete);
		    		}
		    	}
		    }, false);
		    
		    return xhr;
		},
		/**
		 * method called on submit ajax
		 * @property success
		 * @type {Function}
		 * @default 
		 */
		success: function(){
			console.info(&quot;success&quot;, arguments);
		},
		/**
		 * method called on submit ajax
		 * @property error
		 * @type {Function}
		 * @default 
		 */
		error: function(){
			console.warn(&quot;error&quot;, arguments);
		},
		/**
		 * method called on submit ajax
		 * @property complete
		 * @type {Function}
		 * @default function(){}
		 */
		complete: function(){},
		/**
		 * method called after ajax
		 * @method always
		 * @param {Arguments} always function arguments from ajax
		 */
		always: function(){},
		/**
		 * method called after ajax
		 * @method beforeSend
		 * @param {Arguments} beforeSend function arguments from ajax
		 */
		beforeSend: function(){},
		/**
		 * this function requires the HTML5 function FormData to be supported
		 * @method getFormData
		 * @return {Object}
		 */
		getFormData: function(){
			var me = this;
			return new window.FormData(me.getElement());
		},
		/**
		 * @method init
		 */
		init: function(){
			var me = this;
				
			me.on(&quot;rendered&quot;, function(){
				var el = me.getElement();
				if(el){
					el.on(&quot;submit&quot;, function(event){
						if(me.preSubmit.apply(me, arguments) !== false){
							me.submit();	
						}
					});
				}
			});
			
			return me.callParent(arguments);
		},
		/**
		 * make sure this.url is set before calling this function
		 * @method submit
		 */
		submit: function(){
			var me = this,
				form = me.getElement();

			if(!me.url || typeof me.url !== &quot;string&quot;){
				console.error(&quot;unable to submit form. No url is set or is set incorrectly&quot;, me.url, me);
				return;
			}
			
			if(!form){
				console.error(&quot;unable to submit form. Form not found for id&quot;, me.getId());
				return;
			}

			if(window.FormData){
				//HTML 5 - IE10+ 
				$.ajax({
					xhr: me.xhr,
					url: me.url, 
					type: me.submitType, 
					data: new window.FormData(form[0]), 
					processData: me.ajaxProcessData, 
					contentType: me.enctype,
					beforeSend: me.beforeSend.bind(me),
					complete: me.complete.bind(me), //regardless of success of failure
					success: me.success.bind(me),
					error: me.error.bind(me)
				}).always(me.always.bind(me));
			}else{
				console.error(&quot;FormData is not supported by your browser&quot;);
			}
		},
		/**
		 * @method formBindings
		 * @return {Object}
		 */
		bindings:function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.attr.role =  me.parseBind(me.formRole);
			obj.attr.enctype =  me.parseBind(me.enctype);
			obj.css[&quot;&#x27;form-horizontal&#x27;&quot;] =  me.horizontal;
			obj.css[&quot;&#x27;form-inline&#x27;&quot;] =  me.inline;
			obj.attr.action = &quot;Firebrick.getById(&#x27;&quot; + me.getId() + &quot;&#x27;).url&quot;;
			obj.attr.method = me.parseBind( me.submitType );
			
			if(me.formTarget){
				obj.attr.target = me.parseBind( me.formTarget );
			}
			
			if(!me.items){
				obj.html = &quot;Firebrick.ui.helper.getHtml( &#x27;&quot; + me.getId() + &quot;&#x27;, $data, $context )&quot;;
			}
			
			return obj;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers
 * @class FormPanel
 */
define(&#x27;Firebrick.ui/containers/FormPanel&#x27;,[&quot;./Panel&quot;, &quot;./Form&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.FormPanel&quot;, {
		extend:&quot;Firebrick.ui.containers.Panel&quot;,
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;containers.formpanel&quot;
		 */
		sName: &quot;containers.formpanel&quot;,
		/**
		 * configuration to pass to the form section of the Panel
		 * @property formConfig
		 * @type {Object}
		 * @default null
		 */
		formConfig:null,
		/**
		 * @method build
		 * @private
		 */
		init: function(){
			var me = this,
				formItem = me.formConfig || {};
				
			formItem.sName = &quot;containers.form&quot;;	

			if(me.items){
				formItem.items = me.items;
			}else{
				formItem.html = me.html;
			}
			
			me.items = [formItem];
			 
			return me.callParent(arguments);
		}
	});
});

define(&#x27;text!Firebrick.ui/containers/Modal.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n  &lt;div data-bind=&quot;{{=it.dataBind(\&#x27;dialogBindings\&#x27;)}}&quot;&gt;\r\n    &lt;div data-bind=&quot;{{=it.dataBind(\&#x27;contentBindings\&#x27;)}}&quot;&gt;\r\n      &lt;div data-bind=&quot;{{=it.dataBind(\&#x27;headerBindings\&#x27;)}}&quot;&gt;\r\n      \t{{?it.showCloseIcon}}\r\n      \t\t&lt;button data-bind=&quot;{{=it.dataBind(\&#x27;closeButtonBindings\&#x27;)}}&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;srCloseIconBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;&lt;/button&gt;\r\n      \t{{?}}\r\n        &lt;h{{=it.titleSize}} id=&quot;{{=it.getTitleId()}}&quot; data-bind=&quot;{{=it.dataBind(\&#x27;titleBindings\&#x27;)}}&quot;&gt;&lt;/h{{=it.titleSize}}&gt;\r\n      &lt;/div&gt;\r\n      &lt;div data-bind=&quot;{{=it.dataBind(\&#x27;bodyBindings\&#x27;)}}&quot;&gt;\r\n        {{=it.getItems()}}\r\n      &lt;/div&gt;\r\n      {{?it.footerItems}}\r\n\t      &lt;div data-bind=&quot;{{=it.dataBind(\&#x27;footerBindings\&#x27;)}}&quot;&gt;\r\n\t      \t{{=it.getItemsProp(\&#x27;footerItems\&#x27;)}}\r\n\t      &lt;/div&gt;\r\n      {{?}}\r\n    &lt;/div&gt;&lt;!-- /.modal-content --&gt;\r\n  &lt;/div&gt;&lt;!-- /.modal-dialog --&gt;\r\n&lt;/div&gt;&lt;!-- /.modal --&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers
 * @class Modal
 */
define(&#x27;Firebrick.ui/containers/Modal&#x27;,[&quot;text!./Modal.html&quot;, &quot;./Base&quot;], function(tpl){
	&quot;use strict&quot;;
	
	return Firebrick.define(&quot;Firebrick.ui.containers.Modal&quot;, {
		extend:&quot;Firebrick.ui.containers.Base&quot;,
		tpl: tpl,
		target:&quot;body&quot;,
		appendTarget: true,
		sName:&quot;containers.modal&quot;,
		init: function(){
			var me = this;
			me.on(&quot;rendered&quot;, function(){
				if(me.showOnCreate){
					me.showMe();	
				}
				me.getElement().on(&quot;hidden.bs.modal&quot;, function(){
					me.destroy();
				});
			});
			return me.callParent(arguments);
		},
		enclosedBind:true,
		/**
		 * @property _modalEl
		 * @private
		 * @type {jQuery Object}
		 * @default null
		 */
		_modalEl: null,
		/**
		 * @method getModalEl
		 * @return {jQuery Object}
		 */
		getModalEl: function(){
			var me = this;
			if(!me._modalEl){
				me._modalEl = $(&quot;&gt; .modal&quot;, me.getElement());
			}
			return me._modalEl;
		},
		/**
		 * show the modal
		 * @method showMe
		 * @return {Object} self
		 */
		showMe: function(){
			var me = this;
			me.getModalEl().modal();
		},
		/**
		 * @property ariaDescribedBy
		 * @type {String}
		 * @default &quot;&quot;
		 */
		ariaDescribedBy: &quot;&quot;,
		/**
		 * if true - the modal will popup after .create() has been called
		 * @property showOnCreate
		 * @type {Boolean}
		 * @default false
		 */
		showOnCreate: true,
		/**
		 * @property title
		 * @type {String}
		 * @default &quot;&quot;
		 */
		title:&quot;&quot;,
		/**
		 * fill the panel body with html
		 * @property html
		 * @type {String|Function}
		 * @default &quot;&quot;
		 */
		html: &quot;&quot;,
		/**
		 * @property titleClass
		 * @type {Boolean}
		 * @default true
		 */
		titleClass: true,
		/**
		 * @property bodyClass
		 * @type {Boolean}
		 * @default true
		 */
		bodyClass: true,
		/**
		 * @property animationClass
		 * @type {String}
		 * @default &quot;fade&quot;
		 */
		animationClass: &quot;fade&quot;,
		/**
		 * @property dialogClass
		 * @type {Boolean}
		 * @default true
		 */
		dialogClass: true,
		/**
		 * @property contentClass
		 * @type {Boolean}
		 * @default true
		 */
		contentClass: true,
		/**
		 * @property headerClass
		 * @type {Boolean}
		 * @default true
		 */
		headerClass: true,
		/**
		 * @property isModal
		 * @type {Boolean}
		 * @default true
		 */
		isModal: true,
		/**
		 * @property footerClass
		 * @type {Boolean}
		 * @default true
		 */
		footerClass: true,
		/**
		 * @property footerItems
		 * @type {Array of Objects}
		 * @default null
		 */
		footerItems: null,
		/**
		 * used to created the &lt;h{int}&gt;&lt;/h{int}&gt; tags in the header
		 * @property titleSize
		 * @type {Integer}
		 * @default 4
		 */
		titleSize:4,
		/**
		 * @property showCloseIcon
		 * @type {Boolean}
		 * @default true
		 */
		showCloseIcon: true,
		/**
		 * screen reader text
		 * @property srCloseText
		 * @type {String}
		 * @default &quot;Close&quot;
		 */
		srCloseText: &quot;Close&quot;,
		/**
		 * @method srCloseIconBindings
		 * @return {Object}
		 */
		srCloseIconBindings: function(){
			var me = this;
			return {
				css:{
					&quot;&#x27;sr-only&#x27;&quot;: true
				},
				text: me.parseBind(me.srCloseText)
			};
		},
		/**
		 * @method closeButtonBindings
		 * @return {Object}
		 */
		closeButtonBindings: function(){
			return {
				attr:{
					type: &quot;&#x27;button&#x27;&quot;,
					&quot;&#x27;data-dismiss&#x27;&quot;: &quot;&#x27;modal&#x27;&quot;
				},
				css:{
					close: true
				}
			};
		},
		/**
		 * @method getTitleId
		 * @return {String}
		 */
		getTitleId: function(){
			return &quot;fb-modal-title-&quot; + this.getId();
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = this.callParent();
			
			obj.css.modal = me.isModal;
			
			obj.attr[&quot;&#x27;aria-labelledby&#x27;&quot;] = me.parseBind(me.getTitleId());
			obj.attr[&quot;&#x27;aria-describedby&#x27;&quot;] = me.parseBind(me.ariaDescribedBy);
			obj.attr.role = &quot;&#x27;dialog&#x27;&quot;;
			obj.attr.tabindex = -1;
			obj.attr[&quot;&#x27;aria-hidden&#x27;&quot;] = true;
			
			if(me.animationClass){
				obj.css[me.animationClass] = true;
			}
			
			return obj;
		},
		/**
		 * @method dialogBindings
		 * @return {Object}
		 */
		dialogBindings: function(){
			var me = this;
			return {
				css: {
					&quot;&#x27;modal-dialog&#x27;&quot;: me.dialogClass
				}
			};
		},
		/**
		 * @method contentBindings
		 * @return {Object}
		 */
		contentBindings: function(){
			var me = this;
			return {
				css: {
					&quot;&#x27;modal-content&#x27;&quot;: me.contentClass
				}
			};
		},
		/**
		 * @method headerBindings
		 * @return {Object}
		 */
		headerBindings: function(){
			var me = this;
			return {
				css: {
					&quot;&#x27;modal-header&#x27;&quot;: me.headerClass
				}
			};
		},
		/**
		 * @method titleBindings
		 * @return {Object}
		 */
		titleBindings: function(){
			var me = this;
			return {
				text: me.textBind( me.title ),
				css: {
					&quot;&#x27;modal-title&#x27;&quot;: me.titleClass
				}
			};
		},
		/**
		 * @method bodyBindings
		 * @return {Object}
		 */
		bodyBindings: function(){
			var me = this, 
				obj ={
					css:{
						&quot;&#x27;modal-body&#x27;&quot;: me.bodyClass
					}
				};
			
			if(!me.items){
				obj.html = &quot;Firebrick.ui.helper.getHtml( &#x27;&quot; + me.getId() + &quot;&#x27;, $data, $context )&quot;;
			}
			
			return obj;
		},
		/**
		 * @method footerBindings
		 * @return {Object}
		 */
		footerBindings: function(){
			var me = this;
			return {
				css:{
					&quot;&#x27;modal-footer&#x27;&quot;: me.footerClass
				}
			};
		},
		/**
		 * close modal
		 * @method close
		 */
		close: function(){
			var me = this;
			me.getModalEl().modal(&quot;hide&quot;);
		}
	});
	
});

define(&#x27;text!Firebrick.ui/containers/tab/Pane.html&#x27;,[],function () { return &#x27;&lt;div data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{=it.getItems()}}\r\n&lt;/div&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * 
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers.tab
 * @class Pane
 */
define(&#x27;Firebrick.ui/containers/tab/Pane&#x27;,[&quot;text!./Pane.html&quot;, &quot;../Base&quot;, &quot;bootstrap.plugins/tab&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.tab.Pane&quot;, {
		extend:&quot;Firebrick.ui.containers.Base&quot;,
		tpl: tpl,
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;fb-ui-tab.pane&quot;
		 */
		sName:&quot;containers.tab.pane&quot;,
		/**
		 * @property active
		 * @type {Boolean}
		 * @default false
		 */
		active: false,
		/**
		 * fill the panel body with html
		 * @property html
		 * @type {String|Function}
		 * @default &quot;&quot;
		 */
		html: &quot;&quot;,
		/**
		 * returns the Tab component, not the TabPane!
		 * @method getTabId
		 * @return {String}
		 */
		getTab: function(){
			return this._parent;
		},
		/**
		 * set by tab
		 * @property paneIndex
		 * @type {integer}
		 * @default 0
		 */
		paneIndex:0,
		/**
		 * @method getPaneId
		 * @return {String}
		 */
		getPaneId: function(){
			var me = this,
				parent = me.getTab();
			
			return parent.getTabId(me.paneIndex);
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent();
		
			obj.attr.role = &quot;&#x27;tabpanel&#x27;&quot;;
			obj.css[&quot;&#x27;tab-pane&#x27;&quot;] = true;
			obj.css.active = me.active;
			
			obj.attr.id = &quot;Firebrick.getById(&#x27;&quot;+me.getId()+&quot;&#x27;).getPaneId()&quot;;

			if(!me.items){
				obj.html = &quot;Firebrick.ui.helper.getHtml( &#x27;&quot; + me.getId() + &quot;&#x27;, $data, $context )&quot;;
			}
			
			return obj;
		},
	});
});

define(&#x27;text!Firebrick.ui/containers/TabPanel.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\r\n\t&lt;ul data-bind=&quot;{{=it.dataBind(\&#x27;listBindings\&#x27;)}}&quot;&gt;\r\n\t\t&lt;!-- ko {{=it.dataBind(\&#x27;listTemplateBindings\&#x27;)}} --&gt;&lt;!-- /ko --&gt;\r\n\t&lt;/ul&gt;\r\n\t\r\n\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;tabContentBindings\&#x27;)}}&quot;&gt;\r\n\t\t{{~ it.items :value:index}}\r\n\t\t\t{{=it.getTabPaneItem(index, value)}}\r\n\t\t{{~}}\r\n\t&lt;/div&gt;\r\n\t\r\n\t&lt;script type=&quot;text/html&quot; id=&quot;{{=it._getListTplId()}}&quot;&gt;\r\n\t\t&lt;li data-bind=&quot;{{=it.dataBind(\&#x27;listItemBindings\&#x27;)}}&quot;&gt;&lt;a data-bind=&quot;{{=it.dataBind(\&#x27;listItemLinkBindings\&#x27;)}}&quot;&gt;&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;listItemTextBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\r\n\t&lt;/script&gt;\r\n\r\n&lt;/div&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.containers.Base
 * @namespace components.containers
 * @class TabPanel
 */
define(&#x27;Firebrick.ui/containers/TabPanel&#x27;,[&quot;text!./TabPanel.html&quot;, &quot;./Base&quot;, &quot;bootstrap.plugins/tab&quot;, &quot;./tab/Pane&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.containers.TabPanel&quot;, {
		extend:&quot;Firebrick.ui.containers.Base&quot;,
		tpl: tpl,
		/**
		* @property sName
		* @type {String}
		* @default &quot;fb-ui-tabpanel&quot;
		*/
		sName: &quot;containers.tabpanel&quot;,
		/**
		 * @private
		 * @method _getListTplId
		 * @return {String}
		 */
		_getListTplId: function(){
			return &quot;fb-ui-tpl-list-&quot; + this.getId(); 
		},
		/**
		 * @private
		 * @method _getTabPaneTplId
		 * @return {String}
		 */
		_getTabPaneTplId: function(){
			return &quot;fb-ui-tpl-tabpane-&quot; + this.getId(); 
		},
		/**
		 * @property _tabs
		 * @private
		 * @type {Array}
		 * @default null
		 */
		_tabs: null,
		/**
		 * @property defaults
		 * @type {Object}
		 * @default {
				sName: &quot;containers.tab.pane&quot;
			}
		 */
		defaults:{
			sName: &quot;containers.tab.pane&quot;
		},
		/**
		 * @method init
		 * @return self
		 */
		init: function(){
			var me = this;
			this._firstTabActive();
			return me.callParent( arguments );
		},
		/**
		 * check if any tab has been set as active, if not, set the first tab active as default
		 * @method _firstTabActive
		 * @return self
		 */
		_firstTabActive: function(){
			var me = this,
			it, 
			active = false,
			length = me.items.length;
		
			for(var i = 0; i&lt;length; i++){
				it = me.items[i];
				if(it.active){
					active = true;
					break;
				}
			}
			
			if(!active &amp;&amp; length){
				//force first tab to be active
				me.items[0].active = true;
			}
			return me;
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent();
			
			obj.attr.role = &quot;&#x27;tabpanel&#x27;&quot;;
			
			return obj;
		},
		/**
		 * @method listTemplateBindings
		 * @return {Object}
		 */
		listTemplateBindings: function(){
			var me = this,
				obj = {};
			
			obj.template = {
					name: me.parseBind( me._getListTplId() ),
					foreach: Firebrick.ui.helper.tabBuilder(me.getId()),
					as:&quot;&#x27;tab&#x27;&quot;
			};
			
			return obj;
		},
		/**
		 * @method listBindings
		 * @return {Object}
		 */
		listBindings: function(){
			var me = this,
				obj = {css:{}, attr:{}};
			
			obj.attr.role = &quot;&#x27;tablist&#x27;&quot;;
			obj.css.nav = true;
			obj.css[&quot;&#x27;nav-tabs&#x27;&quot;] = true;
			
			return obj;
		},
		/**
		 * @method listItemBindings
		 * @return {Object}
		 */
		listItemBindings: function(){
			var me = this,
				obj = {css:{}, attr:{}};
			
			obj.attr.role = &quot;&#x27;presentation&#x27;&quot;;
			obj.css.active = &quot;tab.hasOwnProperty(&#x27;active&#x27;) ? tab.active : false&quot;;
			obj.css.disabled = &quot;tab.disabled&quot;;
			
			return obj;
		},
		/**
		 * @method listItemLinkBindings
		 * @return {Object}
		 */
		listItemLinkBindings: function(){
			var me = this,
				obj = {css:{}, attr:{}};
			
			obj.attr.href = &quot;Firebrick.ui.helper.linkBuilder(tab)&quot;;
			obj.attr[&quot;&#x27;aria-controls&#x27;&quot;] = &quot;tab.id&quot;;
			obj.attr[&quot;&#x27;data-target&#x27;&quot;] = &quot;Firebrick.getById(&#x27;&quot;+me.getId()+&quot;&#x27;).registerTab(tab.id, $index)&quot;;
			obj.attr.role = &quot;&#x27;tab&#x27;&quot;;
			obj.attr[&quot;&#x27;data-toggle&#x27;&quot;] = &quot;tab.disabled !== true ? &#x27;tab&#x27; : false&quot;;
			
			return obj;
		},
		/**
		 * @method listItemTextBindings
		 * @return {Object}
		 */
		listItemTextBindings: function(){
			var me = this,
				obj = {css:{}, attr:{}};
			
			obj.text = me.textBind(&quot;&#x27;+tab.title+&#x27;&quot;);
			
			return obj;
		},
		
		/**
		 * @method tabContentBindings
		 * @return {Object}
		 */
		tabContentBindings: function(){
			var me = this,
				obj = {css:{}, attr:{}};
			
			obj.css[&quot;&#x27;tab-content&#x27;&quot;] = true;
			
			return obj;
		},
		
		/**
		 * @method registerTab
		 * @param tabId {String} optional - generates one if not supplied
		 * @param index {Integer}
		 * @return &quot;#{id}&quot;
		 */
		registerTab: function(tabId, index){
			var me = this, 
				id;
			
			if($.isFunction(index)){
				index = index();
			}
			
			id = tabId || &quot;fb-ui-tab-&quot; + me.getId() + &quot;-&quot; + index;
			
			me.addTab(id);
			
			return &quot;#&quot; + id;
		},
		
		/**
		 * @method addTab
		 * @param id {String}
		 * @return self
		 */
		addTab: function(id){
			var me = this;
			if(!me._tabs){
				me._tabs = [];
			}
			me._tabs.push(id);
			return me;
		},
		
		/**
		 * returns tab id at index position
		 * @method getTabId
		 * @param index {Integer}
		 * @return {String}
		 */
		getTabId: function(index){
			return this._tabs[index];
		},
		
		/**
		 * used when calling {{{getTabPaneItem}}} in template
		 * @method getTabPaneItem
		 * @param {Int} iteration index
		 * @param {Object} iteration object
		 * @param {Context} iteration context
		 * @return {String}
		 */
		getTabPaneItem: function(index, item){
			var me = this,
				newItem;
			
			item.paneIndex = index;
			
			newItem = me._getItems(item);
			
			if(newItem){
				//replace items with the new object - _getItems returns an object {html:&quot;&quot;, items:[]}
				me.items[index] = newItem.items[0];
				
				return newItem.html;
			}
			return &quot;&quot;;
		}
	});
});

define(&#x27;text!Firebrick.ui/display/Alert.html&#x27;,[],function () { return &#x27;&lt;div data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{?it.dismissible}}\r\n      &lt;button data-bind=&quot;{{=it.dataBind(\&#x27;closeButtonBindings\&#x27;)}}&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;srCloseIconBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;&lt;/button&gt;\r\n    {{?}}\r\n    {{?it.title || it.html}}\r\n    \t&lt;h4&gt;{{=fb.text(it.title)}}&lt;/h4&gt;\r\n    \t&lt;p data-bind=&quot;{{=it.dataBind(\&#x27;paragraphBindings\&#x27;)}}&quot;&gt;\r\n    \t&lt;/p&gt;\r\n    {{?? true }}\r\n    \t{{=it.getItems()}}\r\n    {{?}}\r\n\t\r\n&lt;/div&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.display
 * @uses components.common.mixins.Items
 * @class Alert
 */
define(&#x27;Firebrick.ui/display/Alert&#x27;,[&quot;text!./Alert.html&quot;, &quot;../common/Base&quot;, &quot;../common/mixins/Items&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.display.Alert&quot;, {
		extend: &quot;Firebrick.ui.common.Base&quot;,
		mixins:&quot;Firebrick.ui.common.mixins.Items&quot;,
		tpl: tpl,
		sName:&quot;display.alert&quot;,
		/**
		 * whether the alert is dismissible - also controls whether the X button is shown or not
		 * @property dismissible
		 * @type {Boolean}
		 * @default true
		 */
		dismissible: true,
		/**
		 * @property animationClasses
		 * @type {String|false}
		 * @default &quot;fade in&quot;
		 */
		animationClasses:&quot;fade in&quot;,
		/**
		 * alert type, &quot;danger&quot;, &quot;info&quot;, &quot;warn&quot; etc
		 * @property type
		 * @type {String}
		 * @default &quot;danger&quot; 
		 */
		type: &quot;danger&quot;,
		/**
		 * if set, .items will be ignored
		 * @property title
		 * @type {String}
		 * @default &quot;&quot;
		 */
		title:&quot;&quot;,
		/**
		 * fill the panel body with html
		 * @property html
		 * @type {String}
		 * @default &quot;&quot;
		 */
		html: &quot;&quot;,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.attr.role = &quot;&#x27;alert&#x27;&quot;;
			obj.css.alert = true;
			obj.css[&quot;&#x27;alert-dismissible&#x27;&quot;] = me.dismissible;
			if(me.animationClasses){
				obj.css[me.parseBind(me.animationClasses)] = true;
			}
			obj.css[me.parseBind(&quot;alert-&quot; + me.type)] = true;
			
			return obj;
		},
		/**
		 * @method paragraphBindings
		 * @return {Object}
		 */
		paragraphBindings: function(){
			var me = this,
				obj = {};
			
			obj.html = &quot;Firebrick.getById(&#x27;&quot;+me.getId()+&quot;&#x27;).html&quot;;
			
			return obj;
		},
		
		/**
		 * screen reader text
		 * @property srCloseText
		 * @type {String}
		 * @default &quot;Close&quot;
		 */
		srCloseText: &quot;Close&quot;,
		/**
		 * @method srCloseIconBindings
		 * @return {Object}
		 */
		srCloseIconBindings: function(){
			var me = this;
			return {
				css:{
					&quot;&#x27;sr-only&#x27;&quot;: true
				},
				text: me.parseBind(me.srCloseText)
			};
		},
		/**
		 * @method closeButtonBindings
		 * @return {Object}
		 */
		closeButtonBindings: function(){
			return {
				attr:{
					type: &quot;&#x27;button&#x27;&quot;,
					&quot;&#x27;data-dismiss&#x27;&quot;: &quot;&#x27;alert&#x27;&quot;
				},
				css:{
					close: true
				}
			};
		},
	});
});

define(&#x27;text!Firebrick.ui/display/Divider.html&#x27;,[],function () { return &#x27;&lt;hr data-bind=&quot;{{=it.dataBind()}}&quot; /&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.display
 * @class Divider
 */
define(&#x27;Firebrick.ui/display/Divider&#x27;,[&quot;text!./Divider.html&quot;, &quot;../common/Base&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.display.Divider&quot;, {
		extend:&quot;Firebrick.ui.common.Base&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;display.divider&quot;,
		/**
		 * @property tpl
		 * @type {html}
		 */
		tpl: tpl
	});
});

define(&#x27;text!Firebrick.ui/display/Header.html&#x27;,[],function () { return &#x27;&lt;h{{=it.headerSize}} id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{?it.href}}\r\n\t\t&lt;a href=&quot;{{=it.href}}&quot; data-bind=&quot;{{=it.dataBind(\&#x27;hrefBindings\&#x27;)}}&quot;&gt;\r\n\t{{?}}\r\n\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;textBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t&lt;small data-bind=&quot;{{=it.dataBind(\&#x27;secondaryTextBindings\&#x27;)}}&quot;&gt;&lt;/small&gt;\r\n\t{{=it.getLabelTpl()}}\r\n\t{{?it.href}}\r\n\t\t&lt;/a&gt;\r\n\t{{?}}\r\n&lt;/h{{=it.headerSize}}&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.display
 * @class Header
 */
define(&#x27;Firebrick.ui/display/Header&#x27;,[&quot;text!./Header.html&quot;, &quot;../common/Base&quot;, &quot;../common/mixins/Label&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.display.Header&quot;, {
		extend:&quot;Firebrick.ui.common.Base&quot;,
		mixins: &quot;Firebrick.ui.common.mixins.Label&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;display.header&quot;,
		/**
		 * @property tpl
		 * @type {String}
		 */
		tpl:tpl,
		/**
		 * use to determine whether h1, h2, h3 etc - default = 1
		 * @property headerSize
		 * @type {Int}
		 * @default 1
		 */
		headerSize:1,
		/**
		 * @property text
		 * @type {String}
		 * @default &quot;&quot;
		 */
		text:&quot;&quot;,
		/**
		 * @property secondaryText
		 * @type {String}
		 * @default &quot;&quot;
		 */
		secondaryText:&quot;&quot;,
		/**
		 * change to a url if you wish to convert the header into a link
		 * @property href
		 * @type {String}
		 * @default null
		 */
		href: null,
		/**
		 * set to true to add attribute [fb-ignore-router=true] to all links - these links are then ignored by the history api (Firebrick.router.history)
		 * @property ignoreRouter
		 * @type {Boolean}
		 * @default true
		 */
		ignoreRouter: true,
		/**
		 * @method textBindings
		 * @return Object
		 */
		textBindings: function(){
			var me = this,
				obj = {};
			
			obj.text = me.textBind(me.text);
			
			return obj;
		},
		/**
		 * @method secondaryTextBindings
		 * @return Object
		 */
		secondaryTextBindings: function(){
			var me = this;
			if(me.secondaryText){
				return {
					text: me.textBind(me.secondaryText)
				};
			}else{
				return {
					visible:false
				};
			}
		},
		/**
		 * @method hrefBindings
		 * @return {Object}
		 */
		hrefBindings: function(){
			var me = this,
				obj = {attr:{}};
			obj.attr[&quot;&#x27;fb-ignore-router&#x27;&quot;] = &quot;$data.hasOwnProperty( &#x27;ignoreRouter&#x27; ) ? $data.ignoreRouter : &quot; + me.ignoreRouter;
			return obj;
		}
		
	});
});

define(&#x27;text!Firebrick.ui/display/Image.html&#x27;,[],function () { return &#x27;&lt;img id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot; /&gt;&#x27;;});

/*!
* @author Steven Masala [me@smasala.com]
*/

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.display
 * @class Image
 */
define(&#x27;Firebrick.ui/display/Image&#x27;,[&quot;text!./Image.html&quot;, &quot;../common/Base&quot;, &quot;responsive-images&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.display.Image&quot;, {
		extend:&quot;Firebrick.ui.common.Base&quot;,
		sName:&quot;display.image&quot;,
		tpl: tpl,
		/**
		 * @method init
		 */
		init: function(){
			var me = this;
			me.on(&quot;rendered&quot;, function(){
				if(window.responsiveImages){
					window.responsiveImages.update(me.getId());
				}
			});
			this.callParent(arguments);
		},
		/**
		 * @property src
		 * @type {String}
		 * @default &quot;&quot;
		 */
		src: &quot;&quot;,
		/**
		 * use this property for responsive images. Define in order of sizes with the largest first!
		 * @example &quot;xl, l, m, s, xs&quot;
		 * @property sizes
		 * @type {String} predefined sizes or media queries
		 * @default &quot;&quot;
		 */
		sizes: &quot;&quot;,
		/**
		 * use this property in conjunction with &quot;sizes&quot; - mirror the image sizes with that of the &quot;sizes&quot; order
		 * @example &quot;dogXL.jpg, dogL.jpg, dogM.jpg, dogS.jpg, dogXS.jpg&quot;
		 * @property srcset
		 * @type {String} url(s)
		 * @default &quot;&quot;
		 */
		srcset: &quot;&quot;,
		/**
		 * sets &quot;img-responsive&quot; to the image
		 * @property responsiveClass
		 * @type {Boolean}
		 * @default true
		 */
		responsiveClass: true,
		/**
		 * &quot;rounded, &quot;circle&quot;, &quot;thumbnail&quot;
		 * @property imgType
		 * @type {String|Boolean}
		 * @default &quot;rounded&quot;
		 */
		imgType: &quot;rounded&quot;,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.css[&quot;&#x27;img-responsive&#x27;&quot;] = me.responsiveClass;

			if(me.imgType){
				obj.css[ me.parseBind( &quot;img-&quot;+me.imgType ) ] = true;
			}
			
			if(me.sizes){
				obj.attr[&quot;&#x27;data-sizes&#x27;&quot;] = me.sizes;
			}
			
			if(me.srcset){
				obj.attr[&quot;&#x27;data-srcset&#x27;&quot;] = me.srcset;
			}
			
			if(me.src){
				obj.attr.src = me.src;
			}
			
			return obj;
		}
	});
});

define(&#x27;text!Firebrick.ui/display/Loader.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;maskBindings\&#x27;)}}&quot;&gt;&lt;/div&gt;\r\n\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;msgContainerBindings\&#x27;)}}&quot;&gt;\r\n\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;spinnerBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;msgBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t&lt;/div&gt;\t\r\n&lt;/div&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.display
 * @uses components.common.mixins.Items
 * @class Loader
 */
define(&#x27;Firebrick.ui/display/Loader&#x27;,[&quot;text!./Loader.html&quot;, &quot;jquery&quot;, &quot;../common/Base&quot;, &quot;../common/mixins/Items&quot;], function(tpl, $){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.display.Loader&quot;, {
		extend: &quot;Firebrick.ui.common.Base&quot;,
		enclosedBind:true,
		/**
		 * @property target
		 * @type {String or jQuery Object}
		 * @default &quot;body&quot;
		 */
		target: &quot;body&quot;,
		/**
		 * @property appendTarget
		 * @type {Boolean}
		 * @default true
		 */
		appendTarget: true,
		/**
		 * @property mixins
		 * @private
		 * @default &quot;Firebrick.ui.common.mixins.Items&quot;
		 */
		mixins: &quot;Firebrick.ui.common.mixins.Items&quot;,
		/**
		 * @property tpl
		 * @type {String HTML}
		 * @default Loader.html
		 */
		tpl: tpl,
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;display.loader&quot;,
		 */
		sName: &quot;display.loader&quot;,
		/**
		 * @property msgText
		 * @type {String}
		 * @default &quot;Please wait...&quot;
		 */
		msgText: &quot;Please wait...&quot;,
		/**
		 * @method init
		 */
		init: function(){
			var me = this,
				target = me.getTarget();
			
			if(target.is(&quot;input&quot;)){
				me.target = target.parent();
			}
			
			me.on(&quot;rendered&quot;, function(){
				me._initRender();
			});
			return me.callParent( arguments );
		},
		/**
		 * @method _initRender
		 * @private
		 */
		_initRender: function(){
			var me = this,
				target = me.getTarget();
			
			target.addClass(&quot;fb-ui-loader-open&quot;); //TODO: if target is absolute or fixed?
			me.position();
		},
		/**
		 * @method destroy
		 */
		destroy: function(){
			var me = this,
				target = me.getTarget();
			target.removeClass(&quot;fb-ui-loader-open&quot;);
			return me.callParent( arguments );
		},
		/**
		 * @method _getCalcTarget
		 * @return {jQuery Object}
		 */
		_getCalcTarget: function(){
			var me = this;
			return me.target === &quot;body&quot; || me.target === &quot;html&quot; ? $(window) : me.getTarget();
		},
		/**
		 * positions loader
		 * @method position
		 */
		position: function(){
			var me = this,
				$target = me._getCalcTarget(),
				$el = me.getElement(),
				$loader = $(&quot;.fb-ui-loader-msg-container&quot;, $el),
				xPos = $loader.outerWidth() / 2,
				yPos = $loader.outerHeight() / 2;

			$loader.css({
				top: ($target.height() / 2) - yPos,
				left: ($target.width() / 2) - xPos
			});
			
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent( arguments );
			
			obj.css[&quot;&#x27;fb-ui-loader-container&#x27;&quot;] = true;
			
			return obj;
		},
		/**
		 * @method maskBindings
		 * @return {Object}
		 */
		maskBindings: function(){
			var me = this,
				obj = {
					css: {
						&quot;&#x27;fb-ui-loader-mask&#x27;&quot;: true
					}
				};
			return obj;
		},
		/**
		 * @method spinnerBindings
		 * @return {Object}
		 */
		spinnerBindings: function(){
			var me = this,
				obj = {
					css: {
						&quot;&#x27;fb-ui-loader-spinner&#x27;&quot;: true,
						glyphicon: true,
						&quot;&#x27;glyphicon-refresh&#x27;&quot;: true,
						&quot;&#x27;glyphicon-refresh-animate&#x27;&quot;: true
					}
				};
			return obj;
		},
		/**
		 * @method msgContainerBindings
		 * @return {Object}
		 */
		msgContainerBindings: function(){
			var me = this,
				obj = {
					css: {
						&quot;&#x27;fb-ui-loader-msg-container&#x27;&quot;: true
					}
				};
			
			return obj;
		},
		/**
		 * @method msgBindings
		 * @return {Object}
		 */
		msgBindings: function(){
			var me = this,
				obj = {
					css: {
						&quot;&#x27;fb-ui-loader-msg&#x27;&quot;: true
					}
				};
			
			if( me.msgText ){
				obj.text = me.textBind( me.msgText );
			}
			
			return obj;
		}
	});
});

define(&#x27;text!Firebrick.ui/display/Progress.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind(\&#x27;progressContainerBindings\&#x27;)}}&quot;&gt;\r\n\t{{?it.showLabel}}\r\n\t\t&lt;p data-bind=&quot;{{=it.dataBind(\&#x27;progressLabelBindings\&#x27;)}}&quot; &gt;&lt;/p&gt;\r\n\t{{?}}\r\n\t&lt;progress data-bind=&quot;{{=it.dataBind()}}&quot;&gt;&lt;/progress&gt;\r\n&lt;/div&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.display
 * @class Progress
 */
define(&#x27;Firebrick.ui/display/Progress&#x27;,[&quot;text!./Progress.html&quot;, &quot;../common/Base&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.display.Progress&quot;, {
		extend: &quot;Firebrick.ui.common.Base&quot;,
		sName:&quot;display.progress&quot;,
		tpl: tpl,
		/**
		 * progress html5 element max attribute
		 * @property max
		 * @type {Integer|String|Function}
		 * @default 100
		 */
		max:100,
		/**
		 * progress html5 element value attribute
		 * @property value
		 * @type {Integer|String|Function} use a string or function for data binding 
		 * @default 0
		 */
		value:0,
		/**
		 * whether or not to show a label with the progress bar
		 * @property showLabel
		 * @type {Boolean}
		 * @default true
		 */
		showLabel: true,
		/**
		 * used to append to the data-value attribute value
		 * @property dataSymbol
		 * @type {String}
		 * @default &quot;%&quot;
		 */
		dataSymbol: &quot;%&quot;,
		/**
		 * @property label
		 * @type {String}
		 * @default &quot;&quot;
		 */
		label: &quot;&quot;,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.attr.max = me.max;
			obj.attr.value = me.value;
			obj.text = me.parseBind(me.value+&quot;%&quot;);
			
			return obj;
		},
		/**
		 * @method progressLabelBindings
		 */
		progressLabelBindings: function(){
			var me = this;
			return {
				css: {
					&quot;&#x27;progress-label&#x27;&quot;: true
				},
				attr: {
					&quot;&#x27;data-symbol&#x27;&quot;: me.parseBind(me.dataSymbol),
					&quot;&#x27;data-value&#x27;&quot;: me.value
				},
				text: me.textBind(me.label),
				style: {
					width: me.parseBind(me.value+&quot;%&quot;)
				}
			};
		},
		/**
		 * @method progressContainerBindings
		 */
		progressContainerBindings: function(){
			return {
				css:{
					&quot;&#x27;progress-container&#x27;&quot;: true
				}
			};
		}
	});
});

define(&#x27;text!Firebrick.ui/display/Span.html&#x27;,[],function () { return &#x27;&lt;span id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;&lt;/span&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.display
 * @class Span
 */
define(&#x27;Firebrick.ui/display/Span&#x27;,[&quot;text!./Span.html&quot;, &quot;../common/Base&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.display.Span&quot;, {
		extend: &quot;Firebrick.ui.common.Base&quot;,
		sName:&quot;display.span&quot;,
		tpl: tpl,
		/**
		 * @property text
		 * @type {String}
		 * @default &quot;&quot;
		 */
		text:&quot;&quot;,
		/**
		 * set as &quot;primary&quot;, &quot;default&quot;, &quot;warning&quot;, &quot;danger&quot;, &quot;success&quot;, &quot;info&quot; to convert the span to a BS label component
		 * @property labelStyle
		 * @type {String}
		 * @default &quot;&quot;
		 */
		labelStyle: &quot;&quot;,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.text = &quot;Firebrick.getById(&#x27;&quot;+me.getId()+&quot;&#x27;).text&quot;;
			
			if(me.labelStyle){
				me.css.label = true;
				me.css[me.parseBind(&quot;label-&quot; + me.labelStyle)] = true;
			}
			
			return obj;
		}
	});
});

define(&#x27;text!Firebrick.ui/display/Text.html&#x27;,[],function () { return &#x27;{{?it.blockQuote}}\r\n&lt;blockquote data-bind=&quot;{{=it.dataBind(\&#x27;blockQuoteBindings\&#x27;)}}&quot;&gt;\r\n{{?}}\r\n\t&lt;p data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t&lt;/p&gt;\r\n\t{{?it.blockQuoteFooter}}\r\n\t&lt;footer data-bind=&quot;{{=it.dataBind(\&#x27;blockQuoteFooterBindings\&#x27;)}}&quot;&gt;&lt;/footer&gt;\r\n\t{{?}}\r\n{{?it.blockQuote}}\r\n&lt;/blockquote&gt;\r\n{{?}}&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.display
 * @class Text
 */
define(&#x27;Firebrick.ui/display/Text&#x27;,[&quot;text!./Text.html&quot;, &quot;../common/Base&quot;], function(tpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.display.Text&quot;, {
		extend: &quot;Firebrick.ui.common.Base&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;display.text&quot;,
		/**
		 * @property tpl
		 * @type {String}
		 */
		tpl:tpl,
		/**
		 * whether text is raw html or not
		 * @property isHtml
		 * @type {Boolean}
		 * @default false
		 */
		isHtml:false,
		/**
		 * @property text
		 * @type {String}
		 * @default &quot;&quot;
		 */
		text:&quot;&quot;,
		/**
		 * @property leadCSS
		 * @type {Boolean}
		 * @default false
		 */
		leadCSS:false,
		/**
		 * @property blockQuote
		 * @type {Boolean}
		 * @default false
		 */
		blockQuote:false,
		/**
		 * @property blockQuoteReverseCSS
		 * @type {Boolean}
		 * @default false
		 */
		blockQuoteReverseCSS: false,
		/**
		 * false not to show, string for footer text
		 * @property blockQuoteFooter
		 * @type {Boolean|String}
		 * @default false
		 */
		blockQuoteFooter:false,
		/**
		 * @property isBlockQuoteFooterHTML
		 * @type {Boolean}
		 * @default false
		 */
		isBlockQuoteFooterHTML: false,
		/**
		 * false || string :: &#x27;left&#x27;, &#x27;center&#x27;, &#x27;right&#x27;, &#x27;justify&#x27;, &#x27;no-wrap&#x27; (defaults to: left)
		 * @property textAlignment
		 * @type {Boolean|String}
		 * @default &quot;&quot;
		 */
		textAlignment:&quot;&quot;,
		/**
		 * Bindings
		 * @method bindings
		 * @return {Object}
		 */
		bindings:function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.css.lead = me.leadCSS;
			
			if(me.textAlignment){
				obj.css[ me.parseBind(&quot;text-&quot;+me.textAlignment) ] = true;	
			}
			
			if(me.isHtml){
				obj.html = me.text; 
			}else if(me.text){
				obj.text = me.textBind(me.text);
			}
			
			return obj;
		},
		/**
		 * @method blockQuoteBindings
		 * @return {Object}
		 */
		blockQuoteBindings: function(){
			return {
				css:{
					&quot;&#x27;blockquote-reverse&#x27;&quot;: this.blockQuoteReverseCSS
				}
			};
		},
		/**
		 * @method blockQuoteFooterBindings
		 * @return {Object}
		 */
		blockQuoteFooterBindings: function(){
			var me = this,
				obj = {};
			if(me.isHtml){
				obj.html = me.blockQuoteFooter; 
			}else{
				obj.text = me.textBind(me.blockQuoteFooter);
			}
			return obj;
		}
	});
});

define(&#x27;text!Firebrick.ui/fields/Radio.html&#x27;,[],function () { return &#x27;{{?it.showOptionLabel}}\r\n&lt;label data-bind=&quot;{{=it.dataBind(\&#x27;optionLabelContainerBindings\&#x27;)}}&quot;&gt;\r\n{{?}}\r\n\t{{=it.getParentSubTpl()}}\r\n{{?it.showOptionLabel}}\r\n\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;optionLabelBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n&lt;/label&gt;\r\n{{?}}&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.MultiplesBase
 * @namespace components.fields
 * @class Radio
 */
define(&#x27;Firebrick.ui/fields/Radio&#x27;,[&quot;text!./Radio.html&quot;, &quot;../common/MultiplesBase&quot;], function(subTpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.Radio&quot;, {
		extend:&quot;Firebrick.ui.common.MultiplesBase&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;fields.radio&quot;,
		/**
		 * @property type
		 * @type {String}
		 * @default &quot;&#x27;radio&#x27;&quot;
		 */
		type:&quot;radio&quot;,
		/**
		 * @property dataType
		 * @type {String}
		 * @default &quot;&#x27;radiolist&#x27;&quot;
		 */
		dataType:&quot;radiolist&quot;,
		/**
		 * @property subTpl
		 * @type {String} html
		 */
		subTpl:subTpl,
		/**
		 * @property showOptionLabel
		 * @type {Boolean}
		 * @default true
		 */
		showOptionLabel: true,
		/**
		 * radio options
		 * @property options
		 * @type {Boolean|String}
		 * @default false
		 */
		options:false,
		/**
		 * @property optionsPropValue
		 * @type {String}
		 * @default &quot;value&quot;
		 */
		optionsPropValue: &quot;value&quot;,
		/**
		 * @property optionsPropText
		 * @type {String}
		 * @default &quot;text&quot;
		 */
		optionsPropText: &quot;text&quot;,
		/**
		 * @method optionLabelBindings
		 * @return {Object}
		 */
		optionLabelBindings:function(){
			var me = this;
			if(!me.inplaceEdit){
				return {
					text: &quot;$data.text ? Firebrick.text($data.text) : &#x27;&#x27;&quot;
				};
			}
			return {};
		},
		
		/**
		 * @method optionLabelContainerBindings
		 * @return {Object}
		 */
		optionLabelContainerBindings:function(){
			var me = this;
			return {
				attr: {
					&quot;for&quot;: me.inplaceEdit ?  me.parseBind(me.getId()) : &quot;itemId&quot;
				}
			};
		},
		/**
		 * @method inputContainerBindings
		 * @return {Object}
		 */
		inputContainerBindings:function(){
			var me = this,
				obj = me.callParent(arguments);
			
			if(me.options &amp;&amp; !me.inplaceEdit){
				obj.foreach = Firebrick.ui.helper.optionString(me);
			}
			
			obj.attr = obj.attr || {};
			obj.attr.id = me.parseBind(me.getId());
			
			return obj;
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings:function(){
			var me = this,
				obj = me.callParent(arguments),
				value = me.value || null;
			
			if($.isPlainObject(value) &amp;&amp; value.value){
				if($.isFunction(value.value)){
					value = value.value();
				}else{
					value = value.value;
				}
			}
			
			if(me.inplaceEdit){
				obj.editable = me.selectedOptions || false;
				obj.editableOptions = {
						optionsValue:me.parseBind(me.optionsPropValue),
						optionsText:me.parseBind(me.optionsPropText),
						options:Firebrick.ui.helper.optionString(me),
						type:&quot;&#x27;checklist&#x27;&quot;
				};
			}
			
			obj.css[&quot;&#x27;form-control&#x27;&quot;] = false;
			if(!me.inplaceEdit){
				obj.value = &quot;$data.value ? $data.value : $data&quot;;
				obj.attr.id = &quot;itemId&quot;;
			}else{
				obj.attr.id =  me.parseBind(me.getId());
			}
			obj.attr.name = me.parseBind( me.cleanString(me.type)+&quot;-group-&quot;+Firebrick.utils.uniqId() );
			if(value !== null){
				obj.checked = value;
			}else{
				obj.checked = &quot;($data &amp;&amp; $data.checked)&quot;;
			}
			
			obj.attr[&quot;&#x27;data-cmp-id&#x27;&quot;] = me.parseBind(me.getId());
			
			return obj;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.fields.Radio
 * @namespace components.fields
 * @class Checkbox
 */
define(&#x27;Firebrick.ui/fields/Checkbox&#x27;,[&quot;./Radio&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.Checkbox&quot;, {
		extend:&quot;Firebrick.ui.fields.Radio&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;fields.checkbox&quot;,
		/**
		 * @property type
		 * @type {String}
		 * @default &quot;&#x27;checkbox&#x27;&quot;
		 */
		type:&quot;checkbox&quot;,
		/**
		 * @property dataType
		 * @type {String}
		 * @default &quot;&#x27;checklist&#x27;&quot;
		 */
		dataType:&quot;checklist&quot;,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings:function(){
			var me = this,
				obj = me.callParent(arguments);

			if(me.inplaceEdit){
				obj.editable = me.selectedOptions || false;
				obj.editableOptions = {
						optionsValue:me.parseBind(me.optionsPropValue),
						optionsText:me.parseBind(me.optionsPropText),
						options:me.options,
						type:  me.parseBind( me.dataType )
				};
			}
			
	
			return obj;
		}
	});
});

define(&#x27;text!Firebrick.ui/fields/combo/Group.html&#x27;,[],function () { return &#x27;&lt;div class=&quot;fb-ui-combo-group-item&quot;&gt;\r\n\t&lt;span class=&quot;fb-ui-combo-group-title&quot;&gt;{{=it[it._scope.groupLabelKey || it._scope.labelKey]}}&lt;/span&gt;\r\n\t&lt;div class=&quot;fb-ui-combo-group-children&quot;&gt;\r\n\t&lt;/div&gt;\r\n&lt;/div&gt;&#x27;;});


define(&#x27;text!Firebrick.ui/fields/combo/Item.html&#x27;,[],function () { return &#x27;&lt;div class=&quot;fb-ui-combo-item&quot;&gt;\r\n\t&lt;span&gt;{{=it[it._scope.labelKey]}}&lt;/span&gt;\r\n&lt;/div&gt;&#x27;;});


define(&#x27;text!Firebrick.ui/fields/combo/Value.html&#x27;,[],function () { return &#x27;&lt;div class=&quot;fb-ui-combo-value-item&quot; data-value=&quot;{{=it[it._scope.valueKey]}}&quot;&gt;\r\n\t&lt;span&gt;{{=it[it._scope.labelKey]}}&lt;/span&gt;\r\n&lt;/div&gt;&#x27;;});


define(&#x27;text!Firebrick.ui/fields/ComboBox.html&#x27;,[],function () { return &#x27;&lt;div id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;valueBindings\&#x27;)}}&quot;&gt;&lt;/div&gt;\r\n\t&lt;input type=&quot;text&quot; data-bind=&quot;{{=it.dataBind(\&#x27;inputBindings\&#x27;)}}&quot; /&gt;\r\n\t{{?it.showCaret}}\r\n\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;singleSelectBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t{{?}}\r\n\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;clearIconBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n&lt;/div&gt;\r\n&lt;div data-for=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind(\&#x27;resultBindings\&#x27;)}}&quot;&gt;&lt;/div&gt;\r\n&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * Firebrick suggestions engine
 * @module Firebrick.engine
 * @class Suggest
 */
define(&#x27;Firebrick.ui.engines/Suggest&#x27;,[&quot;jquery&quot;, &quot;firebrick&quot;], function($){
	&quot;use strict&quot;;
	
	return Firebrick.define(&quot;Firebrick.ui.engines.Suggest&quot;, {
		/**
		 * @property store
		 * @type {Firebrick.store.Base}
		 * @default null
		 */
		store: null,
		/**
		 * local | remote
		 * @property mode
		 * @type {String}
		 * @default &quot;local&quot;
		 */
		mode: &quot;local&quot;,
		/**
		 * @property _cache
		 * @private
		 * @type {Object}
		 */
		_cache: null,
		/**
		 * set this property if you wish to find matches for a certain property
		 * {name:&quot;Steven&quot;, age: 10} - searchKey = &quot;age&quot; will result in all queries searching the age property
		 * set as null|false if you want to search in all properties (if data is an object and not primitive value)
		 * @property searchKey
		 * @type {String | Array of Strings | null | false}
		 * @default null;
		 */
		searchKeys: null,
		/**
		 * used to prefetch data on init
		 * @property prefetch
		 * 	 .url {String}
		 * @type {Object}
		 * @default null
		 */
		prefetch: null,
		/**
		 * @method init
		 */
		init: function(){
			var me = this;
			me._initCache();
		},
		/**
		 * @method _initCache
		 */
		_initCache: function(){
			var me = this;
			me._cache = {};
		},
		/**
		 * clears cache (search indexes)
		 * @method clear
		 */
		clear: function(){
			me._initCache();
		},
		/**
		 * used to filter out items in when performing a query
		 * @method filter
		 * @param value {Value Object}
		 * @return {Boolean}
		 */
		filter: function(){
			return true;
		},
		/**
		 * @method query
		 * @param query {String}
		 * @param callback {Function}
		 */
		query: function(query, callback){
			var me = this,
				matches = [],
				data,
				ajax;
			
			if(me.store){
				if( me.mode === &quot;remote&quot; ){
					me.store.load({
						suggest:{
							query: query
						},
						callback: function(data){
							matches = me._query(query, me.store.toPlainObject());
							callback( matches );
						}
					});
				}else if( me.mode === &quot;local&quot; ){
					if(!me._cache[query]){
						matches = me._query(query, me.store.toPlainObject());
					    me._cache[query] = matches;
					}else{
						data = me._cache[query];
						matches = me._cache[query].filter( function(){
							return me.filter.apply(me, arguments);
						});
					}
					
					callback( matches );
				}
			}
		},
		/**
		 * @method _query
		 * @param query {String}
		 * @param data {Array | JSON Object}
		 * @return matches {Array}
		 */
		_query: function(query, data){
			var me = this,
				matches = [],
				childMatches = [],
				tmp,
				lookups,
				lukup,
				substrRegex = new RegExp(query, &#x27;i&#x27;),
				it;

			for(var i = 0, l = data.length; i&lt;l; i++){
		    	it = data[i];
		    	if( me.filter(it) ){
		    		if( it.exclude !== true ){	//if exclude === true then ignore this node and children
		    			if(it.suggestable !== false){ //suggestable === false means that the current node is ignored but not their children
		    				lookups = me._getSearchStrings( it );
				    		for(var ii = 0, ll = lookups.length; ii&lt;ll; ii++){
						    	//search for a match
				    			lukup = lookups[ii];
				    			//check for Knockout observables - maybe needed if store is defined for data
				    			lukup = $.isFunction( lukup ) ? lukup() : lukup;
						    	if( substrRegex.test( lukup ) ){
						    		matches.push(it);
						    		//break lookups loop
						    		break;
						    	}
				    		}
		    			}
		    			if($.isArray(it.children)){
		    				//has child nodes
		    				//search child nodes too
		    				childMatches = me._query(query, it.children);
		    				if( childMatches.length ){
		    					tmp = Firebrick.utils.copyover({}, it);	//make a new copy of the parent node
		    					tmp.children = childMatches;	//add the matches to it
		    					matches.push(tmp);
		    				}
		    			}
		    		}
		    	}
		    }
			
			return matches;
		},
		/**
		 * returns an array of all the data which can be tested by the query method
		 * @method _getSearchStrings
		 * @param value {Any} query iteration value
		 * @return {Array}
		 */
		_getSearchStrings: function( value ){
			var me = this,
				searchKeys = me.searchKeys,
				str = [],
				sk;

			//e.g. value = {text:&quot;Java&quot;, desc:&quot;some kinda of programming language&quot;, icon:&quot;java.png&quot;}
			if( $.isPlainObject(value) ){
				//searchKeys !== null
				if(searchKeys){
					//searchKeys === [&quot;text&quot;, &quot;desc&quot;];
					if( $.isArray( searchKeys ) ){
						for(var i = 0, l = searchKeys.length; i&lt;l; i++){
							sk = searchKeys[i];
							if( value.hasOwnProperty( sk ) ){
								str.push( value[sk] );	
							}
						}
					}else{
						if( value.hasOwnProperty( searchKeys ) ){
							str.push( value[searchKeys] );	
						}
					}
				}else{
					//searchKeys === null. get all
					for(var key in value){
						if( value.hasOwnProperty(key) ){
							str.push( value[key] );
						}
					}
				}
			}else{
				//value === primitive type, string, int, boolean etc
				str.push( value );
			}
			
			return str;
		}
	});
	
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.fields.Input
 * @namespace components.fields
 * @class ComboBox
 */
define(&#x27;Firebrick.ui/fields/ComboBox&#x27;,[&quot;text!./ComboBox.html&quot;, 
        &quot;jquery&quot;, 
        &quot;text!./combo/Item.html&quot;,
        &quot;text!./combo/Group.html&quot;,
        &quot;text!./combo/Value.html&quot;, 
        &quot;doT&quot;, 
        &quot;knockout&quot;, 
        &quot;./Input&quot;, 
        &quot;Firebrick.ui.engines/Suggest&quot;,
        &quot;../display/Loader&quot;], function(subTpl, $, comboItemTpl, comboGroupTpl, valueItemTpl, tplEngine, ko){
	&quot;use strict&quot;;
	
	return Firebrick.define(&quot;Firebrick.ui.fields.ComboBox&quot;, {
		extend:&#x27;Firebrick.ui.fields.Input&#x27;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;fields.combobox&quot;,
		/**
		 * @property subTpl
		 * @type {String} html
		 */
		subTpl:subTpl,
		/**
		 * @property multiSelect
		 * @type {Boolean}
		 * @default false
		 */
		multiSelect: false,
		/**
		 * @property maxItems
		 * @type {Integer|false}
		 * @default false
		 */
		maxItems: false,
		/**
		 * forces the select of an item
		 * @property forceSelect
		 * @type {Boolean}
		 * @default false
		 */
		forceSelect: false,
		/**
		 * set typeahead to 0 to show result to on focus
		 * @property typeahead
		 * @type {Integer}
		 * @default 1
		 */
		typeahead: 1,
		/**
		 * @property store
		 * @default null
		 */
		store: null,
		/**
		 * @property itemTpl
		 * @type {String|Function}
		 */
		itemTpl: comboItemTpl,
		/**
		 * @property groupTpl
		 * @type {String|Function}
		 */
		groupTpl: comboGroupTpl,
		/**
		 * @property valueTpl
		 * @type {String|Function}
		 */
		valueTpl: valueItemTpl,
		/**
		 * used to store generated templates - performance - initialised by precompile()
		 * @property _itemTemplate
		 * @private
		 * @type {Object}
		 * @default null
		 */
		_itemTemplate: null,
		/**
		 * @property _resultsVisible
		 * @private
		 * @type {Boolean}
		 * @default false
		 */
		_resultsVisible: false,
		/**
		 * @property labelKey
		 * @type {String}
		 * @default &quot;text&quot;
		 */
		labelKey: &quot;text&quot;,
		/**
		 * @property valueKey
		 * @type {String}
		 * @default &quot;value&quot;
		 */
		valueKey: &quot;value&quot;,
		/**
		 * only set if needed different to labelKey
		 * @property groupLabelKey
		 * @type {String}
		 * @default null
		 */
		groupLabelKey: null,
		/**
		 * @property _valueEl
		 * @private
		 * @type {jQuery Object}
		 * @default null
		 */
		_valueEl: null,
		/**
		 * used to configure suggestion engine object hash
		 * @property suggest
		 * @type {Object}
		 * @default null
		 */
		suggest: null,
		/**
		 * property holder for suggestion engine after construction
		 * @property _engine
		 * @private
		 * @type {Object}
		 * @default null
		 */
		_engine: null,
		/**
		 * used on keydown and when search is performed to minimise searches to when the user has stopped typing
		 * @property _timestamp
		 * @private
		 * @type {Integer} timestamp
		 * @default null
		 */
		_timestamp: null,
		/**
		 * @method getValueEl
		 * @return {jQuery Object}
		 */
		getValueEl: function(){
			var me = this;
			if(!me._valueEl){
				me._valueEl = $(&quot;&gt; .fb-ui-combo-values&quot;, me.getElement());
			}
			return me._valueEl;
		},
		/**
		 * @property _inputEl
		 * @private
		 * @type {jQuery Object}
		 * @default null
		 */
		_inputEl: null,
		/**
		 * @method getInputEl
		 * @return {jQuery Object}
		 */
		getInputEl: function(){
			var me = this;
			if(!me._inputEl){
				me._inputEl = $(&quot;&gt; input.fb-ui-combo-input&quot;, me.getElement());
			}
			return me._inputEl;
		},
		/**
		 * @property showCaret
		 * @type {Boolean}
		 * @default true
		 */
		showCaret: true,
		/**
		 * @property _caretEl
		 * @private
		 * @type {jQuery Object}
		 * @default null
		 */
		_caretEl: null,
		/**
		 * @method getCaretEl
		 * @return {jQuery Object}
		 */
		getCaretEl: function(){
			var me = this;
			if(!me._caretEl){
				me._caretEl = $(&quot;&gt; .fb-ui-combo-select&quot;, me.getElement());
			}
			return me._caretEl;
		},
		/**
		 * @property _resultEl
		 * @private
		 * @type {jQuery Object}
		 * @default null
		 */
		_resultEl: null,
		/**
		 * @method getResultEl
		 * @return {jQuery Object}
		 */
		getResultEl: function(){
			var me = this;
			if(!me._resultEl){
				me._resultEl = me.getElement().next(&quot;.fb-ui-combo-result[data-for=&#x27;&quot; + me.getId() + &quot;&#x27;]&quot;);
			}
			return me._resultEl;
		},
		/**
		 * @property _clearIcon
		 * @private
		 * @type {jQuery Object}
		 * @default null
		 */
		_clearIconEl: null,
		/**
		 * @method getClearIconEl
		 * @return {jQuery Object}
		 */
		getClearIconEl: function(){
			var me = this;
			if(!me._clearIconEl){
				me._cleanIconEl = $(&quot;.fb-ui-combo-clear-icon&quot;, me.getElement());
			}
			return me._cleanIconEl;
		},
		/**
		 * override base function
		 * @method focus
		 */
		focus: function(){
			this.getInputEl().focus();
		},
		/**
		 * @method init
		 */
		init: function(){
			var me = this;
			
			me._itemTemplate = {};
			
			me.on(&quot;rendered&quot;, function(){
				me._initSuggestionEngine();
				me._initRendered();
			});
			
			me.on(&quot;removeAll&quot;, function(){
				me.getClearIconEl().hide();
			});
			
			return me.callParent(arguments);
		},
		/**
		 * @method _initSuggestionEngine
		 */
		_initSuggestionEngine: function(){
			var me = this,
				conf = {
					store: me.store,
					filter: function(val){
						//used to exclude results from future selections - local mode
						return !val._exclude;
					}
				};
			
			conf = Firebrick.utils.overwrite(conf, (me.suggest || {}) );
			
			me._engine = Firebrick.create(&quot;Firebrick.ui.engines.Suggest&quot;, conf );
		},
		/**
		 * @method _initRendered
		 * @private
		 */
		_initRendered: function(){
			var me = this,
				$el = me.getElement(),
				$input = me.getInputEl(),
				$result = me.getResultEl(),
				$clearIcon = me.getClearIconEl();
			
			$el.on({
				click: function(){
					return me._onClick.apply(me, arguments);
				}
			});
			
			$clearIcon.on({
				click: function(){
					return me._onClearIconClick.apply(me, arguments);
				}
			});

			$input.on(&quot;keydown keyup fb.update blur&quot;, function(){
				return me.resizeInput.apply(me, arguments);
			});
			
			$input.on({
				focus: function(){
					return me._onFocus.apply(me, arguments);
				},
				keydown: function(){
					return me._onKeyDown.apply(me, arguments);
				},
				keyup: function(){
					return me._onKeyUp.apply(me, arguments);
				},
				blur: function(){
					return me._onBlur.apply(me, arguments);
				}
			});
			
			$result.on(&quot;mousedown&quot;, &quot;.fb-ui-combo-item&quot;, function(){
				return me._onItemClick.apply(me, arguments);
			});
			
			$result.on(&quot;mouseover&quot;, &quot;.fb-ui-combo-item&quot;, function(){
				return me._onMouseOver.apply(me, arguments);
			});
			
			if(me.multiSelect){
				$el.on(&quot;click&quot;, &quot;.fb-ui-combo-value-item&quot;, function(){
					return me.removeItem( $(this) );
				});
			}
			
			me.on({
				expand: function(){
					var me = this,
						$el = me.getElement(),
						$result = me.getResultEl(),
						$active = me.getActiveItem(),
						$first;
					
					$el.addClass(&quot;open&quot;);
					
					if(me.forceSelect &amp;&amp; !$active.length){
						$first = $(&quot;.fb-ui-combo-item:first-child&quot;, $result);
						if($first.length){
							me.markActive($first);
						}
					}
					
				},
				collapse: function(){
					me.resultDefaults();
				}
			});
		},
		/**
		 * default actions on results expand/collapse
		 * @method resultsDefault
		 */
		resultDefaults: function(){
			var me = this,
				$el = me.getElement();
			
			$el.removeClass(&quot;open&quot;);
		},
		/**
		 * @method onFocus
		 * @private
		 */
		_onFocus: function(){
			var me = this;
			
			me.showResults();
			
			if(me.getValue().length){
				me.getClearIconEl().show();
			}
			
		},
		/**
		 * @method _onClick
		 * @private
		 */
		_onClick: function(){
			var me = this,
				$el = me.getElement(),
				$input = me.getInputEl();
			$input.focus();
		},
		/**
		 * @method _onClearIconClick
		 * @private
		 */
		_onClearIconClick: function(){
			this.removeAll();
		},
		/**
		 * @method _onItemClick
		 * @private
		 */
		_onItemClick: function(){
			var me = this;
			me.selectActive();
		},
		/**
		 * @method _onMouseOver
		 * @private
		 */
		_onMouseOver: function(event){
			var me = this,
				clazz = &quot;fb-ui-combo-item&quot;,
				selector = &quot;.&quot; + clazz,
				$item = $(event.target);
			
				if(!$item.hasClass(clazz)){
					$item = $item.parent(selector);
				}
			
				me.markActive( $item );
		},
		/**
		 * @method onKeyDown
		 * @private
		 */
		_onKeyDown: function(event){
			var me = this,
				key = event.which,
				KeyEvent = Firebrick.ui.KeyEvents,
				$input = me.getInputEl();
			
			if(key === KeyEvent.DOM_VK_RETURN){
				event.preventDefault();
			}else if(key === KeyEvent.DOM_VK_BACK_SPACE){
				if(!$input.val()){
					me.removeLastItem();	
				}
			}
			
			me._arrowKey(key);
			
			me._timestamp = new Date().getTime();
		},
		/**
		 * @method _onKeyUp
		 * @private
		 */
		_onKeyUp: function(event){
			var me = this,
				key = event.which,
				KeyEvent = Firebrick.ui.KeyEvents,
				$el = me.getElement(),
				$input = me.getInputEl();
			
			if(!me.actionKey(key)){
				if($input.val().trim()){
					
					Firebrick.delay(function(){
						var t = new Date().getTime();
						if( (t - me._timestamp) &gt;= 300 ){
							me._timestamp = t;
							me.showResults();
						}
					}, 301);
					
				}else{
					me.hideResults();
				}
			}else{
				if(key === KeyEvent.DOM_VK_RETURN){
					event.preventDefault();
					me.selectActive();
				}else if( key === KeyEvent.DOM_VK_DOWN){
					if(!$input.val()){
						//show all
						if(!me._resultsVisible){
							me.showResults();	
						}
					}
				}
			}
			
		},
		/**
		 * @method _onBlur
		 * @private
		 */
		_onBlur: function(){
			var me = this;
			if(me.forceSelect){
				//TODO: only if no value already set
				if(!me.getValue().length){
					me.selectActive();	
				}
			}
			Firebrick.delay(function(){
				me.getClearIconEl().hide();	
			}, 200);
			me.reset();
		},
		/**
		 * @method reset
		 */
		reset: function(){
			var me = this;
			me.hideResults();
			me.clearInput();
		},
		/**
		 * @method resizeInput
		 */
		resizeInput: function(){
			var me = this,
				$input = me.getInputEl(),
				currentWidth = $input.width(),
				width = me._measureWidth($input) + 8;
			if (width !== currentWidth) {
				$input.width(width);
			}
		},
		/**
		 * @method _measureWidth
		 * @private
		 * @return {Integer}
		 */
		_measureWidth: function($input){
			var $tmp = $(&quot;&lt;tmp&gt;&quot;).css({
					position: &quot;absolute&quot;,
					top: -99999,
					left: -99999,
					width: &quot;auto&quot;,
					padding: 0,
					whiteSpace: &#x27;pre&#x27;
				}).text($input.val()).appendTo(&quot;body&quot;),
				styles = [&#x27;letterSpacing&#x27;,
				&#x27;fontSize&#x27;,
				&#x27;fontFamily&#x27;,
				&#x27;fontWeight&#x27;,
				&#x27;textTransform&#x27;],
				style,
				copiedStyles = {},
				width;
			
			for(var i = 0, l = styles.length; i&lt;l; i++){
				style = styles[i];
				copiedStyles[style] = $input.css(style);
			}
			
			$tmp.css(copiedStyles);
			width = $tmp.width();
			$tmp.remove();
			return width;
		},
		/**
		 * @method actionKey
		 * @return {Boolean}
		 */
		actionKey: function(keyCode){
			var KeyEvent = Firebrick.ui.KeyEvents;
			
			if(	keyCode === KeyEvent.DOM_VK_DOWN || 
				keyCode === KeyEvent.DOM_VK_UP ||
				keyCode === KeyEvent.DOM_VK_RETURN ) {
				return true;
			}
			
			return false;
		},
		/**
		 * @method getActiveItem
		 * @return {jQuery Object} 
		 */
		getActiveItem: function(){
			var me = this,
				$item = $(&quot;.fb-ui-combo-item.active&quot;, me.getResultEl());
			return $item;
		},
		
		/**
		 * @method markActive
		 * @param $item {jQuery Object}
		 */
		markActive: function($item){
			var me = this,
				$active = me.getActiveItem();
			if($item.length){
				$active.removeClass(&quot;active&quot;);
				$item.addClass(&quot;active&quot;);
				$item.focus();
			}
		},
		/**
		 * @method selectActive
		 * @param $item {jQuery Object} optional
		 */
		selectActive: function($item){
			var me = this,
				$active = $item || me.getActiveItem(),
				options = me.options,
				data = {},
				index,
				values = [];
					
			if($active.length){

				data = $active.prop(&quot;data-value&quot;);
				
				//exclude result from future searches
				data._exclude = true;
				
				values.push( data );

				me.setValue( values );
				
				if(values.length){
					me.getClearIconEl().show();
				}
			}
			
		},
		/**
		 * @event removeAll
		 * @method removeAll
		 */
		removeAll: function(){
			var me = this,
				oldValue = me.getValue(),
				$items = $(&quot;.fb-ui-combo-value-item&quot;, me.getValueEl());
			
			for(var i = 0, l = $items.length; i&lt;l; i++){
				//remove exclude filter on all items
				$( $items[0] ).prop(&quot;data-value&quot;)._exclude = false;
			}
			
			$items.remove();
			me._checkChange(me.getValue(), oldValue);
			me.fireEvent(&quot;removeAll&quot;);
		},
		/**
		 * @event removeItem
		 * @method removeItem
		 * @param $item {jQuery Item}
		 */
		removeItem: function($item){
			var me = this,
				oldValue = me.getValue(),
				data = $item.prop(&quot;data-value&quot;);
			data._exclude = false;
			$item.remove();
			me._checkChange(me.getValue(), oldValue);
			me.on(&quot;removeItem&quot;);
		},
		/**
		 * @method removeLastItem
		 */
		removeLastItem: function(){
			var me = this,
				$items = $(&quot;.fb-ui-combo-value-item&quot;, me.getValueEl()),
				$last = $items.last();
			
			if($items.length === 1 &amp;&amp; me.forceSelect){
				return;
			}
			
			if($last.length){
				me.removeItem( $last );	
			}
		},
		/**
		 * @method clearInput
		 */
		clearInput: function(){
			var me = this,
				$input = me.getInputEl();
			
			$input.val(&quot;&quot;);
		},
		/**
		 * @method _arrowKey
		 * @private
		 * @return boolean
		 */
		_arrowKey: function(keyCode){
			var me = this,
				keyboard = Firebrick.ui.KeyEvents,
				selector = &quot;.fb-ui-combo-item&quot;,
				groupSelector = &quot;.fb-ui-combo-group-item&quot;,
				$result = me.getResultEl(),
				$active = $(selector + &quot;.active&quot;, $result),
				$sibling;
			
			if(me._resultsVisible){
				
				//only on up and down actions
				if(keyCode === keyboard.DOM_VK_DOWN || keyCode === keyboard.DOM_VK_UP){
					
					if($active.length){
						
						if(keyCode === keyboard.DOM_VK_DOWN){
							$sibling = $active.next();
							if( !$sibling.length ){
								$sibling = $active.closest( groupSelector ).next();
							}
						}else{
							$sibling = $active.prev();
							if( !$sibling.length ){
								$sibling = $active.closest( groupSelector ).prev();
							}
						}
						
						//check if sibling is another group
						if( $sibling.is( groupSelector ) ){
							//find appropriate sibling in group 
							if( keyCode === keyboard.DOM_VK_DOWN ){
								$sibling = $sibling.find( selector ).first();
							}else{
								$sibling = $sibling.find( selector ).last();
							}
						}
						
						me.markActive( $sibling );
						me._scrollOnKey(keyCode, $sibling, $result);
						
					}else{
						me.markActive( $result.find(&quot;.fb-ui-combo-item&quot;).first() );
					}
					
					return true;
				}
				
			}
			
			return false;
		},
		/**
		 * return items which is currently highlighted in the dopwdown
		 * @method getSelection
		 * @return {jQuery Object | null}
		 */
		getSelection: function(){
			var me = this,
				$result = me.getResultEl();
			if(me._resultsVisible){
				return $(&quot;.fb-ui-combo-item.active&quot;, $result);
			}
		},
		/**
		 * @method _scollOnKey
		 * @param keycode {Integer} 
		 * @param $target {jQuery Object}
		 * @param $container {jQuery Object}
		 */
		_scrollOnKey: function( keycode, $target, $container ){
			var sibTop,
				sibBottom,
				KeyEvent = Firebrick.ui.KeyEvents,
				resTop = $container.offset().top,
				resHeight = $container.height(),
				resBottom = resTop + resHeight,
				scrollTo = null;
			
			if($target.length){
				if( keycode === KeyEvent.DOM_VK_DOWN ){
					sibBottom = $target.offset().top + $target.outerHeight();
					if(sibBottom &gt; resBottom){
						scrollTo = ($container.scrollTop() + sibBottom) - resTop - resHeight;
					}
				}else{
					sibTop = $target.offset().top;
					if(sibTop &lt; resTop){
						scrollTo = sibTop - resTop + $container.scrollTop();
					}
				}
				if(scrollTo !== null){
					$container.scrollTop( scrollTo );
				}
			}
		},
		/**
		 * suggestion engine search
		 * @method search
		 * @param query {String}
		 * @param callback {Function} called after search is complete - args {Array of Results}
		 * @return {self}
		 */
		search: function(query, callback){
			var me = this;
			
			me._engine.query(query, callback);
			
			return me;
		},
		/**
		 * @method showResults
		 */
		showResults: function(){
			var me = this,
				$el = me.getElement(),
				$input = me.getInputEl(),
				$result = me.getResultEl(),
				query = $input.val().trim(),
				loader,
				item;

			if(query.length &gt;= me.typeahead){
				$result.empty();
				
				$result.css({
					top: $el.offset().top + $el.outerHeight(),
					width: $el.outerWidth()
				});
				
				$result.show();
				
				me._resultsVisible = true;
				
				if(me._engine.mode !== &quot;local&quot;){
					loader = Firebrick.create(&quot;Firebrick.ui.display.Loader&quot;, {
						target: $result
					});
				}

				//delay the search to allow the loader to be displayed
				Firebrick.delay(function(){
					me.search( query, function(results){
						var elements = [];
						if(loader){
							loader.destroy();
						}
						if(results){
							for(var i = 0, l = results.length; i&lt;l; i++){
								item = results[i];
								item.index = i;
								elements.push( me.renderItem( item ) );
							}

							$result.empty(); //remove loading
							$result.append( elements );
							
							//make sure scrolled at the top
							$result.scrollTop(0);
						
							me.fireEvent(&quot;expand&quot;);
						}
					});
				}, 10);
			}
		},
		/**
		 * @method hideResults
		 */
		hideResults: function(){
			var me = this,
				$el = me.getElement(),
				$input = me.getInputEl(),
				$result = me.getResultEl();
			
			if(me._resultsVisible){
				me._resultsVisible = false;
				$result.hide();
				me.fireEvent(&quot;collapse&quot;);	
			}
		},
		/**
		 * @method renderChildren
		 * @param data {Object}
		 * @param scope {Object} optional
		 * @return {Array} jQuery elements
		 */
		renderChildren: function(data, scope){
			var me = this,
				items = [];
			if( data.children ){
				for(var i = 0, l = data.children.length; i&lt;l; i++){
					items.push( me.renderItem( data.children[i], scope) );
				}
			}
			return items;
		},
		/**
		 * @method renderItem
		 * @param data {Object}
		 * @param scope {Object} optional
		 * @return {jQuery Object} element
		 */
		renderItem: function(data, scope){
			var me = this,
				prop = data.children ? &quot;groupTpl&quot; : &quot;itemTpl&quot;,
				$el;
			
			$el = me._renderItem(prop, data, scope);
			
			if(data.children){
				$(&quot;.fb-ui-combo-group-children&quot;, $el).html( me.renderChildren( data, scope ) );
			}
			
			return $el;
		},
		/**
		 * @method renderValueItem
		 * @param data {Object}
		 * @param scope {Object} optional
		 * @return {jQuery Object} element
		 */
		renderValueItem: function(data, scope){
			return this._renderItem(&quot;valueTpl&quot;, data, scope);
		},
		/**
		 * @method _renderItem
		 * @private
		 * @param tplProp {String} name of tpl property to use
		 * @param data {Object}
		 * @param scope {Object} optional
		 * @return {jQuery Object} html element
		 */
		_renderItem: function(tplProp, data, scope){
			var me = this,
				tpl = $.isFunction(me[tplProp]) ? me[tplProp]() : me[tplProp];
			data._scope = data._scope || scope || me;
			if(!me._itemTemplate[tplProp]){
				me._itemTemplate[tplProp] = tplEngine.template( tpl );
			}
			return $( me._itemTemplate[tplProp](data) ).prop(&quot;data-value&quot;, data);
		},
		/**
		 * @method bindings
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.css[&quot;&#x27;fb-ui-combobox&#x27;&quot;] = true;
			
			if(me.multiSelect){
				obj.css.multiple = true;
			}else{
				obj.css.single = true;
			}
			
			return obj;
		},
		/**
		 * @method valueBindings
		 */
		valueBindings: function(){
			var me = this,
				obj = {
					css: {
						&quot;&#x27;fb-ui-combo-values&#x27;&quot;: true
					}
				};
			
			return obj;
		},
		/**
		 * @method inputBindings
		 */
		inputBindings: function(){
			var me = this,
				obj = {
					css:{},
					attr:{
						autocomplete: true,
						tabindex: true
					}
				};
			
			obj.css[&quot;&#x27;fb-ui-combo-input&#x27;&quot;] = true;
			
			return obj;
		},
		/**
		 * @method clearIconBindings
		 */
		clearIconBindings: function(){
			var me = this,
				obj = {
					css:{
						glyphicon: true,
						&quot;&#x27;glyphicon-remove-circle&#x27;&quot;: true,
						&quot;&#x27;fb-ui-combo-clear-icon&#x27;&quot;: true
					}
				};
			
			return obj;
		},
		/**
		 * @method singleSelectBindings
		 */
		singleSelectBindings: function(){
			var me = this,
				obj = {
					css: {
						&quot;&#x27;fb-ui-combo-select&#x27;&quot;: true,
						caret: me.typeahead === 0 ? me.showCaret : false
					}
				};
			
			return obj;
		},
		/**
		 * @method resultBindings
		 */
		resultBindings: function(){
			var me = this,
				obj = {
					css: {
						&quot;&#x27;fb-ui-combo-result&#x27;&quot;: true
					}
				};
			
			return obj;
		},
		/**
		 * override
		 * @method _hasChange
		 * @param newVal {Any}
		 * @param oldVal {Any}
		 * @return {Boolean}
		 */
		_hasChange: function(newVal, oldVal){
			return !Firebrick.utils.compareArrays(newVal, oldVal);
		},
		/**
		 * @method getValue
		 * @return {Array}
		 */
		getValue: function(){
			var me = this,
				$vals = $(&quot;&gt; .fb-ui-combo-value-item&quot;, me.getValueEl()),
				values = [],
				valKey = me.valueKey,
				val;
			
			for(var i = 0, l = $vals.length; i&lt;l; i++){
				val = $( $vals[i] ).prop(&quot;data-value&quot;);
				val = valKey ? val[valKey] : val;
				values.push( val );
			}
			
			return values;
		},
		/**
		 * @method setValues
		 * @param values {Array}
		 * @return parent
		 */
		setValue: function(){
			var me = this,
				$valueBox = me.getValueEl();
	
			if(me.maxItems !== false){
				if($(&quot;.fb-ui-combo-value-item&quot;, $valueBox).length === me.maxItems){
					//number of max items already reached
					return;
				}
			}
			
			return me.callParent(arguments);
		},
		/**
		 * @method _setValue
		 * @param value {Array}
		 * @private
		 */
		_setValue: function( values ){
			var me = this,
				$valueBox = me.getValueEl(),
				$vals = [];
	
			if(values.length){
				
				for(var i = 0, l = values.length; i&lt;l; i++){
					$vals.push( me.renderValueItem( values[i] ) );
				}
				
				if(me.multiSelect){
					$valueBox.append( $vals );	
				}else{
					$valueBox.html( $vals );
				}
				
				me.reset();
			}
			return me;
		},
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * http://www.eyecon.ro/bootstrap-datepicker/
 * @module Firebrick.ui.components
 * @extends components.fields.Input
 * @namespace components.fields
 * @class Datepicker
 */
define(&#x27;Firebrick.ui/fields/DatePicker&#x27;,[&quot;./Input&quot;, &quot;bootstrap-datepicker&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.DatePicker&quot;, {
		extend:&quot;Firebrick.ui.fields.Input&quot;,
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;fields.datepicker&quot;
		 */
		sName: &quot;fields.datepicker&quot;,
		/**
		 * @property inputAddon
		 * @default true
		 */
		inputAddon: true,
		/**
		 * @property dateFormat
		 * @type {String}
		 * @default &quot;yyyy/mm/dd&quot;
		 */
		dateFormat: &quot;dd/mm/yyyy&quot;,
		/**
		 * Sunday = 0, Saturday = 6 
		 * @property weekStart
		 * @type {Integer}
		 * @default 1
		 */
		weekStart: 1,
		/**
		 * @method datePickerOptions
		 * @return {Object}
		 */
		datePickerOptions: function(){
			var me = this;
			return {
				autoclose: true,
				weekStart: me.weekStart,
				format: me.dateFormat
			};
		},
		/**
		 * glyphicon to so in the inputAddon box
		 * @property iconClass
		 * @type {String|false}
		 * @default &quot;glyphicon-calendar&quot;
		 */
		iconClass: &quot;glyphicon-calendar&quot;,
		/**
		 * whether the calendar inputaddon icon is clickable or not
		 * @property clickableIcon
		 * @type {Boolean}
		 * @default true
		 */
		clickableIcon: true,
		/**
		 * @method init
		 * @return parent
		 */
		init: function(){
			var me = this;
			
			me.on(&quot;rendered&quot;, function(){
				var el = me.getElement(),
					inputAddon,
					icon;
				
				if(el.length){
					el.datepicker(me.datePickerOptions());
				}
				
				if(me.inputAddon &amp;&amp; me.clickableIcon){
					inputAddon = el.siblings(&quot;.&quot; + me.inputAddonClass);
					if(inputAddon.length){
						icon = inputAddon.find(&quot;.&quot; + me.iconClass);
						if(icon.length){
							icon.css(&quot;cursor&quot;, &quot;pointer&quot;);
							icon.on(&quot;click&quot;, function(){
								var prop = &quot;fb-date-open&quot;;
								if(el.prop(prop) === true){
									el.datepicker(&quot;hide&quot;);
									el.prop(prop, false);
								} else {
									el.prop(prop, true);
									//when the icon is clicked focus is given to the input field to open the datepicker
									el.focus();
								}
							});
						}
					}
				}
			});
			
			return me.callParent(arguments);
		},
		
		/**
		 * Immediately invoked function
		 * @property value
		 * @type {String}
		 * @default current day
		 */
		value:(function(){
			var dt = new Date();
			return &quot;&#x27;&quot; +  (&quot;0&quot; + dt.getDate()).slice(-2)  + &quot;/&quot; + dt.getMonth() + 1 + &quot;/&quot; +  dt.getFullYear() + &quot;&#x27;&quot;;
		})()
	});
});

define(&#x27;text!Firebrick.ui/fields/Display.html&#x27;,[],function () { return &#x27;{{?it.inplaceEdit}}\r\n\t&lt;a id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;&lt;/a&gt;\r\n{{?? true }}\r\n\t&lt;p id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;&lt;/p&gt;\r\n{{?}}&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * read only input field but doesn&#x27;t look like an input field
 * 
 * @module Firebrick.ui.components
 * @extends components.fields.Base
 * @namespace components.fields
 * @class Display
 */
define(&#x27;Firebrick.ui/fields/Display&#x27;,[&quot;text!./Display.html&quot;, &quot;./Input&quot;], function(subTpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.Display&quot;, {
		extend:&quot;Firebrick.ui.fields.Input&quot;,
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;fb-ui-display&quot;
		 */
		sName: &quot;fields.display&quot;,
		/**
		 * overwrite input formControlClass
		 * @property formControlClass
		 * @type {String}
		 * @default &quot;formControlClass fb-ui-field-display&quot;
		 */
		formControlClass: &quot;form-control-static&quot;,
		/**
		 * @property subTpl
		 * @type {html}
		 * @default Display.html
		 */
		subTpl: subTpl,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(),
				text = obj.value;
			
			delete obj.attr.readonly;
			delete obj.attr.disabled;
			delete obj.attr.type;
			delete obj.attr.placeholder;
			//delete obj.value;
			
			obj.text = text;
			
			return obj;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.fields.Input
 * @namespace components.fields
 * @class Email
 */
define(&#x27;Firebrick.ui/fields/Email&#x27;,[&quot;./Input&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.Email&quot;, {
		extend:&quot;Firebrick.ui.fields.Input&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName: &quot;fields.email&quot;,
		/**
		 * @property type
		 * @type {String}
		 * @default &quot;&#x27;email&#x27;&quot;
		 */
		type:&quot;email&quot;,
		/**
		 * @property dataType
		 * @type {String}
		 * @default &quot;&#x27;text&#x27;&quot;
		 */
		dataType:&quot;text&quot;
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.fields.Input
 * @namespace components.fields
 * @class File
 */
define(&#x27;Firebrick.ui/fields/File&#x27;,[&quot;./Input&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.File&quot;, {
		extend:&quot;Firebrick.ui.fields.Input&quot;,
		sName:&quot;fields.file&quot;,
		type:&quot;file&quot;,
		formControlClass:false
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.fields.Base
 * @namespace components.fields
 * @class Hidden
 */
define(&#x27;Firebrick.ui/fields/Hidden&#x27;,[&quot;./Input&quot;], function(){
	&quot;use strict&quot;;
	
	return Firebrick.define(&quot;Firebrick.ui.fields.Hidden&quot;, {
		extend: &quot;fields.input&quot;,
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;fields.hidden&quot;
		 */
		sName: &quot;fields.hidden&quot;,
		/**
		 * @method containerBindings
		 * @return {Object}
		 */
		containerBindings: function(){
			var me = this,
				obj = me.callParent( arguments );
			
			obj.css[&quot;&#x27;fb-ui-hidden-field&#x27;&quot;] = true;
			
			return obj;
		}
	});
	
});

define(&#x27;text!Firebrick.ui/fields/TextArea.html&#x27;,[],function () { return &#x27;{{?it.inplaceEdit}}\r\n\t&lt;a data-bind=&quot;{{=it.dataBind()}}&quot;&gt;&lt;/a&gt;\r\n{{?? true }}\r\n\t&lt;textarea id=&quot;{{=it.getId()}}&quot; rows=&quot;{{=it.rows}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;&lt;/textarea&gt;\r\n{{?}}&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.fields.Input
 * @namespace components.fields
 * @class TextArea
 */
define(&#x27;Firebrick.ui/fields/TextArea&#x27;,[&quot;text!./TextArea.html&quot;, &quot;./Input&quot;], function(subTpl){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.TextArea&quot;, {
		extend:&quot;Firebrick.ui.fields.Input&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName: &quot;fields.textarea&quot;,
		/**
		 * number of rows high
		 * @property rows
		 * @type {Int}
		 * @default 5
		 */
		rows:5,
		/**
		 * @property subTpl
		 * @type {String}
		 */
		subTpl:subTpl,
		/**
		 * @property dataType
		 * @type {String}
		 * @default &quot;&#x27;textarea&#x27;&quot;
		 */
		dataType:&quot;textarea&quot;
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.fields.Base
 * @namespace components.fields
 * @class HtmlEditor
 */
define(&#x27;Firebrick.ui/fields/HtmlEditor&#x27;,[&quot;./TextArea&quot;, &quot;summernote&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.HtmlEditor&quot;, {
		extend:&quot;Firebrick.ui.fields.TextArea&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName: &quot;fields.htmleditor&quot;,
		/**
		 * editor configuration
		 * @property editorConf
		 * @type {Object}
		 * @default null
		 */
		editorConf: null,
		/**
		 * @method getEditorConfig
		 * @return {Object}
		 */
		getEditorConfig: function(){
			var me = this,
				editorConf = me.editorConf || {},
				obj = {
					height: 200
				};
			return Firebrick.utils.overwrite(obj, editorConf);
		},
		/**
		 * @method setValue
		 */
		_setValue: function( value ){
			return me.getElement().code( value );
		},
		/**
		 * @method getValue
		 * @return {Html}
		 */
		getValue: function(){
			return me.getElement().code();
		},
		/**
		 * @method init
		 */
		init: function(){
			var me = this;
			
			if( !me.inplaceEdit ){
				me.on(&quot;rendered&quot;, function(){
					me._initEditor();
				});
				me.on(&quot;destroy&quot;, function(){
					me.getElement().destroy();
				});
			}
			
			return me.callParent( arguments );
		},
		/**
		 * @method _initEditor
		 * @private
		 */
		_initEditor: function(){
			var me = this,
				$el = me.getElement();
				
			$el.summernote( me.getEditorConfig() ); 
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.fields.Input
 * @namespace components.fields
 * @class Password
 */
define(&#x27;Firebrick.ui/fields/Password&#x27;,[&quot;./Input&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.Password&quot;, {
		extend:&quot;Firebrick.ui.fields.Input&quot;,
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;fb-ui-password&quot;
		 */
		sName:&quot;fields.password&quot;,
		/**
		 * @property type
		 * @type {String}
		 * @default &quot;password&quot;
		 */
		type:&quot;password&quot;
	});
});

define(&#x27;text!Firebrick.ui/fields/SelectBox.html&#x27;,[],function () { return &#x27;{{?it.inplaceEdit}}\r\n\t&lt;a id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;&lt;/a&gt;\r\n{{?? true }}\r\n\t&lt;select id=&quot;{{=it.getId()}}&quot; data-bind=&quot;{{=it.dataBind()}}&quot;&gt;&lt;/select&gt;\r\n{{?}}&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.fields.Input
 * @namespace components.fields
 * @class SelectBox
 */
define(&#x27;Firebrick.ui/fields/SelectBox&#x27;,[&quot;text!./SelectBox.html&quot;, &quot;jquery&quot;, &quot;knockout&quot;, &quot;./Input&quot;], function(subTpl, $, ko){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.fields.SelectBox&quot;, {
		extend:&#x27;Firebrick.ui.fields.Input&#x27;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName:&quot;fields.selectbox&quot;,
		/**
		 * @property multiSelect
		 * @type {Boolean}
		 * @default false
		 */
		multiSelect:false,
		/**
		 * @property subTpl
		 * @type {String} html
		 */
		subTpl:subTpl,
		/**
		 * @property options
		 * @type {KO String|Function|Array of Objects}
		 * @default false
		 */
		options:false,
		/**
		 * @property type
		 * @type {String}
		 * @default &quot;select&quot;
		 */
		type:&quot;select&quot;,
		/**
		 * @property optionsValue
		 * @type {String}
		 * @default &quot;value&quot;
		 */
		optionsValue:&quot;value&quot;,
		/**
		 * @property optionsText
		 * @type {String}
		 * @default &quot;text&quot;
		 */
		optionsText:&quot;text&quot;,
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings:function(){
			var me = this,
				obj = me.callParent(arguments);
			
			if(!me.inplaceEdit){
				obj.options = Firebrick.ui.helper.optionString(me);
				if(!me.multiSelect){
					obj.value = me.value;
				}else{
					obj.selectedOptions = me.value;
				}
				obj.optionsText = me.parseBind( me.optionsText );
				obj.optionsValue = me.parseBind( me.optionsValue );
				obj.attr.multiple = me.multiSelect;
			}
			
			return obj;
		},
		/**
		 * override parent method
		 * @method getInplaceEditText
		 * @private
		 * @param $data {KO Object}
		 * @return {String}
		 */
		_getInplaceEditText: function( $data ){
			var me = this,
				$el = me.getElement(),
				value = $el ? me.getValue() : me.value,
				options = me.options,
				optVal = me.optionsValue,
				optText = me.optionsText,
				text = &quot;&quot;,
				it, unwrapped;
			
			if( value ){
				
				if($.isFunction(options)){
					options = options();
				}else if( typeof options === &quot;string&quot; ){
					options = ko.unwrap( $data.hasOwnProperty( options ) ? $data[ options ] : $data );
				}
				
				if( !$.isArray(options) ){
					options = [options];
				}
				
				for(var i = 0, l = options.length; i&lt;l; i++){
					it = options[i];
					if( $.isPlainObject(it) ){
						unwrapped = ko.unwrap( it[ optVal ] );
						if(unwrapped === value.replace(&quot;&#x27;&quot;, &quot;&quot;)){
							text = ko.unwrap( it[ optText ] );
							break;
						}
					}
				}
				
			}else{
				text = Firebrick.text( me.inplaceEditEmptyText );
			}
			
			return text;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @private
 * @module Firebrick.ui.components
 * @extends components.menu.Menu
 * @namespace components.menu
 * @class ContextMenu
 */
define(&#x27;Firebrick.ui/menu/ContextMenu&#x27;,[&quot;jquery&quot;, &quot;./Menu&quot;, &quot;../common/mixins/Items&quot;], function($){
	&quot;use strict&quot;;
	
	return Firebrick.define(&quot;Firebrick.ui.menu.ContextMenu&quot;, {
		extend: &quot;Firebrick.ui.menu.Menu&quot;,
		mixins:&quot;Firebrick.ui.common.mixins.Items&quot;,
		sName: &quot;menu.contextmenu&quot;,
		target: &quot;body&quot;,
		enclosedBind: true,
		appendTarget: true,
		contextMenuEvent: null,
		
		init: function(){
			var me = this;
			
			me.on(&quot;rendered&quot;, function(){
				me._initContext();
				me.position();
			});
			
			return me.callParent(arguments);
		},
		
		position: function(){
			var me = this,
				el = $(&quot;&gt; ul&quot;, me.getElement()),
				event = me.contextMenuEvent;
	
			el.css({
				position: &quot;absolute&quot;,
				&quot;z-index&quot;: &quot;10000&quot;,
				top: event.clientY,
				left: event.clientX,
				display: &quot;block&quot;
			});
		},
		
		_initContext: function(){
			var me = this,
				globalClick = function(e){
					var $e = $(e.target),
						$el = me.getElement();
					
					if(!$el.is($e) || $el.has($e).length){
						me.destroy();
						$(document).off(&quot;click&quot;, globalClick);	
					}
					
				};
				
			$(document).on(&quot;click&quot;, globalClick);
		},
		
		
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj.css[&quot;&#x27;fb-ui-contextmenu&#x27;&quot;] = true;
			
			return obj;
		}
	});
	
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.display.List
 * @namespace components.nav
 * @class Breadcrumbs
 */
define(&#x27;Firebrick.ui/nav/Breadcrumbs&#x27;,[&quot;../display/List&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.nav.Breadcrumbs&quot;, {
		extend:&quot;Firebrick.ui.display.List&quot;,
		sName:&quot;nav.breadcrumbs&quot;,
		listType: &quot;ol&quot;,
		linkedList:true,
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			obj.css.breadcrumb = true;
			return obj;
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.display.List
 * @namespace components.nav
 * @class Pagination
 */
define(&#x27;Firebrick.ui/nav/Pagination&#x27;,[&quot;../display/List&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.nav.Pagination&quot;, {
		extend:&quot;Firebrick.ui.display.List&quot;,
		sName:&quot;nav.pagination&quot;,
		preNode: false,
		linkedList: true,
		/**
		 * &quot;lg&quot;, &quot;sm&quot;
		 * @property paginationSize
		 * @type {String}
		 * @default null
		 */
		paginationSize:null,
		/**
		 * override parent
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			obj.css.pagination = true;
			if(me.paginationSize){
				obj.css[ me.parseBind(&quot;pagination-&quot;+me.paginationSize) ] = true;
			}
			return obj;
		},
		/**
		 * @method setActive
		 * @param val {String|Integer} - correspond to the pagination link data-value attribute
		 */
		setActive: function( val ){
			var me = this,
				$el = me.getElement(),
				$active = me.getActive(),
				$it = $(&quot;a[data-value=&#x27;&quot; + val + &quot;&#x27;]&quot;, $el).parent(&quot;li&quot;);
			
			$active.removeClass(&quot;active&quot;);
			$it.addClass(&quot;active&quot;);
		},
		/**
		 * get active item
		 * @method getActive
		 * @return {jQuery Object} &lt;li&gt;
		 */
		getActive: function(){
			var me = this,
				$el = me.getElement();
			return $(&quot;li.active&quot;, $el);
		}
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * properties: {
 * 		parentsEditable: {Boolean} [default=true]
 * 		field: {
 * 			sName: &quot;fields.email&quot;
 * 			// all other class config properties
 * 		}
 * }
 * 
 * 
 * @module plugins
 * @namespace plugins
 * @class EditableTable
 */
define(&#x27;Firebrick.ui/table/plugins/EditableTable&#x27;,[&quot;jquery&quot;], function($){
	&quot;use strict&quot;;
	
	var clazz = Firebrick.define(&quot;Firebrick.ui.table.plugins.EditableTable&quot;, {
		indexAttr: &quot;data-tt-id&quot;,	//when TR - row number, when TD column number
		rowAttr: &quot;fb-ui-row-id&quot;,	//for TD to determine which row number
		editMarker: &quot;fb-ui-cell-editing&quot;,	//added to the TD when it cell edit is active
		currentEdit: null,	//holder for which item is current being edited - cell editting only
		hideCellClass: &quot;fb-ui-hide-me&quot;,
		rowLoadClass: &quot;fb-ui-edit-loading&quot;,
		/**
		 * Returns map with the fields (components) needed to edit the selection and their dependencies
		 * @method editFields
		 * @param editElement {jQuery Object} TR or TD which is being edited
		 * @param clazz {Object} table component class
		 * @param columns {Array of Objects} which columns are being edited
		 * @return {Object} {deps:[], fields:[]}
		 */
		editFields: function(editElement, clazz, columns){
			var me = this,
				//holder to populate with all the edit fields needed
				editFields = [],
				//dependencies that need loading for each edit field
				deps = [],
				//map of all the already added dependencies - stop duplicates
				addedPaths = {},
				//boolean
				isRow = editElement.is(&quot;tr&quot;),
				//find correct parent el where the data values are stored
				parentEl = isRow ? editElement : editElement.closest(&quot;tr&quot;),
				//holder for iteration
				colNumber,
				field,
				col;
			
			if(columns){
				
				//iterate over column passed to this function
				for(var i = 0, l = columns.length; i&lt;l; i++){
					colNumber = isRow ? i : editElement.attr(me.indexAttr);
					col = columns[i];
					if(col.editable !== false){
						field = me.getFieldConfiguration(clazz, parentEl, editElement, col, colNumber, deps, addedPaths);
						if(field){
							editFields.push( field );
						}
					}
				}
			}
			return {deps: deps, items: editFields};
		},
		
		/**
		 * @method getFieldConfiguration 
		 * @param clazz {Object} table component class
		 * @param $tr {jQuery Object TR}
		 * @param $clickedItem {jQuery Object TR | TD etc}
		 * @param col {Object} current column for field
		 * @param colNumber {Integer}
		 * @param deps {Array}	to populate with what dependencies are needed - **variable pointers**
		 * @param addedPaths {Object} to populate which which dependencies have already been added to deps - **variable pointers**
		 * @return {Object|null} field config {sName:&quot;fields.input&quot;, value:&quot;abc&quot;, ...}
		 */
		getFieldConfiguration: function(clazz, $tr, $clickedItem, col, colNumber, deps, addedPaths){
			var me = this,
				fieldConfig = col.editConf &amp;&amp; col.editConf.field ? col.editConf.field : {},
				path,
				data = $tr.prop( clazz.propDataName ),
				value = Firebrick.utils.getDeepProperty( col.mapping, data );
			
			if(data.children){
				if(col.editConf &amp;&amp; col.editConf.parentsEditable === false){
					//cancel edit field creation as this column should not be editable when a parent item
					return;
				}	
			}

			if(value === null || value === undefined){
				//property not found by getDeepProperty() so we assume an edit should not be possible here
				return;
			}else if (col.renderer &amp;&amp; !col.type){
				//don&#x27;t support custom renderers if no type is given
				return;
			}

			if(fieldConfig.sName){
				//get the correct dependency path for the field type - i.e. &quot;fields.input&quot; =&gt; &quot;Firebrick.ui/fields/Input&quot;
				path = Firebrick.classes.getSNameConfig(fieldConfig.sName).path;
			}else{
				//default to input field if non given
				fieldConfig.sName = col.type === &quot;checkbox&quot; ? &quot;fields.checkbox&quot; : &quot;fields.input&quot;;
				path = Firebrick.classes.getSNameConfig(fieldConfig.sName).path;
			}
			
			if(!addedPaths[path]){
				addedPaths[path] = true;
				deps.push(path);
			}
			
			fieldConfig.label = fieldConfig.label || (col.text ? col.text : col);
			fieldConfig.init = me._initFunction(colNumber);
			fieldConfig.value = $.isFunction(value) ? value() : value;
			
			if(typeof fieldConfig.value === &quot;string&quot;){
				fieldConfig.value = &quot;&#x27;&quot; + fieldConfig.value + &quot;&#x27;&quot;;
			}
			
			return fieldConfig;
		},
		
		/**
		 * cell editing
		 * remove the editMarker and reset any &quot;globals&quot;
		 * @method removeCurrent
		 * @private
		 */
		removeCurrent: function(editElement){
			var me = this;
			editElement.removeClass(me.editMarker);
			me.currentEdit = null;
		},
		
		/**
		 * only for inline edit
		 * cancels any changes made and replaces the HTML with the pre-edit state
		 * @method cancelChanges
		 * @param tableClass {Object} table component class
		 * @param editElement {jQuery Object} TD
		 */
		cancelChanges: function(tableClass, editElement){
			var me = this;
			
			//reset html
			me.resetCell(tableClass, editElement);
		},
		
		/**
		 * @method resetCell
		 * @param value {Any} optional - if set, once the cell is reset to its original state, the value will be set
		 */
		resetCell: function(tableClass, editElement, value){
			var me = this,
				tdSpanClass = tableClass.tdSpanClass,
				el = $(&quot;&gt; [fb-view-bind]&quot;, editElement);	//find the inline edit field
			
			me.removeCurrent(editElement);
			
			if(el.length){
				//remove the edit field
				el.remove();
			}
			
			//reset html
			editElement.children().removeClass( me.hideCellClass );
			
			if(value){
				$(&quot;&gt; span.&quot; + tdSpanClass, editElement).html(value);
			}
		},
		
		/**
		 * takes a value from the edit field and parses it accordingly - for example if the value of radio options should be numbers
		 * @method parseValue
		 * @param type {String} number, float etc
		 * @param value {Any}
		 * @return value {Any} parsed
		 */
		parseValue: function(type, value){
			if(type === &quot;number&quot;){
				return parseInt(value);
			}else if(type === &quot;float&quot;){
				return parseFloat(value);
			}
			return value;
		},
		
		/**
		 * @method makeChanges
		 * @param tableClass {Object} table component class
		 * @param editElement {jQuery Object} TR | TD
		 * @event beforeChanges(tableClass, editElement)	- event fired on tableClass
		 * @event afterChanges(tableClass, editElement)	- event fired on tableClass
		 */
		makeChanges: function(tableClass, editElement){
				var me = this,
					columns = tableClass.columns,
					isTreeTable = tableClass.treetable,
					inputs = editElement.find(&quot;input&quot;),
					input,
					value, //holder
					model,
					oldValue,
					tdSpanClass = tableClass.tdSpanClass,	//needed for manual table alterations
					editType = tableClass.editType,
					isRow = editElement.is(&quot;tr&quot;),
					$tr = isRow ? editElement : editElement.closest(&quot;tr&quot;),
					rowNumber = isRow ? editElement.attr(me.indexAttr) : editElement.attr(me.rowAttr),
					colNumber;	
				
				tableClass.fireEvent(&quot;beforeChanges&quot;, arguments);
				
				if(inputs.length){
					for(var i = 0, l = inputs.length; i&lt;l; i++){
						input = $(inputs[i]);
						//filter out (continue) non checked (selected) checkboxes or radio buttons
						if(input.attr(&quot;type&quot;) === &quot;radio&quot; || input.attr(&quot;type&quot;) === &quot;checkbox&quot;){
							if(!input.is(&quot;:checked&quot;)){
								continue;
							}else{
								colNumber = Firebrick.getById( input.attr(&quot;data-cmp-id&quot;) )._prop;
							}
						}else{
							colNumber = Firebrick.getById( input.attr(&quot;id&quot;) )._prop;
						}
						
						//example tableClass.getData()() =&gt; 
						//						[{
						//							name: &quot;John&quot;,
						//							age: 35,
						//							job: &quot;Carpenter&quot;,
						//							children:[{
						//								name: &quot;Susan&quot;,
						//								age: 6,
						//								job: &quot;pre-school&quot;
						//							},{
						//								name: &quot;James&quot;,
						//								age: 14,
						//								job: &quot;annoying parents&quot;
						//							}]
						//						}]
						
						model = Firebrick.utils.getDeepProperty( columns[colNumber].mapping, $tr.prop( tableClass.propDataName ) );
						
						oldValue = model();	//extract observable
						
						if(model){
								value = input.val();
								value = me.parseValue(columns[colNumber].type, value);
								if(editType === &quot;cell&quot; &amp;&amp; value === oldValue){
									return me.cancelChanges(tableClass, editElement);
								}else{
									if(model.value){
										model.value(value);
										//cell edit
										if(!isRow){
											me.resetCell(tableClass, editElement);	
										}
									}else{
										if(value !== oldValue){
											model(value);	//set new value
											if(!isRow){
												me.resetCell(tableClass, editElement, value);
											}
										}
									}
								}
							
						}
						
					}
				}
				
				tableClass.fireEvent(&quot;afterChanges&quot;, arguments);
		},
		
		/**
		 * @method buildModal
		 * @param clazz {Object} component
		 * @param editFields {Object}
		 * @param editFields.deps {Array of Strings requirejs dependencies}
		 * @param editFields.items {Array of Object} items configuration for the body of the modal
		 * @param $tr {jQuery Object} tr that is to be edited
		 */
		buildModal: function(clazz, editFields, $tr){
			var me = this,
				customConfig = clazz.editModalConfig || {},
				
				defaultConfig = {
					title: customConfig.modalTitle || &quot;Edit&quot;,
					target: $tr,
					items:[{
						sName: &quot;containers.form&quot;,
						preSubmit: function(){
							var me2 = this;
							
							//make changes to table
							me.makeChanges(clazz, $tr);
							//hide the modal
							$(me2._parent.getElement()).modal(&quot;hide&quot;);
							
							//prevent default form submission
							return false;
						},
						items: editFields.items
					}]
				};
				
			if(customConfig._showEditButtons !== false){
				defaultConfig.footerItems = [{
					sName: &quot;button.button&quot;,
					closeModal: true,	//hide modal
					text: customConfig.buttonUpdateText || &quot;Update&quot;,
					handler: function(){
						me.makeChanges(clazz, $tr);
					}
				}];
			}
				
			customConfig = Firebrick.utils.overwrite(defaultConfig, customConfig);
			
			//add standard dependencies
			editFields.deps.push( Firebrick.classes.getSNameConfig(&quot;containers.modal&quot;).path );
			editFields.deps.push( Firebrick.classes.getSNameConfig(&quot;containers.form&quot;).path ); 
			editFields.deps.push( Firebrick.classes.getSNameConfig(&quot;button.button&quot;).path );
			
			me.tableLoadMask(clazz.getElement());
			require(editFields.deps, function(){
				Firebrick.create(&quot;Firebrick.ui.containers.Modal&quot;, customConfig);
				me.removeTableLoadMask(clazz.getElement());
			});
		},
		
		/**
		 * @method tableLoadMask
		 * @param $table {jquery Object} table
		 */
		tableLoadMask: function($table){
			var me = this,
				tbody = $(&quot;tbody&quot;, $table),
				div = $(&quot;&lt;div class=&#x27;fb-ui-load-mask&#x27;&gt;&lt;/div&gt;&quot;);
			tbody.addClass(me.rowLoadClass);
			me.appendLoadIcon(div);
			tbody.append(div);
			
		},
		
		/**
		 * @method removeTableLoadMask
		 * @param $table {jquery Object} table 
		 */
		removeTableLoadMask: function($table){
			var me = this,
				tbody = $(&quot;tbody&quot;, $table);
			tbody.removeClass(me.rowLoadClass);
			$(&quot;&gt; div.fb-ui-load-mask&quot;, tbody).remove();
		},
		
		/**
		 * @method appendLoadIcon
		 * @param $context {jquery Object} to append icon too
		 */
		appendLoadIcon: function($context){
			$context.append(&quot;&lt;span class=&#x27;fb-ui-load-block glyphicon glyphicon-refresh glyphicon-refresh-animate&#x27;&gt;&lt;/span&gt;&quot;);
		},
		
		/**
		 * @method appendLoadIcon
		 * @param $context {jquery Object} to remove icon from
		 */
		removeLoadIcon: function($context){
			$(&quot;&gt; .fb-ui-load-block&quot;, $context).remove();
		},
		
		/**
		 * @method buildCellEditor
		 * @param clazz {Object} component
		 * @param editFields {Object}
		 * @param editFields.deps {Array of Strings requirejs dependencies}
		 * @param editFields.items {Array of Object} items configuration for the body of the modal
		 * @param $td {jQuery Object} td that is to be edited
		 */
		buildCellEditor: function(clazz, editFields, $td){
			var me = this;
			editFields.deps.push(Firebrick.classes.getSNameConfig(&quot;containers.box&quot;).path);
			
			me.appendLoadIcon($td);
			require(editFields.deps, function(){
				var field = editFields.items[0];
				
				$td.children().addClass( me.hideCellClass );
				
				field.label = false;
				field.inputWidth = 12;
				field.inputContainerBindings = me.cellEditInputContainerBindings();

				field.init = me._cellEditInit(clazz, $td);
				//build edit field
				Firebrick.create(&quot;containers.box&quot;, {
					target: $td,
					appendTarget: true,
					enclosedBind: true,
					items: [field]
				});	
				
				me.removeLoadIcon($td);
			});
		},
		
		/**
		 * @method initEditingTR
		 * @param clazz {Object} component class Firebrick.getById($table.attr(&quot;id&quot;))
		 * @param $table {jQuery Object} table element
		 * @param $tr {jQuery Object} tr that was double clicked
		 */
		initEditingTR: function(clazz, $table, $tr){
			var me = this,
				//holder - this populates the fields that are shown in the edit mask &quot;.items&quot;
				editFields = me.editFields($tr, clazz, clazz.columns);
			if(editFields.items.length){
				me.buildModal(clazz, editFields, $tr);
			}
		},
		
		/**
		 * @method initEditingTD
		 * @param clazz {Object} component class Firebrick.getById($table.attr(&quot;id&quot;))
		 * @param $table {jQuery Object} table element
		 * @param $tr {jQuery Object} td that was double clicked
		 */
		initEditingTD: function(clazz, $table, $td){
			var me = this,
				currentEdit = me.currentEdit,
				index = $td.attr(me.indexAttr),
				//holder - this populates the fields that are shown in the edit mask &quot;.items&quot;
				editFields, 
				globalClick;
			
			if(me.currentEdit){
				if(me.currentEdit.is($td)){
					//same cell that is already open
					return;
				}else{
					//different cell, close the open one
					me.makeChanges(clazz, currentEdit);
				}
			}
			
			//register current edit
			me.currentEdit = $td;
			
			/*
			 * listener for clicking outside the edit cell
			 */
			globalClick = function(event){
				var $target = $(event.target),
					current = me.currentEdit;
				//different cell, close the open one
				if(current){
					//is the clicked target the edit element and not anything inside it
					if(!current.is($target) &amp;&amp; !current.has($target).length){
						//make changes (i.e. act like a &quot;blur&quot; event) and remove this click listener
						me.makeChanges(clazz, current);
						$(document).off(&quot;click&quot;, globalClick);					
					}
				}else{
					//makeChanges has been called before this already
					//ie. the currentEdit item has been closed elsewhere, so just delete the click event
					$(document).off(&quot;click&quot;, globalClick);
				}
				
			};
			$(document).on(&quot;click&quot;, globalClick);
			/* --- **/
			
			//check if this cell isn&#x27;t open for editing already
			if(!$td.hasClass(me.editMarker)){
				
				//get the field to display for editing
				editFields = me.editFields($td, clazz, [ clazz.columns[index] ]);
				
				if(editFields.items.length){
					//add the css to mark as open for editing and show the field
					$td.addClass(me.editMarker);
					me.buildCellEditor(clazz, editFields, $td);
				}
			}
		},
		
		
		/*
		 * 
		 * 
		 * 
		 * 
		 * Component method overrides
		 * 
		 * 
		 * 
		 * 
		 * 
		 */
		/**
		 * override InputContainerBindings function to add more properties 
		 * @method cellEditInputContainerBindings
		 * @return {Function}
		 */
		cellEditInputContainerBindings: function(){
			return function(){
				var me2 = this,
					obj = me2.callParent(arguments);
				
				obj.css[&quot;&#x27;col-md-10&#x27;&quot;] = true;
				obj.css[&quot;&#x27;col-lg-8&#x27;&quot;] = true;
				
				return obj;
			};
		},
		
		/**
		 * @method _defaultRenderAction
		 * @private
		 * @param clazz {Object} component class
		 * @param colNum {Integer}
		 */
		_defaultRenderAction: function(clazz, colNum){
			clazz._prop = colNum;
		},
		
		/**
		 * create a new init function with a rendered listener for the edit field
		 * when an edit field is rendered, add the column number as a property (_prop) to the class
		 * @method _initFunction
		 * @param colNum {Integer}
		 * @return {Function}
		 */
		_initFunction: function(colNum){
			var me = this;
			return function(){
				var me2 = this;
				
				me2.on(&quot;rendered&quot;, function(){
					me._defaultRenderAction(me2, colNum);
				});
				
				return me2.callParent(arguments);
			};
		},
		
		/**
		 * override edit field init - cell edit only
		 * @method _cellEditInit
		 * @param clazz {Object} component clazz - edit field
		 * @param $td {jQuery Object}
		 */
		_cellEditInit: function(clazz, $td){
			var me = this;
			return function(){
				var me2 = this,
					sName = me2.sName;
				
				me2.on(&quot;rendered&quot;, function(){
					var el = me2.getElement(),
						children,
						f;
					
					me._defaultRenderAction(me2, $td.attr(me.indexAttr));
					
					el.on(&quot;keydown&quot;, function(event){
						var k = event.which;
						if(k === 13){
							me.makeChanges(clazz, $td);
						}else if(k === 27){
							me.cancelChanges(clazz, $td);
						}
					});
					
					if(sName !== &quot;fields.input&quot;){
						children = el.is(&quot;input&quot;) ? el : el.find(&quot;input&quot;);
						f = function(){
							me.makeChanges(clazz, $td);
							children.off(&quot;change&quot;, f);
						};
						children.on(&quot;change&quot;, f);
					}else{
						el.focus();
					}
					
					
				});
				
				return me2.callParent(arguments);
			};
		}
		
	});
	
	//jquery plugin to init editable table
	$.fn.EditableTable = $.fn.EditableTable || function(){
		var $table = $(this),
			elements,
			plugin = Firebrick.create(&quot;Firebrick.ui.table.plugins.EditableTable&quot;),	//create Plugin Class instance
			clazz = Firebrick.getById($table.attr(&quot;id&quot;)),
			editType = clazz.editType,
			eventCallback,
			ths, $th;
		
		$table.addClass(&quot;fb-ui-editabletable&quot;);	
		
		if(editType === &quot;row&quot;){
			$table.addClass(&quot;fb-ui-row-editing&quot;);
			//for OPERA - http://stackoverflow.com/questions/7018324/how-do-i-stop-highlighting-of-a-div-element-when-double-clicking-on
			$table.attr(&quot;unselectable&quot;, &quot;on&quot;);
			elements = $(&quot;tbody tr&quot;, $table);
			eventCallback = function(){
				var $this = $(this);
				//stop the double click of taking event when a child element of TR is dblclicked
				if($this.is(&quot;tr&quot;)){
					plugin.initEditingTR(clazz, $table, $this);
				}
			};
			
		}else if (editType === &quot;cell&quot;){
			/*
			 * workaround to stop col width shifting from inline edit
			 * datatable plugin stops this from happening
			 */
			if(!clazz.datatable){ //if not active
				ths = $(&quot;&gt; thead th&quot;, $table);
				for(var i = 0, l = ths.length; i&lt;l; i++){
					$th = $(ths[i]);
					$th.css(&quot;width&quot;, $th.width());
				}
			}
			
			//get the cells for the table
			elements = $(&quot;tbody td&quot;, $table);
			//create the correct event function
			eventCallback = function(){
				var $this = $(this);
				if($this.is(&quot;td&quot;)){
					plugin.initEditingTD(clazz, $table, $this);	
				}
			};
		}
		
		//register event with callback
		elements.on(&quot;dblclick&quot;, eventCallback);
	};
	
	return clazz;
	
});

define(&#x27;text!Firebrick.ui/table/Table.html&#x27;,[],function () { return &#x27;&lt;div data-bind=&quot;{{=it.dataBind(\&#x27;containerBindings\&#x27;)}}&quot;&gt;\r\n\t&lt;table id={{=it.getId()}} data-bind=&quot;{{=it.dataBind()}}&quot;&gt;\r\n\t{{?it.treetable &amp;&amp; it.showOptions}}\r\n\t\t&lt;caption data-bind=&quot;{{=it.dataBind(\&#x27;captionBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t&lt;a data-bind=&quot;{{=it.dataBind(\&#x27;expandBindings\&#x27;)}}&quot;&gt;&lt;/a&gt;\r\n\t\t\t&lt;a data-bind=&quot;{{=it.dataBind(\&#x27;collapseBindings\&#x27;)}}&quot;&gt;&lt;/a&gt;\r\n\t\t&lt;/caption&gt;\r\n\t{{?}}\r\n\t{{?it.showHeadings}}\r\n\t\t&lt;thead data-bind=&quot;{{=it.dataBind(\&#x27;theadBindings\&#x27;)}}&quot;&gt;\r\n\t      &lt;tr data-bind=&quot;{{=it.dataBind(\&#x27;theadTRBindings\&#x27;)}}&quot;&gt;\r\n\t        &lt;th data-bind=&quot;{{=it.dataBind(\&#x27;theadTRTDBindings\&#x27;)}}&quot;&gt;&lt;/th&gt;\r\n\t      &lt;/tr&gt;\r\n\t    &lt;/thead&gt;\r\n    {{?}}\r\n    {{?it.showRows}}\r\n\t    &lt;tbody data-bind=&quot;{{=it.dataBind(\&#x27;tbodyBindings\&#x27;)}}&quot;&gt;\r\n\t      &lt;!-- ko {{=it.dataBind(\&#x27;tbodyTRTemplateBindings\&#x27;)}} --&gt;&lt;!-- /ko --&gt;\r\n\t    &lt;/tbody&gt;\r\n    {{?}}\r\n\t&lt;/table&gt;\r\n\t\r\n\t&lt;script type=&quot;text/html&quot; id=&quot;{{=it._getTplId()}}&quot;&gt;\r\n\t\t&lt;tr data-bind=&quot;{{=it.dataBind(\&#x27;tbodyTRBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t&lt;td data-bind=&quot;{{=it.dataBind(\&#x27;tbodyTRTDBindings\&#x27;)}}&quot;&gt;\r\n\t\t\t\t&lt;span data-bind=&quot;{{=it.dataBind(\&#x27;tbodyTRTDSpanBindings\&#x27;)}}&quot;&gt;&lt;/span&gt;\r\n\t\t\t&lt;/td&gt;\r\n\t\t&lt;/tr&gt;\r\n\t\t{{?it.treetable}}\r\n\t\t&lt;!-- ko {{=it.dataBind(\&#x27;tbodyTRChildrenTemplateBindings\&#x27;)}} --&gt;&lt;!-- /ko --&gt;\r\n\t\t{{?}}\r\n\t&lt;/script&gt;\r\n\t\r\n&lt;/div&gt;&#x27;;});


define(&#x27;text!Firebrick.ui/table/tpls/checkbox.html&#x27;,[],function () { return &#x27;&lt;input type=&quot;checkbox&quot; data-bind=&quot;{{=it.scope.dataBind(\&#x27;checkboxBindings\&#x27;, it.value)}}&quot; /&gt;&#x27;;});

/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.common.Base
 * @namespace components.table
 * @class Table
 */
define(&#x27;Firebrick.ui/table/Table&#x27;,[&quot;knockout&quot;, &quot;knockout-mapping&quot;, &quot;jquery&quot;, &quot;doT&quot;, &quot;text!./Table.html&quot;, &quot;text!./tpls/checkbox.html&quot;, &quot;../common/Base&quot;, &quot;datatables&quot;, &quot;jquery-treetable&quot;, &quot;responsive-tables-js&quot;, &quot;./plugins/EditableTable&quot;], function(ko, kom, $, doT, tpl, checkboxTpl){
	&quot;use strict&quot;;
	
	if(!ko.bindingHandlers.trRenderer){
		/*
		 * optionsRenderer for list
		 * create dynamic css along with static
		 */
		ko.virtualElements.allowedBindings.trRenderer = true;
		ko.bindingHandlers.trRenderer = {
		    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
		    	var clazz = valueAccessor(),
		    		propName = clazz.propDataName,
		    		$el = $( element );
		    	
		    	$el.prop(propName, viewModel);
		    }
		};
	}
	
	return Firebrick.define(&quot;Firebrick.ui.table.Table&quot;, {
		extend:&quot;Firebrick.ui.common.Base&quot;,
		/**
		 * @property sName
		 * @type {String}
		 * @default &quot;fb-ui-table&quot;
		 */
		sName: &quot;table.table&quot;,
		/**
		 * @property tpl
		 * @type {String} html
		 */
		tpl: tpl,
		/**
		 * sets the bootstrap css class &quot;responsive&quot; to the table
		 * @property responsiveClass
		 * @type {Boolean}
		 * @default true
		 */
		responsiveClass:true,
		/**
		 * activates the responsive-table-js package on the table
		 * @property responsive
		 * @type {Boolean}
		 * @default true
		 */
		responsive:true,
		/**
		 * @property editType
		 * @type {String} row|cell
		 * @default &quot;row&quot;
		 */
		editType:&quot;row&quot;,
		/**
		 * @example
		 * 
		 * columns: [{
		 * 		mapping:  {String} dot notation to property in store json
		 * 		type: {String} [default=input] | number, float, checkbox, date - used to format the value or run a default renderer
		 * 		format: {String} - used to format the type if needed. Example for type=date - format YYYY-MM-DD
		 * 		editable: {Boolean} [default=true] - specify whether the cells in this column should be editable. Only valid if the table&#x27;s editabletable is also set to true
		 * 		editConf: {Object} used to configure the Editable table plugin - see Plugin for configuration
		 * 		text: {String} column title (&lt;th&gt;&lt;/th&gt;)
		 * 		renderer: {Function} define this to parse the value before it is display and output &quot;anything&quot; you like - for example to convert an String value into an &lt;img&gt; tag. data-bind attributes on dynamic created elements work here too
		 * 							 arguments passed are -&gt; (columnConfig, koValue, rawValue)
		 * }]
		 * 
		 * 
		 * @property columns
		 * @type {Array of Objects}
		 * @default null
		 */
		columns:null,
		/**
		 * @property tdSpanClass
		 * @type {String}
		 * @default &quot;fb-ui-tablecell-data&quot;
		 */
		tdSpanClass: &quot;fb-ui-tablecell-data&quot;,
		/**
		 * @property tableStriped
		 * @type {Boolean|String}
		 * @default true
		 */
		tableStriped:true,
		/**
		 * @property tableHover
		 * @type {Boolean|String}
		 * @default true
		 */
		tableHover:true,
		/**
		 * @property tableCondensed
		 * @type {Boolean|String}
		 * @default false
		 */
		tableCondensed:false,
		/**
		 * @property tableBordered
		 * @type {Boolean|String}
		 * @default false
		 */
		tableBordered:false,
		/**
		 * @property showHeadings
		 * @type {Boolean}
		 * @default true
		 */
		showHeadings:true,
		/**
		 * @property showRows
		 * @type {Boolean}
		 * @default true
		 */
		showRows:true,
		/**
		 * activate the editable table plugin
		 * @property editabletable
		 * @type {Boolean}
		 * @default false
		 */
		editabletable:false,
		/**
		 * which property the data of the tr is stored to the element
		 * @property propDataName
		 * @type {String}
		 * @default &quot;fb-ui-tr-data&quot;
		 */
		propDataName: &quot;fb-ui-tr-data&quot;,
		/**
		 * use option to enable and configure datable: http://datatables.net/examples/index
		 * @property datatable
		 * @type {Boolean|Object|Function (return Object) }
		 * @default false
		 */
		datatable: false,
		/**
		 * default datatable configurations
		 * @property _datatable
		 * @type {Object|Function (return Object) }
		 * @default {}
		 */
		_datatable: {},
		/**
		 * works with parameter treetable
		 * @property expandable
		 * @type {Boolean}
		 * @default true
		 */
		expandable:true,
		/**
		 * set the initialState property of the tree table plugin
		 * @property expanded
		 * @type {Boolean}
		 * @default false
		 */
		expanded: false,
		/**
		 * works with parameter treetable
		 * @property showCaption
		 * @type {Boolean|String}
		 * @default true
		 */
		showCaption:true,
		/**
		 * works with parameter treetable
		 * @property expandText
		 * @type {String}
		 * @default &quot;Expand&quot;
		 */
		expandText:&#x27;Expand&#x27;,
		/**
		 * works with parameter treetable
		 * @property collapseText
		 * @type {String}
		 * @default &quot;Collapse&quot;
		 */
		collapseText: &#x27;Collapse&#x27;,
		/**
		 * whether to show the collapse / expand buttons for the treetable
		 * @property showOptions
		 * @type {Boolean}
		 * @default true
		 */
		showOptions: true,
		/**
		 * this is the very config that is used to configure the modal that is shown for editing a record - use the properties of Firebrick.ui.containers.Modal
		 * @example
		 * 		{
		 * 			_showEditButtons: true|false //controls whether the footer buttons are shown [default=true]
		 * 			_editOkText: &quot;OK&quot; // [default=&quot;OK&quot;] only if _showEditButtons === true
		 * 			_editCancelText: &quot;Cancel&quot; // [default=&quot;Cancel&quot;] only if _showEditButtons === true
		 * 		}
		 * @event beforeChanges, afterChanges
		 * @property editModalConfig
		 * @type {Object}
		 * @default null
		 */
		editModalConfig: null,
		/**
		 * @method _itemId
		 * @private
		 * @type {Integer}
		 * @default 0
		 */
		_itemId: 0,
		/**
		 * configuration: http://ludo.cubicphuse.nl/jquery-treetable/
		 * @property treetable
		 * @type {Boolean|Object|Function (return Object)}
		 * @default false
		 */
		treetable: false,
		/**
		 * default treetable configuration
		 * @property _treetable
		 * @private
		 * @type {Object|Function (return Object) }
		 * @return {Object}
		 * @default {}
		 */
		_treetable: function(){
			var me = this;
			return {
				expandable: me.expandable,
				initialState: me.expanded ? &quot;expanded&quot; : &quot;collapsed&quot;,
				expanderTemplate: &#x27;&lt;a class=&quot;glyphicon&quot;&gt;&amp;nbsp;&lt;/a&gt;&#x27;
			};
		},
		/**
		 * used to cache a ko computed observable by _allCheckedObservable()
		 * @property _allCheckedObservableProp
		 * @private
		 * @type {KO Computed}
		 * @default null
		 */
		_allCheckedObservableProp: null, 
		/**
		 * @method init
		 */
		init:function(){
			var me = this;
			
			me.data = kom.fromJS(me.data); 
			
			me.on(&quot;rendered&quot;, function(){
				var id = me.getId(),
					table = me.getElement();
				if(me.datatable &amp;&amp; !me.treetable){
					me._preTableConfig(&quot;datatable&quot;);
					table.dataTable( me.datatable );
				}
				
				if(me.editabletable){
					table.EditableTable();
				}
				
				if(me.treetable){
					if(me.showOptions){
						$(&quot;a#fb-expand-&quot; + id).on(&quot;click&quot;, me.generateOnclick(&quot;expandAll&quot;));
						$(&quot;a#fb-collapse-&quot; + id).on(&quot;click&quot;, me.generateOnclick(&quot;collapseAll&quot;));
					}
					me._preTableConfig(&quot;treetable&quot;);
					table.treetable( me.treetable );
				}
				if(me.responsive &amp;&amp; window.responsiveTables){
					window.responsiveTables.update(id);
				}
			});
			me.callParent(arguments);
		},
		/**
		 * used by _preTableConfig
		 * @method __preTableConfig
		 * @param propName {String}
		 * @private
		 * @return {self}
		 */
		__preTableConfig: function( propName ){
			var me = this,
				prop = me[propName];
			if( !$.isPlainObject(prop) &amp;&amp; !$.isFunction(prop) ){
				prop = {};
			}
			if( $.isFunction( me[propName] ) ){
				prop = prop.apply(me);
			}
			me[propName] = prop;
			return me;
		},
		/**
		 * 
		 * @method _preTableConfig
		 * @param propName {String}
		 * @private
		 * @return {self}
		 */
		_preTableConfig: function( propName ){
			var me = this,
				defaultProp = &quot;_&quot; + propName;
			me.__preTableConfig( propName );
			me.__preTableConfig( defaultProp );
			me[propName] = Firebrick.utils.copyover( me[propName], me[defaultProp] );
			return me;
		},
		/**
		 * @method containerBindings
		 * @return {Object}
		 */
		containerBindings: function(){
			var me = this;
			return {
				css:{
					&quot;&#x27;responsive&#x27;&quot;: me.responsiveClass
				}
			};
		},
		/**
		 * @method _getData
		 * @private
		 * @return {Object}
		 */
		_getData: function(){
			var me = this;
			if(me.store &amp;&amp; me.store.isStore){
				return &quot;Firebrick.getById(&#x27;&quot; + me.getId() + &quot;&#x27;).getData()&quot;;
			}
			return {};
		},
		/**
		 * @method bindings
		 * @return {Object}
		 */
		bindings: function(){
			var me = this,
				obj = me.callParent(arguments);
			
			obj[&quot;with&quot;] = me._getData();
			obj.css.table = true;
			obj.css[&quot;&#x27;table-striped&#x27;&quot;] = me.tableStriped;
			obj.css[&quot;&#x27;table-hover&#x27;&quot;] = me.tableHover;
			obj.css[&quot;&#x27;table-condensed&#x27;&quot;] = me.tableCondensed;
			obj.css[&quot;&#x27;table-bordered&#x27;&quot;] = me.tableBordered;
			obj.css[&quot;&#x27;responsive&#x27;&quot;] =  me.responsive;
			
			return obj;
		},
		/**
		 * @method theadBindings
		 * @return {Object}
		 */
		theadBindings: function(){
			var me = this,
				obj = {
					&quot;if&quot;: false
				};
			
			if(me.columns){
				obj[&quot;if&quot;] = true;
			}
			
			return obj;
		},
		/**
		 * @method theadTRBindings
		 * @return {Object}
		 */
		theadTRBindings:function(){
			return {
				&quot;foreach&quot;: &quot;Firebrick.getById(&#x27;&quot; + this.getId() + &quot;&#x27;).columns&quot;
			};
		},
		/**
		 * @method theadTRTDBindings
		 * @return {Object}
		 */
		theadTRTDBindings:function(){
			var me = this;
			return {
				htmlWithBinding: &quot;Firebrick.getById(&#x27;&quot; + me.getId() + &quot;&#x27;)._thRenderer($data, $context, $parent, $root)&quot;
			};
		},
		/**
		 * used by theadTRTDBindings
		 * @method _thRenderer
		 * @private
		 * @return {Any}
		 */
		_thRenderer: function($data, $context, $parent, $root){
			var me = this,
				type = $data.type,
				html = $data.text ? $data.text : $data;
			
			if(type === &quot;checkbox&quot;){
				html = &#x27;&lt;input type=&quot;checkbox&quot; data-bind=&quot;&#x27; + me.dataBind(&quot;thCheckboxBindings&quot;) + &#x27;&quot; /&gt; &#x27; + html;
			}
			
			return html;
		},
		/**
		 * @method tbodyBindings
		 * @return {Object}
		 */
		tbodyBindings:function(){
			return {};
		},
		/**
		 * @method tbodyTRTemplateBindings
		 * @return {Object}
		 */
		tbodyTRTemplateBindings: function(){
			var me = this;
			return {
				template: {
					name:  me.parseBind( me._getTplId() ),
					&quot;foreach&quot;: &quot;$data&quot;
				}
			};
		},
		/**
		 * @method tbodyTRBindings
		 * @return {Object}
		 */
		tbodyTRBindings:function(){
			var me = this;
			return {
				foreach: &quot;Firebrick.getById(&#x27;&quot; + me.getId() + &quot;&#x27;).columns&quot;,
				&quot;attr&quot;:{
					&quot;&#x27;data-tt-id&#x27;&quot;: &quot;Firebrick.getById(&#x27;&quot; + me.getId() + &quot;&#x27;)._getItemId( $data )&quot;,
					&quot;&#x27;data-tt-parent-id&#x27;&quot;: &quot;$parent._ttId&quot;
				},
				css: {
					&quot;group&quot;: &quot;$data.children ? true : false&quot;
				},
				trRenderer: &quot;Firebrick.getById(&#x27;&quot; + me.getId() + &quot;&#x27;)&quot;
			};
		},
		/**
		 * @method _getItemId
		 * @param $data {ko data object}
		 * @return {ko.observable || Integer}
		 */
		_getItemId: function($data){
			var me = this;
			
			if( $.isPlainObject($data) ){
				if( !$data.hasOwnProperty( &quot;_ttId&quot; ) ){
					$data._ttId = me._itemId++;
				}
				return $data._ttId;
			}
			
			return;
		},
		/**
		 * @method tbodyTRTDBindings
		 * @return {Object}
		 */
		tbodyTRTDBindings:function(){
			return {
				attr: {
					&quot;&#x27;data-tt-id&#x27;&quot;: &quot;$index&quot;,
					&quot;&#x27;fb-ui-row-id&#x27;&quot;: &quot;$parentContext.$parent._ttId&quot;
				}
			};
		},
		/**
		 * @method tbodyTRTDSpanBindings
		 * @return {Object}
		 */
		tbodyTRTDSpanBindings: function(){
			var me = this,
				obj = {
					css: {},
					allowBindings: true,
					htmlWithBinding: &quot;Firebrick.getById(&#x27;&quot; + me.getId() + &quot;&#x27;)._tdRenderer($data, $context, $parentContext, $root, $element)&quot;
				};
			
			obj.css[me.parseBind( me.tdSpanClass )] = true;
			
			return obj;
		},
		/**
		 * @method _tdRenderer
		 * @private
		 * @return {Any}
		 */
		_tdRenderer: function($data, $context, $parentContext, $root, $element){
			var me = this,
				data = Firebrick.utils.getDeepProperty( $data.mapping,  $parentContext.$data ),	//get the value of mapping property in the parent data object
				value = me.b( data ),	//get the primitive value - so if an observable (function) simply call it, else return primitive
				type = $data.type, //check the column for the type specified
				cssClazz = &quot;fb-ui-col-&quot; + $context.$index();		
			
			if(!$data._colId){
				$data._colId = cssClazz;
			}
			
			$($element).addClass( cssClazz );
			
			if(type){
				if(type === &quot;number&quot;){
					value = parseInt( value );
				}else if(type === &quot;float&quot;){
					value = parseFloat( value );
				}else if (type === &quot;checkbox&quot;){
					if(data !== null){
						if(typeof value === &quot;string&quot;){
							value = value === &quot;true&quot; ? true : false;
						}
						value = me.checkboxRenderer( $data, data, value, $context, $parentContext, $root, $element );
					}
				}
			}
			
			if($data.renderer){
				value = $data.renderer( $data, data, value, $context, $parentContext, $root, $element );
			}
			
			return value;
		},
		/**
		 * @method thCheckboxBindings
		 * @return {Object}
		 */
		thCheckboxBindings: function(){
			var me = this,
				obj = {};
			
			obj.checked = &quot;Firebrick.getById(&#x27;&quot; + me.getId() + &quot;&#x27;)._allCheckedObservable($context)&quot;;
			
			return obj;
		},
		/**
		 * adapted from: http://stackoverflow.com/a/31520911/425226
		 * @method _allCheckedObservable
		 * @private
		 * @param $context {ko Object}
		 * @return ko.computed
		 */
		_allCheckedObservable: function($context){
			var me = this,
				$col = $context.$data,
				$el = me.getElement();
			//store in prop and return that prop to stop memory leak from occurring
			me._allCheckedObservableProp = me._allCheckedObservableProp || ko.computed({
				read: function () {
				    var mapping = $col.mapping,
			    		data = me.getData(),
				    	func = function(_data){				//recursive function
				    		var it,
				    			children;
				    		it = Firebrick.utils.getDeepProperty( mapping, _data );	//returns property or null
							if( $.isFunction(it) &amp;&amp; !it() ){
								return false;
							}else if( _data.children ){
								children = _data.children();
								for(var i = 0, l = children.length; i&lt;l; i++){
									return func( children[i] );
								}
							}
					    	return true;
				    	};
				    
				    if(data &amp;&amp; $.isFunction(data)){
				    	data = data();
				    	for(var i = 0, l = data.length; i&lt;l; i++){
				    		return func( data[i] );	//iterate over all properties and children to determine whether the checkbox should be checked initially
				    	}
				    }
				    
				    return false;
				},
				write: function (newValue) {
					var $selector = $(&quot;tbody tr&quot;, $el),
						data,
						mapping = $col.mapping;
				    for(var i = 0, l = $selector.length; i&lt;l; i++){
						data = Firebrick.utils.getDeepProperty(mapping, $( $selector[i] ).prop( me.propDataName ) );	//returns property or null
						if( $.isFunction( data ) ){
							data( newValue );	
						}
					}
				}
			});
			return me._allCheckedObservableProp;
		},
		/**
		 * @method checkboxRenderer
		 * @param $data
		 * @param data
		 * @param value
		 * @return {String} HTML
		 */
		checkboxRenderer: function($data, data, value){
			var me = this;
			return doT.template(checkboxTpl)({
				scope: me,
				value: value
			});
		},
		/**
		 * used by checkbox tpl
		 * @method checkboxBindings
		 * @return 
		 */
		checkboxBindings: function( value ){
			return {
				checked: &quot;Firebrick.utils.getDeepProperty( $data.mapping, $parent )&quot;
			};
		},
		/**
		 * @private
		 * @method _getTplId
		 * @return {String}
		 */
		_getTplId: function(){
			return &quot;fb-ui-tpl-&quot; + this.getId(); 
		},
		/**
		 * @method tbodyTRChildrenTemplateBindings
		 * @return {Object}
		 */
		tbodyTRChildrenTemplateBindings: function(){
			var me = this;
			return {
				template: {
					name:  me.parseBind( me._getTplId() ),
					&quot;foreach&quot;: &quot;$data.children&quot;
				}
			};
		},
		/**
		 * @method captionBindings
		 * @return {Object}
		 */
		captionBindings:function(){
			var me = this;
			return {
				show: me.showCaption
			};
		},
		/**
		 * @method generateOnclick
		 * @param type {String} expandAll, collapseAll
		 * @return {Function}
		 */
		generateOnclick: function(type){
			var me = this;
			return function(){
				me.getElement().treetable(type); 
				return false;
			};
		},
		/**
		 * @method expandBindings
		 * @return {Object}
		 */
		expandBindings:function(){
			var me = this;
			return {
				text: me.textBind( me.expandText ),
				attr:{
					id: me.parseBind(&quot;fb-expand-&quot; + me.getId()),
					href:&quot;&#x27;&#x27;&quot;
				}
			};
		},
		/**
		 * @method collapseBindings
		 * @return {Object}
		 */
		collapseBindings:function(){
			var me = this;
			return {
				text: me.textBind( me.collapseText ),
				attr:{
					id: me.parseBind(&quot;fb-collapse-&quot; + me.getId()),
					href:&quot;&#x27;&#x27;&quot;
				}
			};
		}
		
	});
});
/*!
 * @author Steven Masala [me@smasala.com]
 */

/**
 * @module Firebrick.ui.components
 * @extends components.table.Table
 * @namespace components.table
 * @class TreeTable
 */
define(&#x27;Firebrick.ui/table/TreeTable&#x27;,[&quot;./Table&quot;, &quot;jquery-treetable&quot;], function(){
	&quot;use strict&quot;;
	return Firebrick.define(&quot;Firebrick.ui.table.TreeTable&quot;, {
		extend:&quot;Firebrick.ui.table.Table&quot;,
		/**
		 * @property sName
		 * @type {String}
		 */
		sName: &quot;table.treetable&quot;,
		/**
		 * @property data
		 * @type {Object|String}
		 * @default &quot;&#x27;&#x27;&quot;
		 */
		store:false,
		/**
		 * @property treetable
		 * @type {Boolean}
		 * @default true
		 */
		treetable:true
	});
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
